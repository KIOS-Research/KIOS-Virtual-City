

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>basp.views &mdash; KIOS BaSP 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> KIOS BaSP
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"></div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">KIOS BaSP</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>basp.views</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for basp.views</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">viewsets</span>
<span class="kn">from</span> <span class="nn">rest_framework.parsers</span> <span class="kn">import</span> <span class="n">FileUploadParser</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">connection</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">serializers</span>
<span class="kn">from</span> <span class="nn">rest_framework.response</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">status</span>
<span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">viewsets</span>
<span class="kn">from</span> <span class="nn">rest_framework.views</span> <span class="kn">import</span> <span class="n">APIView</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">watersim</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">dbcommunication</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">databaseTables</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">basp.dbcommunication</span> <span class="k">as</span> <span class="nn">dbcommunication</span>
<span class="kn">import</span> <span class="nn">datetime</span> <span class="k">as</span> <span class="nn">dtmsavewaterdata</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">get_object_or_404</span>
<span class="kn">import</span> <span class="nn">ast</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">choices</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">django.core.files.storage</span> <span class="kn">import</span> <span class="n">FileSystemStorage</span>
<span class="kn">from</span> <span class="nn">django.core.files.storage</span> <span class="kn">import</span> <span class="n">default_storage</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">django.core.files.base</span> <span class="kn">import</span> <span class="n">ContentFile</span>
<span class="kn">from</span> <span class="nn">drf_yasg.utils</span> <span class="kn">import</span> <span class="n">swagger_auto_schema</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">FileResponse</span>
<span class="kn">from</span> <span class="nn">drf_yasg</span> <span class="kn">import</span> <span class="n">openapi</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">sensorsProfile</span>
<span class="kn">import</span> <span class="nn">traci</span>
<span class="kn">from</span> <span class="nn">influxdb</span> <span class="kn">import</span> <span class="n">InfluxDBClient</span>
<span class="kn">import</span> <span class="nn">wntr</span>
<span class="kn">import</span> <span class="nn">yaml</span>
<span class="kn">import</span> <span class="nn">paramiko</span>
<span class="kn">from</span> <span class="nn">scp</span> <span class="kn">import</span> <span class="n">SCPClient</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">addleakages</span>

<span class="c1">#UPDATED</span>
<div class="viewcode-block" id="WaterView"><a class="viewcode-back" href="../../basp.html#basp.views.WaterView">[docs]</a><span class="k">class</span> <span class="nc">WaterView</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Water View&quot;&quot;&quot;</span>
<div class="viewcode-block" id="WaterView.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterView.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This endpoint returns a list of all the editable EPANET input file fields&quot;&quot;&quot;</span>
        <span class="n">editable_fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;Backdrop&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Coordinates&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Vertices&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Labels&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Options&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Times&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Report&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Quality&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Reactions&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Sources&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Mixing&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Curves&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Patterns&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Energy&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Status&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Controls&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Rules&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Demands&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Title&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Junctions&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Reservoirs&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Tanks&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Pipes&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Pumps&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Valves&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Emitters&#39;</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Water Simulations&#39;</span><span class="p">,</span> <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s1">&#39;Here you can read/edit the EPANET inp file, the fields you can edit are listed in details&#39;</span><span class="p">,</span> <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="n">editable_fields</span><span class="p">})</span></div></div>


<span class="c1">#UPDATED</span>
<div class="viewcode-block" id="WaterDeleteDBViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterDeleteDBViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterDeleteDBViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to delete existing experiments from database.</span>
<span class="sd">        Provide the experiments names in a list.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterDeleteDBViewSet</span>

<div class="viewcode-block" id="WaterDeleteDBViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterDeleteDBViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all the experiments available for deleting&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">existing_ex_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
            <span class="n">allthenames</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">existing_ex_names</span><span class="p">:</span>
                <span class="n">allthenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">ex_name</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Water Simulations&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s1">&#39;Here you can delete experiments from BaSP&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;experiments&#39;</span><span class="p">:</span> <span class="n">allthenames</span><span class="p">})</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>


<div class="viewcode-block" id="WaterDeleteDBViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.WaterDeleteDBViewSet.post">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to delete experiments&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">shutil</span>
        <span class="kn">import</span> <span class="nn">basp.dbcommunication</span> <span class="k">as</span> <span class="nn">dbcommunication</span>
        <span class="n">existing_ex_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
        <span class="n">allthenames</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">existing_ex_names</span><span class="p">:</span>
            <span class="n">allthenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">ex_name</span><span class="p">)</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterDeleteDBViewSet</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">experimentname</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;experimentname&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">experimentname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;[&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">experimentname</span> <span class="ow">or</span> <span class="s2">&quot;]&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">experimentname</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span><span class="s1">&#39;experimentname must be a list&#39;</span><span class="p">,</span><span class="s1">&#39;allowed experiment names&#39;</span><span class="p">:</span> <span class="n">allthenames</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">client</span> <span class="o">=</span> <span class="n">InfluxDBClient</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;influxdb&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8086</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s1">&#39;kios&#39;</span><span class="p">,</span><span class="n">password</span><span class="o">=</span><span class="s1">&#39;kios1234!&#39;</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="s1">&#39;virtual_city&#39;</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">client</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">newlinks</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">experimentname</span><span class="p">)</span>
                        <span class="n">newlinks</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">newlinks</span><span class="p">]</span>
                        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">newlinks</span><span class="p">:</span>
                            <span class="n">scada</span> <span class="o">=</span> <span class="s1">&#39;water_output_&#39;</span><span class="o">+</span><span class="n">value</span><span class="o">+</span><span class="s1">&#39;_scada_sensors&#39;</span>
                            <span class="n">sensors</span> <span class="o">=</span> <span class="s1">&#39;water_output_&#39;</span><span class="o">+</span><span class="n">value</span><span class="o">+</span><span class="s1">&#39;_sensors&#39;</span>
                            <span class="c1"># postgresql_query = &#39;DROP TABLE IF EXISTS &#39;+scada</span>
                            <span class="n">client</span><span class="o">.</span><span class="n">drop_measurement</span><span class="p">(</span><span class="n">scada</span><span class="p">)</span>
                            <span class="n">client</span><span class="o">.</span><span class="n">drop_measurement</span><span class="p">(</span><span class="n">sensors</span><span class="p">)</span>
                            <span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ex_name</span><span class="o">=</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
                            <span class="n">dir_path</span>  <span class="o">=</span> <span class="s2">&quot;basp</span><span class="se">\\</span><span class="s2">uploads</span><span class="se">\\</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">dir_path</span><span class="p">)</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">x</span><span class="o">=</span><span class="s1">&#39;no folder&#39;</span>
                            <span class="c1"># dbcommunication.db_tables_simple_query(postgresql_query)</span>
                        <span class="n">existing_ex_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
                        <span class="n">allthenames</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">existing_ex_names</span><span class="p">:</span>
                            <span class="n">allthenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">ex_name</span><span class="p">)</span>
                        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Data Deleted&#39;</span><span class="p">})</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;invalid experiment name/s&#39;</span><span class="p">,</span><span class="s1">&#39;allowed experiment names&#39;</span><span class="p">:</span> <span class="n">allthenames</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;invalid experiment name/s&#39;</span><span class="p">,</span><span class="s1">&#39;allowed experiment names&#39;</span><span class="p">:</span> <span class="n">allthenames</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED, REMOVED Create (not needed)</span>
<div class="viewcode-block" id="WaterBackdropViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterBackdropViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterBackdropViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to read, and update Backdrop.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterBackdropSerializer</span>

<div class="viewcode-block" id="WaterBackdropViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterBackdropViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the backdrop data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;DIMENSIONS&#39;</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">dimensions</span><span class="p">,</span><span class="s1">&#39;UNITS&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">units</span><span class="p">,</span>
                                                             <span class="s1">&#39;FILE&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">image_filename</span><span class="p">,</span><span class="s1">&#39;OFFSET&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">offset</span><span class="p">})</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterBackdropViewSet.retrieve"><a class="viewcode-back" href="../../basp.html#basp.views.WaterBackdropViewSet.retrieve">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read a specific backdrop entry using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;DIMENSIONS&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">dimensions</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;UNITS&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">units</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;FILE&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">image_filename</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;OFFSET&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">offset</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterBackdropViewSet.destroy"><a class="viewcode-back" href="../../basp.html#basp.views.WaterBackdropViewSet.destroy">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">204</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, entry deleted&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to remove a backdrop from the database using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;DIMENSIONS&#39;</span><span class="p">:</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">dimensions</span><span class="o">=</span><span class="kc">None</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;UNITS&#39;</span><span class="p">:</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">units</span><span class="o">=</span><span class="kc">None</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;FILE&#39;</span><span class="p">:</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">image_filename</span><span class="o">=</span><span class="kc">None</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;OFFSET&#39;</span><span class="p">:</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">offset</span><span class="o">=</span><span class="kc">None</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterBackdropViewSet.update"><a class="viewcode-back" href="../../basp.html#basp.views.WaterBackdropViewSet.update">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, entry updated&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to update a backdrop using its id&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterBackdropSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
                <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;DIMENSIONS&#39;</span><span class="p">:</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">dimensions</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">))</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;UNITS&#39;</span><span class="p">:</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;FILE&#39;</span><span class="p">:</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">image_filename</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;OFFSET&#39;</span><span class="p">:</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">))</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED</span>
<div class="viewcode-block" id="WaterControlsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterControlsViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterControlsViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to read, create and update Controls.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterControlsSerializer</span>

<div class="viewcode-block" id="WaterControlsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterControlsViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the control data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;controls&#39;</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">control_name_list</span><span class="p">})</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterControlsViewSet.retrieve"><a class="viewcode-back" href="../../basp.html#basp.views.WaterControlsViewSet.retrieve">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read a specific control entry using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="n">pk</span><span class="p">,</span><span class="s1">&#39;actions&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(),</span><span class="s1">&#39;condition&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">wn</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span><span class="o">.</span><span class="n">condition</span><span class="p">)}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterControlsViewSet.create"><a class="viewcode-back" href="../../basp.html#basp.views.WaterControlsViewSet.create">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, entry created&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to add a control to the database&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterBackdropSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
                <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">))</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">actions</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;actions&#39;</span><span class="p">)</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">condition</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;condition&#39;</span><span class="p">)</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterControlsViewSet.update"><a class="viewcode-back" href="../../basp.html#basp.views.WaterControlsViewSet.update">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, entry updated&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">),</span> <span class="mi">404</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, entry not found&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to update a control using its id&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterControlsSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
                <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="p">))</span><span class="o">.</span><span class="n">actions</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;actions&#39;</span><span class="p">)</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="p">))</span><span class="o">.</span><span class="n">condition</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;condition&#39;</span><span class="p">)</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterControlsViewSet.destroy"><a class="viewcode-back" href="../../basp.html#basp.views.WaterControlsViewSet.destroy">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, entry deleted&#39;</span><span class="p">),</span> <span class="mi">404</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, entry not found&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to remove a control from the database using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">wn</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span>
            <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED</span>
<div class="viewcode-block" id="WaterCoordinatesViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterCoordinatesViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterCoordinatesViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to read, create and update Coordinates.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterCoordinatesSerializer</span>

<div class="viewcode-block" id="WaterCoordinatesViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterCoordinatesViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the coordinates data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">allnodes</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">node_name_list</span>
            <span class="n">finalcoordinates</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">allnodes</span><span class="p">:</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="n">coord</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;node&#39;</span><span class="p">:</span><span class="n">value</span><span class="p">,</span><span class="s1">&#39;X-Coord&#39;</span><span class="p">:</span><span class="n">node</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s1">&#39;Y-Coord&#39;</span><span class="p">:</span><span class="n">node</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">]}</span>
                <span class="n">finalcoordinates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coord</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="n">finalcoordinates</span><span class="p">})</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterCoordinatesViewSet.retrieve"><a class="viewcode-back" href="../../basp.html#basp.views.WaterCoordinatesViewSet.retrieve">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">404</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, entry not found&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read a specific coordinate entry using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">allnodes</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">node_name_list</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span>
            <span class="n">coord</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;node&#39;</span><span class="p">:</span> <span class="n">pk</span><span class="p">,</span> <span class="s1">&#39;X-Coord&#39;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;Y-Coord&#39;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">]}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="n">coord</span><span class="p">})</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterCoordinatesViewSet.update"><a class="viewcode-back" href="../../basp.html#basp.views.WaterCoordinatesViewSet.update">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, entry updated&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to update a coordinate using its id&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterCoordinatesSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
                <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span>
                <span class="n">node</span><span class="o">.</span><span class="n">coordinates</span> <span class="o">=</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;xcoord&#39;</span><span class="p">)),</span> <span class="nb">float</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ycoord&#39;</span><span class="p">)))</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterCoordinatesViewSet.destroy"><a class="viewcode-back" href="../../basp.html#basp.views.WaterCoordinatesViewSet.destroy">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">204</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, entry deleted&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to remove a coordinate from the database using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span>
            <span class="n">node</span><span class="o">.</span><span class="n">coordinates</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED removed create, create &amp; update</span>
<div class="viewcode-block" id="WaterCurvesViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterCurvesViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterCurvesViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to read, create and update Curves.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterCurvesSerializer</span>

<div class="viewcode-block" id="WaterCurvesViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterCurvesViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the curves data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">allcurves</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">curve_name_list</span>
            <span class="n">finalcurves</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">allcurves</span><span class="p">:</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_curve</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="n">curv</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;curve&#39;</span><span class="p">:</span><span class="n">value</span><span class="p">,</span><span class="s1">&#39;curve_type&#39;</span><span class="p">:</span><span class="n">node</span><span class="o">.</span><span class="n">curve_type</span><span class="p">,</span><span class="s1">&#39;points&#39;</span><span class="p">:</span><span class="n">node</span><span class="o">.</span><span class="n">points</span><span class="p">}</span>
                <span class="n">finalcurves</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">curv</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;curves&#39;</span><span class="p">:</span> <span class="n">finalcurves</span><span class="p">})</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterCurvesViewSet.retrieve"><a class="viewcode-back" href="../../basp.html#basp.views.WaterCurvesViewSet.retrieve">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">404</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, entry not found&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read a specific curve entry using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_curve</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span>
            <span class="n">curv</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;curve&#39;</span><span class="p">:</span> <span class="n">pk</span><span class="p">,</span> <span class="s1">&#39;curve_type&#39;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">curve_type</span><span class="p">,</span> <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">points</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;curves&#39;</span><span class="p">:</span> <span class="n">curv</span><span class="p">})</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED, REMOVED Create (not needed)</span>
<div class="viewcode-block" id="WaterEmittersViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterEmittersViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterEmittersViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to read, create and update Emitters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterEmittersSerializer</span>
<div class="viewcode-block" id="WaterEmittersViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterEmittersViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the emitters data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">allnodes</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">node_name_list</span>
            <span class="n">finalemit</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">allnodes</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">node</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                    <span class="n">emit</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;node&#39;</span><span class="p">:</span> <span class="n">value</span><span class="p">,</span> <span class="s1">&#39;Flow coefficient&#39;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">emitter_coefficient</span><span class="p">}</span>
                    <span class="n">finalemit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">emit</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">msg</span><span class="o">=</span><span class="s1">&#39;no emitter&#39;</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;emitters&#39;</span><span class="p">:</span> <span class="n">finalemit</span><span class="p">})</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterEmittersViewSet.retrieve"><a class="viewcode-back" href="../../basp.html#basp.views.WaterEmittersViewSet.retrieve">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read a specific emitter entry using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span>
            <span class="n">emit</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;node&#39;</span><span class="p">:</span> <span class="n">pk</span><span class="p">,</span> <span class="s1">&#39;Flow coefficient&#39;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">emitter_coefficient</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">emit</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterEmittersViewSet.update"><a class="viewcode-back" href="../../basp.html#basp.views.WaterEmittersViewSet.update">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, entry updated&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to update an emitter using its id&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterEmittersSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
                <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="n">node</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span>
                <span class="n">node</span><span class="o">.</span><span class="n">emitter_coefficient</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;flow_coefficient&#39;</span><span class="p">))</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterEmittersViewSet.destroy"><a class="viewcode-back" href="../../basp.html#basp.views.WaterEmittersViewSet.destroy">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, entry updated&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to remove an emitter from the database using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span>
            <span class="n">node</span><span class="o">.</span><span class="n">emitter_coefficient</span> <span class="o">=</span> <span class="nb">float</span><span class="p">()</span>
            <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED, removed create</span>
<div class="viewcode-block" id="WaterEnergyViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterEnergyViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterEnergyViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to read, create and update Energy.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterEnergySerializer</span>

<div class="viewcode-block" id="WaterEnergyViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterEnergyViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the energy data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">ene</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;global_price&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">global_price</span><span class="p">,</span><span class="s1">&#39;global_pattern&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">global_pattern</span><span class="p">,</span>
                   <span class="s1">&#39;global_efficiency&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">global_efficiency</span><span class="p">,</span><span class="s1">&#39;demand_charge&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">demand_charge</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;energy&#39;</span><span class="p">:</span> <span class="n">ene</span><span class="p">})</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterEnergyViewSet.retrieve"><a class="viewcode-back" href="../../basp.html#basp.views.WaterEnergyViewSet.retrieve">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">404</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, entry not found&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read a specific energy entry using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;global_price&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;global_price&#39;</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">global_price</span><span class="p">})</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;global_pattern&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;global_pattern&#39;</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">global_pattern</span><span class="p">})</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;global_efficiency&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;global_efficiency&#39;</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">global_efficiency</span><span class="p">})</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;demand_charge&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;demand_charge&#39;</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">demand_charge</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterEnergyViewSet.update"><a class="viewcode-back" href="../../basp.html#basp.views.WaterEnergyViewSet.update">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, entry updated&#39;</span><span class="p">),</span> <span class="mi">404</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, entry not found&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to update an energy using its id&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterEnergySerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
                <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;global_price&#39;</span><span class="p">:</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">global_price</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">))</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;global_pattern&#39;</span><span class="p">:</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">global_pattern</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">))</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;global_efficiency&#39;</span><span class="p">:</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">global_efficiency</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">))</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;demand_charge&#39;</span><span class="p">:</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">demand_charge</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">))</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterEnergyViewSet.destroy"><a class="viewcode-back" href="../../basp.html#basp.views.WaterEnergyViewSet.destroy">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, entry created&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to remove an energy from the database using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;global_price&#39;</span><span class="p">:</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">global_price</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;global_pattern&#39;</span><span class="p">:</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">global_pattern</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;global_efficiency&#39;</span><span class="p">:</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">global_efficiency</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;demand_charge&#39;</span><span class="p">:</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">demand_charge</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED, REMOVED destroy, create and update</span>
<div class="viewcode-block" id="WaterJunctionsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterJunctionsViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterJunctionsViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to read, create and update Junctions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterJunctionsSerializer</span>
<div class="viewcode-block" id="WaterJunctionsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterJunctionsViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the junction data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">wn</span><span class="o">.</span><span class="n">junction_name_list</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterJunctionsViewSet.retrieve"><a class="viewcode-back" href="../../basp.html#basp.views.WaterJunctionsViewSet.retrieve">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">404</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, entry not found&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read a specific junction entry using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pk</span> <span class="ow">in</span> <span class="n">wn</span><span class="o">.</span><span class="n">junction_name_list</span><span class="p">:</span>
                <span class="n">junction</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">pk</span><span class="p">]</span>
                <span class="n">base_demands</span> <span class="o">=</span> <span class="n">junction</span><span class="o">.</span><span class="n">demand_timeseries_list</span><span class="o">.</span><span class="n">base_demand_list</span><span class="p">()</span>
                <span class="n">demand_patterns</span> <span class="o">=</span> <span class="n">junction</span><span class="o">.</span><span class="n">demand_timeseries_list</span><span class="o">.</span><span class="n">pattern_list</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">base_demands</span><span class="p">:</span>
                    <span class="n">base_demand</span> <span class="o">=</span> <span class="n">base_demands</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">base_demand</span> <span class="o">=</span> <span class="mf">0.0</span>
                <span class="k">if</span> <span class="n">demand_patterns</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">demand_patterns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">pattern</span><span class="p">:</span>
                        <span class="n">demand_pattern</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">demand_pattern</span> <span class="o">=</span> <span class="n">demand_patterns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">demand_pattern</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;junction&#39;</span><span class="p">:</span><span class="n">pk</span><span class="p">,</span><span class="s1">&#39;elevation&#39;</span><span class="p">:</span><span class="n">junction</span><span class="o">.</span><span class="n">elevation</span><span class="p">,</span><span class="s1">&#39;demand&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">base_demand</span><span class="p">),</span><span class="s1">&#39;pattern&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">demand_pattern</span><span class="p">)}</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED, REMOVED retrieve,create,update,destroy (not needed)</span>
<div class="viewcode-block" id="WaterLabelsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterLabelsViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterLabelsViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to read, create and update Labels.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="WaterLabelsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterLabelsViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the labels data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">wn</span><span class="o">.</span><span class="n">_labels</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED, REMOVED create, update, destroy</span>
<div class="viewcode-block" id="WaterMixingViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterMixingViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterMixingViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to read, create and update Mixing.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterMixingSerializer</span>

<div class="viewcode-block" id="WaterMixingViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterMixingViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the mixing data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">tanks</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">tank_name_list</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">tanks</span><span class="p">:</span>
                <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;tank id&#39;</span><span class="p">:</span><span class="n">value</span><span class="p">,</span><span class="s1">&#39;Model&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">mixing_model</span><span class="p">,</span><span class="s1">&#39;Fraction&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">mixing_fraction</span><span class="p">})</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterMixingViewSet.retrieve"><a class="viewcode-back" href="../../basp.html#basp.views.WaterMixingViewSet.retrieve">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">404</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, entry not found&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read a specific mixing entry using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;tank id&#39;</span><span class="p">:</span> <span class="n">pk</span><span class="p">,</span> <span class="s1">&#39;Model&#39;</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span><span class="o">.</span><span class="n">mixing_model</span><span class="p">,</span><span class="s1">&#39;Fraction&#39;</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span><span class="o">.</span><span class="n">mixing_fraction</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED, REMOVED create, update, destroy</span>
<div class="viewcode-block" id="WaterOptionsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterOptionsViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterOptionsViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to read, create and update Options.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterOptionsSerializer</span>

<div class="viewcode-block" id="WaterOptionsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterOptionsViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the options data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;UNITS&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">inpfile_units</span><span class="p">,</span><span class="s1">&#39;HEADLOSS&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">headloss</span><span class="p">,</span>
                    <span class="s1">&#39;HYDRAULICS&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">hydraulics</span><span class="p">,</span><span class="s1">&#39;HYDRAULICS_FILENAME&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">hydraulics_filename</span><span class="p">,</span>
                    <span class="s1">&#39;QUALITY_PARAMETER&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">parameter</span><span class="p">,</span><span class="s1">&#39;QUALITY_TRACE_NODE&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">trace_node</span><span class="p">,</span>
                    <span class="s1">&#39;QUALITY_CHEMICAL_NAME&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">chemical_name</span><span class="p">,</span><span class="s1">&#39;QUALITY_UNITS&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">inpfile_units</span><span class="p">,</span>
                    <span class="s1">&#39;VISCOSITY&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">viscosity</span><span class="p">,</span><span class="s1">&#39;DIFFUSIVITY&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">diffusivity</span><span class="p">,</span><span class="s1">&#39;SPECIFIC&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">specific_gravity</span><span class="p">,</span>
                    <span class="s1">&#39;TRIALS&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">trials</span><span class="p">,</span><span class="s1">&#39;ACCURACY&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">accuracy</span><span class="p">,</span><span class="s1">&#39;HEADERROR&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">headerror</span><span class="p">,</span><span class="s1">&#39;FLOWCHANGE&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">flowchange</span><span class="p">,</span>
                    <span class="s1">&#39;UNBALANCED&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">unbalanced</span><span class="p">,</span><span class="s1">&#39;UNBALANCED_VALUE&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">unbalanced_value</span><span class="p">,</span>
                    <span class="s1">&#39;MINIMUM&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">minimum_pressure</span><span class="p">,</span><span class="s1">&#39;REQUIRED&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">required_pressure</span><span class="p">,</span><span class="s1">&#39;PRESSURE&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">pressure_exponent</span><span class="p">,</span>
                    <span class="s1">&#39;PATTERN&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">pattern</span><span class="p">,</span><span class="s1">&#39;DEMAND_MULTIPLIER&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">demand_multiplier</span><span class="p">,</span><span class="s1">&#39;DEMAND_MODEL&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">demand_model</span><span class="p">,</span>
                    <span class="s1">&#39;EMITTER&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">emitter_exponent</span><span class="p">,</span><span class="s1">&#39;TOLERANCE&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">tolerance</span><span class="p">,</span><span class="s1">&#39;CHECKFREQ&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">checkfreq</span><span class="p">,</span>
                    <span class="s1">&#39;MAXCHECK&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">maxcheck</span><span class="p">,</span><span class="s1">&#39;DAMPLIMIT&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">damplimit</span><span class="p">,</span><span class="s1">&#39;MAP&#39;</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">map_filename</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterOptionsViewSet.retrieve"><a class="viewcode-back" href="../../basp.html#basp.views.WaterOptionsViewSet.retrieve">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read a specific option entry using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span>
            <span class="k">if</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;UNITS&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">inpfile_units</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;HEADLOSS&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">headloss</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;HYDRAULICS&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">hydraulics</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;HYDRAULICS_FILENAME&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">hydraulics_filename</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;QUALITY_PARAMETER&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">parameter</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;QUALITY_TRACE_NODE&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">trace_node</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;QUALITY_CHEMICAL_NAME&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">chemical_name</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;QUALITY_UNITS&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">inpfile_units</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;VISCOSITY&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">viscosity</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;DIFFUSIVITY&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span><span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">diffusivity</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;SPECIFIC&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">specific_gravity</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;TRIALS&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">trials</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;ACCURACY&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">accuracy</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;HEADERROR&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">headerror</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;FLOWCHANGE&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">flowchange</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;UNBALANCED&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">unbalanced</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;UNBALANCED_VALUE&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">unbalanced_value</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;MINIMUM&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">minimum_pressure</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;REQUIRED&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">required_pressure</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;PRESSURE&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">pressure_exponent</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;PATTERN&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">pattern</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;DEMAND_MULTIPLIER&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">demand_multiplier</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;DEMAND_MODEL&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">demand_model</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;EMITTER&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">emitter_exponent</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;TOLERANCE&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">tolerance</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;CHECKFREQ&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">checkfreq</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;MAXCHECK&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">maxcheck</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;DAMPLIMIT&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">hydraulic</span><span class="o">.</span><span class="n">damplimit</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;MAP&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">op</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">map_filename</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED, REMOVED create, update, destroy</span>
<div class="viewcode-block" id="WaterPatternsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterPatternsViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterPatternsViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to read, create and update Patterns.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="WaterPatternsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterPatternsViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the patterns data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;PATTERNS&#39;</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">pattern_name_list</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterPatternsViewSet.retrieve"><a class="viewcode-back" href="../../basp.html#basp.views.WaterPatternsViewSet.retrieve">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">404</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, entry not found&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read a specific pattern entry using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">pk</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_pattern</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span><span class="o">.</span><span class="n">multipliers</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED, REMOVED update, create, destroy</span>
<div class="viewcode-block" id="WaterPipesViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterPipesViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterPipesViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to read, create and update Pipes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterPipesSerializer</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">WaterPipes</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<div class="viewcode-block" id="WaterPipesViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterPipesViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the pipes data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;pipes&#39;</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">pipe_name_list</span><span class="p">})</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterPipesViewSet.retrieve"><a class="viewcode-back" href="../../basp.html#basp.views.WaterPipesViewSet.retrieve">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">404</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, entry not found&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read a specific pipe entry using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">pipe</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_link</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span>
            <span class="n">jresponse</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="n">pipe</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s1">&#39;length&#39;</span><span class="p">:</span><span class="n">pipe</span><span class="o">.</span><span class="n">length</span><span class="p">,</span>
                         <span class="s1">&#39;diameter&#39;</span><span class="p">:</span> <span class="n">pipe</span><span class="o">.</span><span class="n">diameter</span><span class="p">,</span> <span class="s1">&#39;roughness&#39;</span><span class="p">:</span><span class="n">pipe</span><span class="o">.</span><span class="n">roughness</span><span class="p">,</span> <span class="s1">&#39;minor_loss&#39;</span><span class="p">:</span><span class="n">pipe</span><span class="o">.</span><span class="n">minor_loss</span><span class="p">,</span>
                         <span class="s1">&#39;status&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">pipe</span><span class="o">.</span><span class="n">status</span><span class="p">),</span><span class="s1">&#39;start_node_name&#39;</span><span class="p">:</span><span class="n">pipe</span><span class="o">.</span><span class="n">start_node_name</span><span class="p">,</span><span class="s1">&#39;end_node_name&#39;</span><span class="p">:</span><span class="n">pipe</span><span class="o">.</span><span class="n">end_node_name</span><span class="p">,</span>
                         <span class="s1">&#39;flow&#39;</span><span class="p">:</span><span class="n">pipe</span><span class="o">.</span><span class="n">flow</span><span class="p">,</span><span class="s1">&#39;initial_setting&#39;</span><span class="p">:</span><span class="n">pipe</span><span class="o">.</span><span class="n">initial_setting</span><span class="p">,</span>
                         <span class="s1">&#39;initial_status&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">pipe</span><span class="o">.</span><span class="n">initial_status</span><span class="p">),</span><span class="s1">&#39;setting&#39;</span><span class="p">:</span><span class="n">pipe</span><span class="o">.</span><span class="n">setting</span><span class="p">,</span>
                         <span class="s1">&#39;tag&#39;</span><span class="p">:</span><span class="n">pipe</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span><span class="s1">&#39;vertices&#39;</span><span class="p">:</span><span class="n">pipe</span><span class="o">.</span><span class="n">vertices</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">jresponse</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED, REMOVED update, create, destroy</span>
<div class="viewcode-block" id="WaterPumpsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterPumpsViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterPumpsViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to read, create and update Pumps.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterPumpsSerializer</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">WaterPumps</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

<div class="viewcode-block" id="WaterPumpsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterPumpsViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the pumps data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;pipes&#39;</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">pump_name_list</span><span class="p">})</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>


<div class="viewcode-block" id="WaterPumpsViewSet.retrieve"><a class="viewcode-back" href="../../basp.html#basp.views.WaterPumpsViewSet.retrieve">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">404</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, entry not found&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read a specific pump entry using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">pump</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_link</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span>
            <span class="n">jresponse</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">pump</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                         <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">pump</span><span class="o">.</span><span class="n">status</span><span class="p">),</span> <span class="s1">&#39;start_node_name&#39;</span><span class="p">:</span> <span class="n">pump</span><span class="o">.</span><span class="n">start_node_name</span><span class="p">,</span>
                         <span class="s1">&#39;end_node_name&#39;</span><span class="p">:</span> <span class="n">pump</span><span class="o">.</span><span class="n">end_node_name</span><span class="p">,</span>
                         <span class="s1">&#39;flow&#39;</span><span class="p">:</span> <span class="n">pump</span><span class="o">.</span><span class="n">flow</span><span class="p">,</span> <span class="s1">&#39;initial_setting&#39;</span><span class="p">:</span> <span class="n">pump</span><span class="o">.</span><span class="n">initial_setting</span><span class="p">,</span>
                         <span class="s1">&#39;initial_status&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">pump</span><span class="o">.</span><span class="n">initial_status</span><span class="p">),</span>
                         <span class="s1">&#39;tag&#39;</span><span class="p">:</span> <span class="n">pump</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span> <span class="s1">&#39;vertices&#39;</span><span class="p">:</span> <span class="n">pump</span><span class="o">.</span><span class="n">vertices</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">jresponse</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED, REMOVED create</span>
<div class="viewcode-block" id="WaterReactionsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterReactionsViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterReactionsViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to read, create and update Reactions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterReactionsSerializer</span>

<div class="viewcode-block" id="WaterReactionsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterReactionsViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the reactions data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ORDER_BULK&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">bulk_order</span><span class="p">,</span><span class="s1">&#39;ORDER_WALL&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">wall_order</span><span class="p">,</span>
                    <span class="s1">&#39;ORDER_TANK&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">tank_order</span><span class="p">,</span><span class="s1">&#39;GLOBAL_BULK&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">bulk_coeff</span><span class="p">,</span>
                    <span class="s1">&#39;GLOBAL_WALL&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">wall_coeff</span><span class="p">,</span><span class="s1">&#39;LIMITING&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">limiting_potential</span><span class="p">,</span>
                    <span class="s1">&#39;ROUGHNESS&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">roughness_correl</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterReactionsViewSet.retrieve"><a class="viewcode-back" href="../../basp.html#basp.views.WaterReactionsViewSet.retrieve">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span><span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read a specific reaction entry using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;ORDER_BULK&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ORDER_BULK&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">bulk_order</span><span class="p">})</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;ORDER_WALL&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ORDER_WALL&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">wall_order</span><span class="p">})</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;ORDER_TANK&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ORDER_TANK&#39;</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">tank_order</span><span class="p">})</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;GLOBAL_BULK&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;GLOBAL_BULK&#39;</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">bulk_coeff</span><span class="p">})</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;GLOBAL_WALL&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;GLOBAL_WALL&#39;</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">wall_coeff</span><span class="p">})</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;LIMITING&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;LIMITING&#39;</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">limiting_potential</span><span class="p">})</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;ROUGHNESS&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;ROUGHNESS&#39;</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">roughness_correl</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterReactionsViewSet.update"><a class="viewcode-back" href="../../basp.html#basp.views.WaterReactionsViewSet.update">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to update a reaction using its id&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterReactionsSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
                <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;ORDER_BULK&#39;</span><span class="p">:</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">bulk_order</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">))</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;ORDER_WALL&#39;</span><span class="p">:</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">wall_order</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">))</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;ORDER_TANK&#39;</span><span class="p">:</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">tank_order</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">))</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;GLOBAL_BULK&#39;</span><span class="p">:</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">bulk_coeff</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">))</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;GLOBAL_WALL&#39;</span><span class="p">:</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">wall_coeff</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">))</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;LIMITING&#39;</span><span class="p">:</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">limiting_potential</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">))</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;ROUGHNESS&#39;</span><span class="p">:</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">roughness_correl</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">))</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterReactionsViewSet.destroy"><a class="viewcode-back" href="../../basp.html#basp.views.WaterReactionsViewSet.destroy">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to remove a reaction from the database using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;ORDER_BULK&#39;</span><span class="p">:</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">bulk_order</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;ORDER_WALL&#39;</span><span class="p">:</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">wall_order</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;ORDER_TANK&#39;</span><span class="p">:</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">tank_order</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;GLOBAL_BULK&#39;</span><span class="p">:</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">bulk_coeff</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;GLOBAL_WALL&#39;</span><span class="p">:</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">wall_coeff</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;LIMITING&#39;</span><span class="p">:</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">limiting_potential</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;ROUGHNESS&#39;</span><span class="p">:</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reaction</span><span class="o">.</span><span class="n">roughness_correl</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED, REMOVED create, update, destroy</span>
<div class="viewcode-block" id="WaterReportViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterReportViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterReportViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to read, create and update Report.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterReportSerializer</span>

<div class="viewcode-block" id="WaterReportViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterReportViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the reports data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">pagesize</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">report</span><span class="o">.</span><span class="n">pagesize</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">file</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">report</span><span class="o">.</span><span class="n">file</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">file</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">statusrep</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">report</span><span class="o">.</span><span class="n">status</span>
            <span class="n">summary</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">report</span><span class="o">.</span><span class="n">summary</span>
            <span class="n">energy</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">report</span><span class="o">.</span><span class="n">energy</span>
            <span class="n">nodes</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">report</span><span class="o">.</span><span class="n">nodes</span>
            <span class="n">links</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">report</span><span class="o">.</span><span class="n">links</span>
            <span class="n">report_params</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">report</span><span class="o">.</span><span class="n">report_params</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pagesize&#39;</span><span class="p">:</span><span class="n">pagesize</span><span class="p">,</span><span class="s1">&#39;file&#39;</span><span class="p">:</span><span class="n">file</span><span class="p">,</span><span class="s1">&#39;status&#39;</span><span class="p">:</span><span class="n">statusrep</span><span class="p">,</span><span class="s1">&#39;summary&#39;</span><span class="p">:</span><span class="n">summary</span><span class="p">,</span><span class="s1">&#39;energy&#39;</span><span class="p">:</span><span class="n">energy</span><span class="p">,</span><span class="s1">&#39;nodes&#39;</span><span class="p">:</span><span class="n">nodes</span><span class="p">,</span>
                    <span class="s1">&#39;links&#39;</span><span class="p">:</span><span class="n">links</span><span class="p">,</span><span class="s1">&#39;report_params&#39;</span><span class="p">:</span><span class="n">report_params</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterReportViewSet.retrieve"><a class="viewcode-back" href="../../basp.html#basp.views.WaterReportViewSet.retrieve">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read a specific report entry using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;pagesize&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pagesize&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">report</span><span class="o">.</span><span class="n">pagesize</span><span class="p">}</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;file&#39;</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">report</span><span class="o">.</span><span class="n">file</span><span class="p">}</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">}</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;status&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">report</span><span class="o">.</span><span class="n">status</span><span class="p">}</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;summary&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;summary&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">report</span><span class="o">.</span><span class="n">summary</span><span class="p">}</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;energy&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;energy&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">report</span><span class="o">.</span><span class="n">energy</span><span class="p">}</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;nodes&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;nodes&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">report</span><span class="o">.</span><span class="n">nodes</span><span class="p">}</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;links&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;links&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">report</span><span class="o">.</span><span class="n">links</span><span class="p">}</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;report_params&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;report_params&#39;</span><span class="p">:</span><span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">report</span><span class="o">.</span><span class="n">report_params</span><span class="p">}</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED, REMOVED update, create, destroy</span>
<div class="viewcode-block" id="WaterReservoirsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterReservoirsViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterReservoirsViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to read, create and update Reservoirs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterReservoirsSerializer</span>

<div class="viewcode-block" id="WaterReservoirsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterReservoirsViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the reservoirs data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">wn</span><span class="o">.</span><span class="n">reservoir_name_list</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterReservoirsViewSet.retrieve"><a class="viewcode-back" href="../../basp.html#basp.views.WaterReservoirsViewSet.retrieve">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read a specific reservoir entry using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">reservoir</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">pk</span><span class="p">]</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;reservoir&#39;</span><span class="p">:</span><span class="n">pk</span><span class="p">,</span><span class="s1">&#39;Head&#39;</span><span class="p">:</span><span class="n">reservoir</span><span class="o">.</span><span class="n">head_timeseries</span><span class="o">.</span><span class="n">base_value</span><span class="p">,</span><span class="s1">&#39;Pattern&#39;</span><span class="p">:</span><span class="n">reservoir</span><span class="o">.</span><span class="n">head_timeseries</span><span class="o">.</span><span class="n">pattern</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED, REMOVED update, create, destroy</span>
<div class="viewcode-block" id="WaterSourcesViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterSourcesViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterSourcesViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to read, create and update Sources.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterSourcesSerializer</span>

<div class="viewcode-block" id="WaterSourcesViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterSourcesViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the sources data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">wn</span><span class="o">.</span><span class="n">source_name_list</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterSourcesViewSet.retrieve"><a class="viewcode-back" href="../../basp.html#basp.views.WaterSourcesViewSet.retrieve">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read a specific source entry using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">source</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_source</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="n">source</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s1">&#39;node_name&#39;</span><span class="p">:</span><span class="n">source</span><span class="o">.</span><span class="n">node_name</span><span class="p">,</span><span class="s1">&#39;source_type&#39;</span><span class="p">:</span><span class="n">source</span><span class="o">.</span><span class="n">source_type</span><span class="p">,</span>
                    <span class="s1">&#39;base_value&#39;</span><span class="p">:</span><span class="n">source</span><span class="o">.</span><span class="n">strength_timeseries</span><span class="o">.</span><span class="n">base_value</span><span class="p">,</span>
                    <span class="s1">&#39;pattern_name&#39;</span><span class="p">:</span><span class="n">source</span><span class="o">.</span><span class="n">strength_timeseries</span><span class="o">.</span><span class="n">pattern_name</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED</span>
<div class="viewcode-block" id="WaterClearDataView"><a class="viewcode-back" href="../../basp.html#basp.views.WaterClearDataView">[docs]</a><span class="k">class</span> <span class="nc">WaterClearDataView</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Information</span>

<span class="sd">    Use this API endpoint to clear</span>
<span class="sd">    the database from EPANET inp file values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterClearDataSerializer</span>
    <span class="n">test_param</span> <span class="o">=</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="s1">&#39;Clear&#39;</span><span class="p">,</span> <span class="n">openapi</span><span class="o">.</span><span class="n">IN_QUERY</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;use true or false&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">openapi</span><span class="o">.</span><span class="n">TYPE_BOOLEAN</span><span class="p">)</span>
    <span class="n">user_response</span> <span class="o">=</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;Status OK&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="WaterClearDataView.create"><a class="viewcode-back" href="../../basp.html#basp.views.WaterClearDataView.create">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span><span class="n">manual_parameters</span><span class="o">=</span><span class="p">[</span><span class="n">test_param</span><span class="p">],</span> <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data cleared&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span><span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, problem with POST request, data not cleared&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this API endpoint to clear the database from EPANET inp file values. Set Clear field to true for cleaning the database.&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterClearDataSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">file</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;clear&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">:</span>
                <span class="n">dbcommunication</span><span class="o">.</span><span class="n">mod_db_tables</span><span class="p">(</span><span class="n">databaseTables</span><span class="o">.</span><span class="n">waterDBtables</span><span class="p">(</span><span class="s1">&#39;add&#39;</span><span class="p">))</span>
                <span class="n">dbcommunication</span><span class="o">.</span><span class="n">mod_db_tables</span><span class="p">(</span><span class="n">databaseTables</span><span class="o">.</span><span class="n">waterDBtables</span><span class="p">(</span><span class="s1">&#39;delete&#39;</span><span class="p">))</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED</span>
<div class="viewcode-block" id="WaterJSONFileView"><a class="viewcode-back" href="../../basp.html#basp.views.WaterJSONFileView">[docs]</a><span class="k">class</span> <span class="nc">WaterJSONFileView</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to retrieve</span>
<span class="sd">        the EPANET JSON file generated from EPANET binary file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterOutputJSONSerializer</span>
<div class="viewcode-block" id="WaterJSONFileView.create"><a class="viewcode-back" href="../../basp.html#basp.views.WaterJSONFileView.create">[docs]</a>    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterOutputJSONSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">experimentname</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;experimentname&#39;</span><span class="p">)</span>
            <span class="n">existing_ex_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
            <span class="n">allthenames</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">existing_ex_names</span><span class="p">:</span>
                <span class="n">allthenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">ex_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">experimentname</span> <span class="ow">in</span> <span class="n">allthenames</span><span class="p">:</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;basp</span><span class="se">\\</span><span class="s2">uploads</span><span class="se">\\</span><span class="s2">&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">experimentname</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">simulationdata.json&quot;</span>
                <span class="n">fin_filename</span> <span class="o">=</span> <span class="s2">&quot;simulationdata.json&quot;</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">FileResponse</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">))</span>
                <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;attachment; filename=&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">fin_filename</span>
                <span class="k">return</span> <span class="n">response</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#TODO</span>
<div class="viewcode-block" id="WaterLoadView"><a class="viewcode-back" href="../../basp.html#basp.views.WaterLoadView">[docs]</a><span class="k">class</span> <span class="nc">WaterLoadView</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to load</span>
<span class="sd">        the EPANET inp file into the BaSP database</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterLoadSerializer</span>
<div class="viewcode-block" id="WaterLoadView.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterLoadView.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Water Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s1">&#39;Here you can load an EPANET inp file into the BaSP&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="s1">&#39;File fields accepts the words ltown or new&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="WaterLoadView.post"><a class="viewcode-back" href="../../basp.html#basp.views.WaterLoadView.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterLoadSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">file</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">file</span> <span class="o">==</span> <span class="s1">&#39;ltown&#39;</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Create PostgreSQL database tables if they do not exist</span>
                    <span class="n">dbcommunication</span><span class="o">.</span><span class="n">mod_db_tables</span><span class="p">(</span><span class="n">databaseTables</span><span class="o">.</span><span class="n">waterDBtables</span><span class="p">(</span><span class="s1">&#39;add&#39;</span><span class="p">))</span>
                    <span class="c1"># Delete any existing values from that tables</span>
                    <span class="n">dbcommunication</span><span class="o">.</span><span class="n">mod_db_tables</span><span class="p">(</span><span class="n">databaseTables</span><span class="o">.</span><span class="n">waterDBtables</span><span class="p">(</span><span class="s1">&#39;delete&#39;</span><span class="p">))</span>
                    <span class="c1"># Read the EPANET Input (inp) file</span>
                    <span class="c1">#finalresult = watersim.readinputfile(&#39;basp/Water/Virtual_City_WaterNetwork.inp&#39;, databaseTables.epanetINPKeywords())</span>
                    <span class="c1"># Add EPANET Input (inp) file parameters into Python lists</span>
                    <span class="c1">#fullinputs = watersim.addinfotolists(finalresult, databaseTables.epanetINPFields())</span>
                    <span class="c1"># Add EPANET parameters into the PostgreSQL database</span>
                    <span class="c1">#watersim.addDataToDatabase(databaseTables.finalAllINPFields(), fullinputs)</span>
                    <span class="n">shutil</span><span class="o">.</span><span class="n">copy2</span><span class="p">(</span><span class="s1">&#39;basp/Water/Virtual_City_WaterNetwork.inp&#39;</span><span class="p">,</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;ltown inp file loaded&#39;</span><span class="p">})</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;ltown file cannot be loaded&#39;</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Unknown file&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED</span>
<div class="viewcode-block" id="WaterStartView"><a class="viewcode-back" href="../../basp.html#basp.views.WaterStartView">[docs]</a><span class="k">class</span> <span class="nc">WaterStartView</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to run an EPANET simulation.</span>
<span class="sd">        Values in the database will be used to create the EPANET inp file.</span>
<span class="sd">        You can provide details such as start/end date.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterStartSerializer</span>
<div class="viewcode-block" id="WaterStartView.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterStartView.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="n">existing_ex_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
        <span class="n">allthenames</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">existing_ex_names</span><span class="p">:</span>
            <span class="n">allthenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">ex_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Water Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s1">&#39;Here you can start an EPANET simulation&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="s1">&#39;the values in the reserved list are not allowed as experiment names&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;reserved_list&#39;</span><span class="p">:</span> <span class="n">allthenames</span><span class="p">})</span></div>

<div class="viewcode-block" id="WaterStartView.post"><a class="viewcode-back" href="../../basp.html#basp.views.WaterStartView.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterStartSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">startdate</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;startdate&#39;</span><span class="p">)</span>
            <span class="n">enddate</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;enddate&#39;</span><span class="p">)</span>
            <span class="n">existing_ex_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
            <span class="n">allthenames</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">existing_ex_names</span><span class="p">:</span>
                <span class="n">allthenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">ex_name</span><span class="p">)</span>
            <span class="n">experimentname</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;experimentname&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">experimentname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allthenames</span><span class="p">:</span>
                <span class="n">sensors</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sensors&#39;</span><span class="p">)</span>
                <span class="n">sensors</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[\n\t]*&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">sensors</span><span class="p">)</span>
                <span class="n">final_sensors_json_file_contents</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="n">fs</span> <span class="o">=</span> <span class="n">FileSystemStorage</span><span class="p">()</span>
                <span class="n">sensors</span> <span class="o">=</span> <span class="n">ContentFile</span><span class="p">(</span><span class="n">sensors</span><span class="p">)</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">experimentname</span><span class="o">+</span><span class="s1">&#39;/test.json&#39;</span><span class="p">,</span> <span class="n">sensors</span><span class="p">)</span>
                <span class="n">f</span> <span class="o">=</span> <span class="n">default_storage</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">filename</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
                <span class="k">with</span> <span class="n">f</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
                    <span class="n">final_sensors_json_file_contents</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>
                <span class="n">startdate_object</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">startdate</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">enddate_object</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">enddate</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">datediff</span> <span class="o">=</span> <span class="n">enddate_object</span> <span class="o">-</span> <span class="n">startdate_object</span>
                <span class="n">days</span><span class="p">,</span> <span class="n">seconds</span> <span class="o">=</span> <span class="n">datediff</span><span class="o">.</span><span class="n">days</span><span class="p">,</span> <span class="n">datediff</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
                <span class="n">hours</span> <span class="o">=</span> <span class="n">days</span> <span class="o">*</span> <span class="mi">24</span>
                <span class="n">epoch1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">startdate_epoch</span> <span class="o">=</span> <span class="p">(</span><span class="n">startdate_object</span> <span class="o">-</span> <span class="n">epoch1</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1000.0</span>
                <span class="n">enddate_epoch</span> <span class="o">=</span> <span class="p">(</span><span class="n">enddate_object</span> <span class="o">-</span> <span class="n">epoch1</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1000.0</span>
                <span class="n">grafanaurl</span> <span class="o">=</span> <span class="s2">&quot;http://localhost:3001/d/GIfxrnEGz/water-sensors-basp?orgId=1&amp;from=&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">startdate_epoch</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&amp;to=&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">enddate_epoch</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">hours</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;startdate&#39;</span><span class="p">:</span> <span class="n">startdate</span><span class="p">,</span> <span class="s1">&#39;enddate&#39;</span><span class="p">:</span> <span class="n">enddate</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;startdate&gt;enddate&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">ex_name</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;experimentname&#39;</span><span class="p">)</span>
                        <span class="c1">#Get Report Timestep</span>
                        <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
                        <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                        <span class="n">opts</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span>
                        <span class="n">timestepinseconds</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">report_timestep</span>
                        <span class="c1">#Put New Duration</span>
                        <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span>
                        <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="s1">&#39;basp/Water/Water.inp&#39;</span><span class="p">)</span>
                        <span class="c1"># Run EPANET &amp; Convert Bin to JSON wntr</span>
                        <span class="n">watersim</span><span class="o">.</span><span class="n">epanetandbin2jsonwntr</span><span class="p">(</span><span class="s1">&#39;basp/Water/Water.inp&#39;</span><span class="p">,</span><span class="s1">&#39;basp/Water/jsonoutput.json&#39;</span><span class="p">)</span>
                        <span class="n">time1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
                        <span class="c1"># Write EPANET JSON to PostgreSQL</span>
                        <span class="n">watersim</span><span class="o">.</span><span class="n">readjsonwithfiles</span><span class="p">(</span><span class="s1">&#39;basp/Water/jsonoutput.json&#39;</span><span class="p">,</span> <span class="n">startdate_object</span><span class="p">,</span> <span class="n">timestepinseconds</span><span class="p">,</span> <span class="n">final_sensors_json_file_contents</span><span class="p">,</span> <span class="n">ex_name</span><span class="p">)</span>
                        <span class="c1"># Save Experiment Name in the database</span>
                        <span class="n">newname</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="p">(</span><span class="n">ex_name</span><span class="o">=</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;experimentname&#39;</span><span class="p">),</span> <span class="n">ex_sensor_filename</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
                        <span class="n">newname</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
                        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;startdate&#39;</span><span class="p">:</span> <span class="n">startdate</span><span class="p">,</span> <span class="s1">&#39;enddate&#39;</span><span class="p">:</span> <span class="n">enddate</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;simulation completed&#39;</span><span class="p">,</span> <span class="s1">&#39;interface&#39;</span><span class="p">:</span> <span class="n">grafanaurl</span><span class="p">})</span><span class="c1">#,&#39;time1&#39;:time1,&#39;timesecondsall&#39;:time.time() - start_time})</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;startdate&#39;</span><span class="p">:</span> <span class="n">startdate</span><span class="p">,</span> <span class="s1">&#39;enddate&#39;</span><span class="p">:</span> <span class="n">enddate</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;simulation not completed&#39;</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;experimentname is reserved&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED</span>
<span class="k">class</span> <span class="nc">WaterStartWntrView</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to run an EPANET simulation.</span>
<span class="sd">        Values in the database will be used to create the EPANET inp file.</span>
<span class="sd">        You can provide details such as start/end date.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterStartSerializerWNTR</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="n">existing_ex_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
        <span class="n">allthenames</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">existing_ex_names</span><span class="p">:</span>
            <span class="n">allthenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">ex_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Water Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s1">&#39;Here you can start a WNTR simulation&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="s1">&#39;the values in the reserved list are not allowed as experiment names&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;reserved_list&#39;</span><span class="p">:</span> <span class="n">allthenames</span><span class="p">})</span>

    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="c1">#start_time = time.time()</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterStartSerializerWNTR</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">startdate</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;startdate&#39;</span><span class="p">)</span>
            <span class="n">enddate</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;enddate&#39;</span><span class="p">)</span>
            <span class="n">existing_ex_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
            <span class="n">allthenames</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">existing_ex_names</span><span class="p">:</span>
                <span class="n">allthenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">ex_name</span><span class="p">)</span>
            <span class="n">experimentname</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;experimentname&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">experimentname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allthenames</span><span class="p">:</span>
                <span class="n">sensors</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sensors&#39;</span><span class="p">)</span>
                <span class="n">sensors</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[\n\t]*&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">sensors</span><span class="p">)</span>
                <span class="n">fileleak</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;leakages&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">fileleak</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fileleak</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="c1">#inp_file = &#39;basp/Water/Water.inp&#39;</span>
                            <span class="c1">#wn = wntr.network.WaterNetworkModel(inp_file)</span>
                            <span class="n">wn</span> <span class="o">=</span> <span class="n">addleakages</span><span class="o">.</span><span class="n">addwaterleak</span><span class="p">(</span><span class="n">fileleak</span><span class="p">,</span> <span class="n">wn</span><span class="p">)</span>
                            <span class="c1">#wn.write_inpfile(&#39;basp/Water/Water.inp&#39;)</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;leakages file issue&#39;</span><span class="p">})</span>
                <span class="n">final_sensors_json_file_contents</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="n">fs</span> <span class="o">=</span> <span class="n">FileSystemStorage</span><span class="p">()</span>
                <span class="n">sensors</span> <span class="o">=</span> <span class="n">ContentFile</span><span class="p">(</span><span class="n">sensors</span><span class="p">)</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">experimentname</span><span class="o">+</span><span class="s1">&#39;/test.json&#39;</span><span class="p">,</span> <span class="n">sensors</span><span class="p">)</span>
                <span class="n">f</span> <span class="o">=</span> <span class="n">default_storage</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">filename</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
                <span class="k">with</span> <span class="n">f</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
                    <span class="n">final_sensors_json_file_contents</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>
                <span class="n">startdate_object</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">startdate</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">enddate_object</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">enddate</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">datediff</span> <span class="o">=</span> <span class="n">enddate_object</span> <span class="o">-</span> <span class="n">startdate_object</span>
                <span class="n">days</span><span class="p">,</span> <span class="n">seconds</span> <span class="o">=</span> <span class="n">datediff</span><span class="o">.</span><span class="n">days</span><span class="p">,</span> <span class="n">datediff</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
                <span class="n">hours</span> <span class="o">=</span> <span class="n">days</span> <span class="o">*</span> <span class="mi">24</span>
                <span class="n">epoch1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">startdate_epoch</span> <span class="o">=</span> <span class="p">(</span><span class="n">startdate_object</span> <span class="o">-</span> <span class="n">epoch1</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1000.0</span>
                <span class="n">enddate_epoch</span> <span class="o">=</span> <span class="p">(</span><span class="n">enddate_object</span> <span class="o">-</span> <span class="n">epoch1</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1000.0</span>
                <span class="n">grafanaurl</span> <span class="o">=</span> <span class="s2">&quot;http://localhost:3001/d/GIfxrnEGz/water-sensors-basp?orgId=1&amp;from=&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">startdate_epoch</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&amp;to=&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">enddate_epoch</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">hours</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;startdate&#39;</span><span class="p">:</span> <span class="n">startdate</span><span class="p">,</span> <span class="s1">&#39;enddate&#39;</span><span class="p">:</span> <span class="n">enddate</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;startdate&gt;enddate&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">ex_name</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;experimentname&#39;</span><span class="p">)</span>
                        <span class="c1">#Get Report Timestep</span>

                        <span class="n">opts</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span>
                        <span class="n">timestepinseconds</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">report_timestep</span>
                        <span class="c1">#print(timestepinseconds)</span>
                        <span class="c1">#Put New Duration</span>
                        <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span>
                        <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="s1">&#39;basp/Water/Water.inp&#39;</span><span class="p">)</span>
                        <span class="c1"># Run EPANET &amp; Convert Bin to JSON wntr</span>
                        <span class="n">watersim</span><span class="o">.</span><span class="n">wntr2jsonwntr</span><span class="p">(</span><span class="n">wn</span><span class="p">,</span><span class="s1">&#39;basp/Water/jsonoutput.json&#39;</span><span class="p">)</span>
                        <span class="c1">#time1 = time.time() - start_time</span>
                        <span class="c1"># Write EPANET JSON to PostgreSQL</span>
                        <span class="n">watersim</span><span class="o">.</span><span class="n">readjsonwithfiles</span><span class="p">(</span><span class="s1">&#39;basp/Water/jsonoutput.json&#39;</span><span class="p">,</span> <span class="n">startdate_object</span><span class="p">,</span> <span class="n">timestepinseconds</span><span class="p">,</span> <span class="n">final_sensors_json_file_contents</span><span class="p">,</span> <span class="n">ex_name</span><span class="p">)</span>
                        <span class="c1"># Save Experiment Name in the database</span>
                        <span class="n">newname</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="p">(</span><span class="n">ex_name</span><span class="o">=</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;experimentname&#39;</span><span class="p">),</span> <span class="n">ex_sensor_filename</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
                        <span class="n">newname</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
                        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;startdate&#39;</span><span class="p">:</span> <span class="n">startdate</span><span class="p">,</span> <span class="s1">&#39;enddate&#39;</span><span class="p">:</span> <span class="n">enddate</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;simulation completed&#39;</span><span class="p">,</span> <span class="s1">&#39;water interface&#39;</span><span class="p">:</span> <span class="n">grafanaurl</span><span class="p">})</span><span class="c1"># &#39;transportation interface&#39;:&#39;http://localhost:3001/d/4YdONpXGk/transportation?orgId=1&amp;from=1617570000000&amp;to=1617656399000&#39;})</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;startdate&#39;</span><span class="p">:</span> <span class="n">startdate</span><span class="p">,</span> <span class="s1">&#39;enddate&#39;</span><span class="p">:</span> <span class="n">enddate</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;simulation not completed&#39;</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;experimentname is reserved&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>


<span class="c1">#TODO</span>
<div class="viewcode-block" id="WaterStepExecution"><a class="viewcode-back" href="../../basp.html#basp.views.WaterStepExecution">[docs]</a><span class="k">class</span> <span class="nc">WaterStepExecution</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">            Use this API endpoint to run an EPANET simulation in Step Execution Mode.</span>
<span class="sd">            Values in the database will be used to create the EPANET inp file.</span>
<span class="sd">            You can provide details such as start/end date.</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterStepExecutionSerializer</span>
<div class="viewcode-block" id="WaterStepExecution.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterStepExecution.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Water Simulations&#39;</span><span class="p">,</span>
                                                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s1">&#39;Here you can start an EPANET simulation. Please provide the following details&#39;</span><span class="p">,</span>
                                                         <span class="s1">&#39;Startdate&#39;</span><span class="p">:</span><span class="s1">&#39;Initial date the simulation starts/started&#39;</span><span class="p">,</span>
                                                         <span class="s1">&#39;Timestep&#39;</span><span class="p">:</span><span class="s1">&#39;(Integer) The timestep to be executed first&#39;</span><span class="p">,</span>
                                                         <span class="s1">&#39;Iterations&#39;</span><span class="p">:</span><span class="s1">&#39;(Integer) The number of timesteps to be executed&#39;</span><span class="p">,</span>
                                                         <span class="s1">&#39;Timestep size&#39;</span><span class="p">:</span><span class="s1">&#39;(Integer) The size of each timestep in seconds&#39;</span><span class="p">,</span>
                                                         <span class="s1">&#39;Experiment name&#39;</span><span class="p">:</span><span class="s1">&#39;(String) The name of the experiment&#39;</span><span class="p">,</span>
                                                         <span class="s1">&#39;Sensors&#39;</span><span class="p">:</span><span class="s1">&#39;The sensors json file&#39;</span>
                                                         <span class="p">})</span></div>

<div class="viewcode-block" id="WaterStepExecution.post"><a class="viewcode-back" href="../../basp.html#basp.views.WaterStepExecution.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterStepExecutionSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">startdate</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;startdate&#39;</span><span class="p">)</span>
            <span class="n">timestep</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;timestep&#39;</span><span class="p">))</span>
            <span class="n">iterations</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;iterations&#39;</span><span class="p">))</span>
            <span class="n">timestep_size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;timestep_size&#39;</span><span class="p">))</span>
            <span class="n">experiment_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;experiment_name&#39;</span><span class="p">))</span>
            <span class="n">sensors</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sensors&#39;</span><span class="p">)</span>
            <span class="n">sensors</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[\n\t]*&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">sensors</span><span class="p">)</span>
            <span class="n">fs</span> <span class="o">=</span> <span class="n">FileSystemStorage</span><span class="p">()</span>
            <span class="n">sensors</span> <span class="o">=</span> <span class="n">ContentFile</span><span class="p">(</span><span class="n">sensors</span><span class="p">)</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">experiment_name</span> <span class="o">+</span> <span class="s1">&#39;/sensors.json&#39;</span><span class="p">,</span> <span class="n">sensors</span><span class="p">)</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">default_storage</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">filename</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
            <span class="n">final_sensors_json_file_contents</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">with</span> <span class="n">f</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
                <span class="n">final_sensors_json_file_contents</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>
            <span class="n">startdate_object</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">startdate</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">difffromthebeginning</span> <span class="o">=</span> <span class="n">timestep</span><span class="o">*</span><span class="n">timestep_size</span>
            <span class="n">startdate_object</span> <span class="o">=</span> <span class="n">startdate_object</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">difffromthebeginning</span><span class="p">)</span>
            <span class="n">epoch1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">startdate_epoch</span> <span class="o">=</span> <span class="p">((</span><span class="n">startdate_object</span> <span class="o">-</span> <span class="n">epoch1</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1000.0</span><span class="p">)</span>
            <span class="n">enddate_epoch</span> <span class="o">=</span> <span class="p">(</span><span class="n">startdate_epoch</span> <span class="o">+</span> <span class="p">(</span><span class="n">timestep_size</span><span class="o">*</span><span class="n">iterations</span><span class="o">*</span><span class="mi">1000</span><span class="p">))</span>
            <span class="n">grafanaurl</span> <span class="o">=</span> <span class="s2">&quot;http://localhost:3001/d/GIfxrnEGz/water-sensors-basp?orgId=1&amp;from=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">startdate_epoch</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot;&amp;to=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">enddate_epoch</span><span class="p">))</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="s2">&quot;&amp;refresh=5s&quot;</span><span class="p">)</span>
            <span class="n">start_clocktime</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">timestep</span><span class="o">*</span><span class="n">timestep_size</span><span class="p">)</span><span class="o">%</span><span class="mi">86400</span>
            <span class="k">if</span> <span class="n">iterations</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;iterations must be greater than 0&#39;</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">ex_name</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;experiment_name&#39;</span><span class="p">)</span>
                    <span class="c1"># Get Report Timestep</span>
                    <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
                    <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                    <span class="n">opts</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span>
                    <span class="n">timestepinseconds</span> <span class="o">=</span> <span class="n">timestep_size</span>
                    <span class="c1"># Put New Duration</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">iterations</span><span class="o">*</span><span class="n">timestep_size</span><span class="p">)</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">start_clocktime</span> <span class="o">=</span> <span class="n">start_clocktime</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">report_timestep</span> <span class="o">=</span> <span class="n">timestep_size</span>
                    <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="s1">&#39;basp/Water/Water.inp&#39;</span><span class="p">)</span>
                    <span class="c1"># Run EPANET &amp; Convert Bin to JSON wntr</span>
                    <span class="n">watersim</span><span class="o">.</span><span class="n">epanetandbin2jsonwntr</span><span class="p">(</span><span class="s1">&#39;basp/Water/Water.inp&#39;</span><span class="p">,</span> <span class="s1">&#39;basp/Water/jsonoutput.json&#39;</span><span class="p">)</span>
                    <span class="n">time1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
                    <span class="c1"># Write EPANET JSON to PostgreSQL</span>
                    <span class="c1">#TODO Modify for step execution</span>
                    <span class="c1">#print(&#39;basp/Water/jsonoutput.json&#39;, startdate_object, timestepinseconds,final_sensors_json_file_contents, ex_name)</span>
                    <span class="n">watersim</span><span class="o">.</span><span class="n">readjsonwithfilesstep</span><span class="p">(</span><span class="s1">&#39;basp/Water/jsonoutput.json&#39;</span><span class="p">,</span> <span class="n">startdate_object</span><span class="p">,</span> <span class="n">timestepinseconds</span><span class="p">,</span><span class="n">final_sensors_json_file_contents</span><span class="p">,</span> <span class="n">ex_name</span><span class="p">)</span>
                    <span class="c1"># Save Experiment Name in the database</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ex_name</span><span class="o">=</span><span class="n">ex_name</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                        <span class="n">newname</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="p">(</span><span class="n">ex_name</span><span class="o">=</span><span class="n">ex_name</span><span class="p">,</span><span class="n">ex_sensor_filename</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
                        <span class="n">newname</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;startdate&#39;</span><span class="p">:</span> <span class="n">startdate</span><span class="p">,</span> <span class="s1">&#39;timestep&#39;</span><span class="p">:</span> <span class="n">timestep</span><span class="p">,</span><span class="s1">&#39;iterations&#39;</span><span class="p">:</span><span class="n">iterations</span><span class="p">,</span>
                                                                     <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;simulation completed&#39;</span><span class="p">,</span>
                                                                     <span class="s1">&#39;interface&#39;</span><span class="p">:</span> <span class="n">grafanaurl</span><span class="p">,</span> <span class="s1">&#39;time1&#39;</span><span class="p">:</span> <span class="n">time1</span><span class="p">,</span>
                                                                     <span class="s1">&#39;timesecondsall&#39;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">})</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;simulation not completed&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED, REMOVED update, create, destroy</span>
<div class="viewcode-block" id="WaterTanksViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterTanksViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterTanksViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to read, create and update Tanks.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterTanksSerializer</span>

<div class="viewcode-block" id="WaterTanksViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterTanksViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the tanks data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">wn</span><span class="o">.</span><span class="n">tank_name_list</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterTanksViewSet.retrieve"><a class="viewcode-back" href="../../basp.html#basp.views.WaterTanksViewSet.retrieve">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read a specific tank entry using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">tank</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ID&#39;</span><span class="p">:</span><span class="n">tank</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s1">&#39;Elev&#39;</span><span class="p">:</span><span class="n">tank</span><span class="o">.</span><span class="n">elevation</span><span class="p">,</span><span class="s1">&#39;InitLvl&#39;</span><span class="p">:</span><span class="n">tank</span><span class="o">.</span><span class="n">init_level</span><span class="p">,</span><span class="s1">&#39;MinLvl&#39;</span><span class="p">:</span><span class="n">tank</span><span class="o">.</span><span class="n">min_level</span><span class="p">,</span>
                    <span class="s1">&#39;MaxLvl&#39;</span><span class="p">:</span><span class="n">tank</span><span class="o">.</span><span class="n">max_level</span><span class="p">,</span><span class="s1">&#39;Diam&#39;</span><span class="p">:</span><span class="n">tank</span><span class="o">.</span><span class="n">diameter</span><span class="p">,</span><span class="s1">&#39;MinVol&#39;</span><span class="p">:</span><span class="n">tank</span><span class="o">.</span><span class="n">min_vol</span><span class="p">,</span><span class="s1">&#39;VolCurve&#39;</span><span class="p">:</span><span class="n">tank</span><span class="o">.</span><span class="n">vol_curve</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED, REMOVED update, create, destroy</span>
<div class="viewcode-block" id="WaterValvesViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterValvesViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterValvesViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to read, create and update Valves.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterValvesSerializer</span>

<div class="viewcode-block" id="WaterValvesViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterValvesViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the valve data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">wn</span><span class="o">.</span><span class="n">valve_name_list</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterValvesViewSet.retrieve"><a class="viewcode-back" href="../../basp.html#basp.views.WaterValvesViewSet.retrieve">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read a specific valve entry using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">valve</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_link</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">pk</span><span class="p">,</span><span class="s1">&#39;node1&#39;</span><span class="p">:</span> <span class="n">valve</span><span class="o">.</span><span class="n">start_node_name</span><span class="p">,</span><span class="s1">&#39;node2&#39;</span><span class="p">:</span> <span class="n">valve</span><span class="o">.</span><span class="n">end_node_name</span><span class="p">,</span>
                    <span class="s1">&#39;diam&#39;</span><span class="p">:</span> <span class="n">valve</span><span class="o">.</span><span class="n">diameter</span><span class="p">,</span><span class="s1">&#39;vtype&#39;</span><span class="p">:</span> <span class="n">valve</span><span class="o">.</span><span class="n">valve_type</span><span class="p">,</span><span class="s1">&#39;set&#39;</span><span class="p">:</span> <span class="n">valve</span><span class="o">.</span><span class="n">_setting</span><span class="p">,</span><span class="s1">&#39;mloss&#39;</span><span class="p">:</span> <span class="n">valve</span><span class="o">.</span><span class="n">minor_loss</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED, REMOVED create, update, destroy</span>
<div class="viewcode-block" id="WaterTimesViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterTimesViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterTimesViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to read, create and update Times.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterTimesSerializer</span>

<div class="viewcode-block" id="WaterTimesViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterTimesViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read all the times data from the database&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">opts</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span>
            <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;duration&#39;</span><span class="p">:</span><span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span><span class="s1">&#39;hydraulic_timestep&#39;</span><span class="p">:</span><span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">hydraulic_timestep</span><span class="p">,</span>
                  <span class="s1">&#39;quality_timestep&#39;</span><span class="p">:</span><span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">quality_timestep</span><span class="p">,</span><span class="s1">&#39;rule_timestep&#39;</span><span class="p">:</span><span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">rule_timestep</span><span class="p">,</span>
                  <span class="s1">&#39;pattern_timestep&#39;</span><span class="p">:</span><span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">pattern_timestep</span><span class="p">,</span><span class="s1">&#39;pattern_start&#39;</span><span class="p">:</span><span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">pattern_start</span><span class="p">,</span>
                  <span class="s1">&#39;report_timestep&#39;</span><span class="p">:</span><span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">report_timestep</span><span class="p">,</span><span class="s1">&#39;report_start&#39;</span><span class="p">:</span><span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">report_start</span><span class="p">,</span>
                  <span class="s1">&#39;start_clocktime&#39;</span><span class="p">:</span><span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">start_clocktime</span><span class="p">,</span><span class="s1">&#39;statistic&#39;</span><span class="p">:</span><span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">statistic</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div>

<div class="viewcode-block" id="WaterTimesViewSet.retrieve"><a class="viewcode-back" href="../../basp.html#basp.views.WaterTimesViewSet.retrieve">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use this endpoint to read a specific time entry using its id&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">opts</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span>
            <span class="k">if</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;duration&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">duration</span><span class="p">}</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;hydraulic_timestep&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;hydraulic_timestep&#39;</span><span class="p">:</span> <span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">hydraulic_timestep</span><span class="p">}</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;quality_timestep&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;quality_timestep&#39;</span><span class="p">:</span> <span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">quality_timestep</span><span class="p">}</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;rule_timestep&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;rule_timestep&#39;</span><span class="p">:</span> <span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">rule_timestep</span><span class="p">}</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;pattern_timestep&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pattern_timestep&#39;</span><span class="p">:</span> <span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">pattern_timestep</span><span class="p">}</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;pattern_start&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pattern_start&#39;</span><span class="p">:</span> <span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">pattern_start</span><span class="p">}</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;report_timestep&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;report_timestep&#39;</span><span class="p">:</span> <span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">report_timestep</span><span class="p">}</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;report_start&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;report_start&#39;</span><span class="p">:</span> <span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">report_start</span><span class="p">}</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;start_clocktime&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;start_clocktime&#39;</span><span class="p">:</span> <span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">start_clocktime</span><span class="p">}</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">pk</span> <span class="o">==</span> <span class="s1">&#39;statistic&#39;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;statistic&#39;</span><span class="p">:</span> <span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">statistic</span><span class="p">}</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="WaterOutputLinksViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterOutputLinksViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterOutputLinksViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to read EPANET simulation output for links.</span>
<span class="sd">        Using the &#39;links&#39; field, a list of links can be specified for relevant results. If &#39;links&#39; field is left empty then results for all the links will be returned.</span>
<span class="sd">        Using the &#39;fields&#39; field, a list of fields can be specified for relevant results. If &#39;fields&#39; field is left empty then all the fields will be returned.</span>
<span class="sd">        Using the &#39;resolution&#39; field, the instrument (sensor) resolution can be specified. If &#39;resolution&#39; field is left empty then simulation results will be returned.</span>
<span class="sd">        Using the &#39;drop&#39; field, the drop rate in percentage can be specified. If &#39;drop&#39; field is left empty then all the results will be returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterOutputLinksSerializer</span>

<div class="viewcode-block" id="WaterOutputLinksViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterOutputLinksViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of the details of output links&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Water Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s1">&#39;Here you can retrieve EPANET simulation Links Output&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;links&#39;</span><span class="p">:</span> <span class="s1">&#39;provide a list of links, or leave empty to receive all of them&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;links example&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;p1&#39;</span><span class="p">,</span> <span class="s1">&#39;p2&#39;</span><span class="p">,</span> <span class="s1">&#39;p3&#39;</span><span class="p">],</span>
                         <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="s1">&#39;provide a list of fields, or leave empty to receive all of them&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;fields allowed&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;linkfriction&#39;</span><span class="p">,</span> <span class="s1">&#39;linkheadloss&#39;</span><span class="p">,</span> <span class="s1">&#39;linkquality&#39;</span><span class="p">,</span> <span class="s1">&#39;linkreactiontime&#39;</span><span class="p">,</span> <span class="s1">&#39;linksetting&#39;</span><span class="p">,</span> <span class="s1">&#39;linkstatus&#39;</span><span class="p">,</span> <span class="s1">&#39;linkvelocity&#39;</span><span class="p">],</span>
                         <span class="s1">&#39;resolution&#39;</span><span class="p">:</span> <span class="s1">&#39;provide a float between 0.0 and 1.0 to specify sensor resolution or leave empty to get original value&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;drop&#39;</span><span class="p">:</span> <span class="s1">&#39;provide a value between 0 and 100 to specify the random drop rate&#39;</span><span class="p">})</span></div>

<div class="viewcode-block" id="WaterOutputLinksViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.WaterOutputLinksViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterOutputLinksSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">links</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;links&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">links</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">final_query</span> <span class="o">=</span> <span class="s2">&quot;SELECT DISTINCT linkid FROM water_output_links_values&quot;</span>
                <span class="n">alllinkidsdup</span> <span class="o">=</span> <span class="n">dbcommunication</span><span class="o">.</span><span class="n">read_db_values</span><span class="p">(</span><span class="n">final_query</span><span class="p">)</span>
                <span class="n">alllinkidslist</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">val4</span> <span class="ow">in</span> <span class="n">alllinkidsdup</span><span class="p">:</span>
                    <span class="n">alllinkidslist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val4</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">if</span> <span class="s2">&quot;[&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">links</span> <span class="ow">or</span> <span class="s2">&quot;]&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">links</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;links must be a list&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">newlinks</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">links</span><span class="p">)</span>
                    <span class="n">newlinks</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">newlinks</span><span class="p">]</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="nb">all</span><span class="p">(</span><span class="n">elem</span> <span class="ow">in</span> <span class="n">alllinkidslist</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">newlinks</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;invalid links&#39;</span><span class="p">,</span> <span class="s1">&#39;allowed_links&#39;</span><span class="p">:</span> <span class="n">alllinkidslist</span><span class="p">})</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fields&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;[&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fields</span> <span class="ow">or</span> <span class="s2">&quot;]&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;fields must be a list&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">newfields</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
                    <span class="n">newfields</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">newfields</span><span class="p">]</span>
                    <span class="n">allowedfields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;linkfriction&#39;</span><span class="p">,</span> <span class="s1">&#39;linkheadloss&#39;</span><span class="p">,</span> <span class="s1">&#39;linkquality&#39;</span><span class="p">,</span> <span class="s1">&#39;linkreactiontime&#39;</span><span class="p">,</span> <span class="s1">&#39;linksetting&#39;</span><span class="p">,</span> <span class="s1">&#39;linkstatus&#39;</span><span class="p">,</span> <span class="s1">&#39;linkvelocity&#39;</span><span class="p">]</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="nb">all</span><span class="p">(</span><span class="n">elem</span> <span class="ow">in</span> <span class="n">allowedfields</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">newfields</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;invalid fields&#39;</span><span class="p">,</span> <span class="s1">&#39;allowed_fields&#39;</span><span class="p">:</span> <span class="n">allowedfields</span><span class="p">})</span>
            <span class="n">resolution</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;resolution&#39;</span><span class="p">)</span>
            <span class="n">drop</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;drop&#39;</span><span class="p">)</span>
            <span class="n">final_values</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="n">links</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">final_query</span> <span class="o">=</span> <span class="s2">&quot;SELECT * FROM water_output_links_values&quot;</span>
                    <span class="n">final_values</span> <span class="o">=</span> <span class="n">dbcommunication</span><span class="o">.</span><span class="n">read_db_values</span><span class="p">(</span><span class="n">final_query</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">specificfields</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">newfields</span><span class="p">)</span>
                    <span class="n">final_query</span> <span class="o">=</span> <span class="s2">&quot;SELECT linkid, readingtime, &quot;</span><span class="o">+</span><span class="n">specificfields</span><span class="o">+</span><span class="s2">&quot; FROM water_output_links_values&quot;</span>
                    <span class="n">final_values</span> <span class="o">=</span> <span class="n">dbcommunication</span><span class="o">.</span><span class="n">read_db_values</span><span class="p">(</span><span class="n">final_query</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">links</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">newlinks</span><span class="p">:</span>
                        <span class="n">final_query</span> <span class="o">=</span> <span class="s2">&quot;SELECT * FROM water_output_links_values WHERE linkid=&#39;&quot;</span> <span class="o">+</span> <span class="n">value</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span>
                        <span class="n">linksinner</span> <span class="o">=</span> <span class="n">dbcommunication</span><span class="o">.</span><span class="n">read_db_values</span><span class="p">(</span><span class="n">final_query</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">linksinner</span><span class="p">:</span>
                            <span class="n">final_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">newlinks</span><span class="p">:</span>
                        <span class="n">specificfields</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">newfields</span><span class="p">)</span>
                        <span class="n">final_query</span> <span class="o">=</span> <span class="s2">&quot;SELECT id, linkid, readingtime, &quot;</span> <span class="o">+</span> <span class="n">specificfields</span> <span class="o">+</span> <span class="s2">&quot; FROM water_output_links_values WHERE linkid=&#39;&quot;</span> <span class="o">+</span> <span class="n">value</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span>
                        <span class="n">linksinner</span> <span class="o">=</span> <span class="n">dbcommunication</span><span class="o">.</span><span class="n">read_db_values</span><span class="p">(</span><span class="n">final_query</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">linksinner</span><span class="p">:</span>
                            <span class="n">final_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="n">nodesinresults</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">final_values</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nodesinresults</span><span class="p">:</span>
                    <span class="n">nodesinresults</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">resultstoreturn</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">drop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">population</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">probabilityof1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">drop</span><span class="p">)</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span>
                <span class="n">weights</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">drop</span><span class="p">)</span><span class="o">/</span><span class="mi">100</span><span class="p">,</span> <span class="n">probabilityof1</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodesinresults</span><span class="p">:</span>
                <span class="n">nodevalues</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">final_values</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">node</span> <span class="o">==</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="n">v</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S&quot;</span><span class="p">)</span>
                        <span class="n">restvalstub</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
                        <span class="n">restvallist</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="k">for</span> <span class="n">v1</span> <span class="ow">in</span> <span class="n">restvalstub</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">resolution</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="k">try</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">resolution</span><span class="p">))</span><span class="o">.</span><span class="n">is_integer</span><span class="p">():</span>
                                        <span class="n">resultwithrest</span> <span class="o">=</span> <span class="n">v1</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">resultwithrest</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">fmod</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">v1</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">resolution</span><span class="p">))</span>
                                        <span class="n">t001</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">resolution</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
                                        <span class="n">flformat</span> <span class="o">=</span> <span class="s2">&quot;{:.&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">t001</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span><span class="o">+</span><span class="s2">&quot;f}&quot;</span>
                                        <span class="n">resultwithrest</span> <span class="o">=</span> <span class="n">flformat</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">resultwithrest</span><span class="p">)</span>
                                    <span class="k">if</span> <span class="n">drop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                        <span class="n">resultwithrest</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">choices</span><span class="p">(</span><span class="n">population</span><span class="p">,</span> <span class="n">weights</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">resultwithrest</span><span class="p">)</span>
                                        <span class="n">restvallist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">resultwithrest</span><span class="p">))</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">restvallist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">resultwithrest</span><span class="p">))</span>
                                <span class="k">except</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">drop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                        <span class="k">if</span> <span class="n">choices</span><span class="p">(</span><span class="n">population</span><span class="p">,</span> <span class="n">weights</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                            <span class="n">restvallist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                                        <span class="k">else</span><span class="p">:</span>
                                            <span class="n">restvallist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">restvallist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">drop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="k">try</span><span class="p">:</span>
                                        <span class="n">resultwithrest</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">choices</span><span class="p">(</span><span class="n">population</span><span class="p">,</span> <span class="n">weights</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
                                        <span class="n">restvallist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">resultwithrest</span><span class="p">)</span>
                                    <span class="k">except</span><span class="p">:</span>
                                        <span class="k">if</span> <span class="n">choices</span><span class="p">(</span><span class="n">population</span><span class="p">,</span> <span class="n">weights</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                            <span class="n">restvallist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                                        <span class="k">else</span><span class="p">:</span>
                                            <span class="n">restvallist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">restvallist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
                        <span class="n">nodevalues</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">restvallist</span>
                <span class="n">resultstoreturn</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="n">nodevalues</span>
            <span class="n">allowedfields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;linkfriction&#39;</span><span class="p">,</span> <span class="s1">&#39;linkheadloss&#39;</span><span class="p">,</span> <span class="s1">&#39;linkquality&#39;</span><span class="p">,</span> <span class="s1">&#39;linkreactiontime&#39;</span><span class="p">,</span> <span class="s1">&#39;linksetting&#39;</span><span class="p">,</span><span class="s1">&#39;linkstatus&#39;</span><span class="p">,</span> <span class="s1">&#39;linkvelocity&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">outputformat</span> <span class="o">=</span> <span class="s2">&quot;{&#39;link&#39;: {&#39;measure_time&#39;: [&quot;</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowedfields</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;],...},...}&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">outputformat</span> <span class="o">=</span> <span class="s2">&quot;{&#39;link&#39;: {&#39;measure_time&#39;: [&quot;</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">newfields</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;],...},...}&quot;</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span>
                <span class="p">{</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;outputformat&#39;</span><span class="p">:</span> <span class="n">outputformat</span><span class="p">,</span> <span class="s1">&#39;values&#39;</span><span class="p">:</span> <span class="n">resultstoreturn</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="WaterOutputSensorsValuesViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterOutputSensorsValuesViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterOutputSensorsValuesViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to read EPANET simulation output for sensors.</span>
<span class="sd">        Use the &#39;experimentname&#39; field, to provide the name of the experiment in order to get the correct experiment readings.</span>
<span class="sd">        Use the &#39;sensorid&#39; field, to provide a list of sensor ids in order to get the relevant sensors values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterOutputSensorsValuesSerializer</span>

<div class="viewcode-block" id="WaterOutputSensorsValuesViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterOutputSensorsValuesViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Water Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s1">&#39;Here you can retrieve EPANET simulation sensor readings&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;experimentname&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the experiment name&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;sensorid&#39;</span><span class="p">:</span> <span class="s1">&#39;provide a list of sensor ids, or leave empty to receive all of them&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;sensorid_example&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;sensor_1&#39;</span><span class="p">,</span> <span class="s1">&#39;sensor_2&#39;</span><span class="p">]})</span></div>

<div class="viewcode-block" id="WaterOutputSensorsValuesViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.WaterOutputSensorsValuesViewSet.post">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterOutputSensorsValuesSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">experimentname</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;experimentname&#39;</span><span class="p">)</span>
            <span class="n">sensorid</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sensorid&#39;</span><span class="p">)</span>
            <span class="n">existing_ex_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
            <span class="n">allthenames</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">existing_ex_names</span><span class="p">:</span>
                <span class="n">allthenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">ex_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">experimentname</span> <span class="ow">in</span> <span class="n">allthenames</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">sensorid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">final_query</span> <span class="o">=</span> <span class="s2">&quot;SHOW TAG VALUES ON virtual_city FROM water_output_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">experimentname</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;_scada_sensors WITH KEY=sensorid&quot;</span>
                    <span class="n">allsensorsids</span> <span class="o">=</span> <span class="n">dbcommunication</span><span class="o">.</span><span class="n">read_influxdb_values</span><span class="p">(</span><span class="n">final_query</span><span class="p">)</span>
                    <span class="n">allsensoridslist</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">val4</span> <span class="ow">in</span> <span class="n">allsensorsids</span><span class="p">:</span>
                        <span class="n">allsensoridslist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val4</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="k">if</span> <span class="s2">&quot;[&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sensorid</span> <span class="ow">or</span> <span class="s2">&quot;]&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sensorid</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;sensorid must be a list&#39;</span><span class="p">})</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">newlinks</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">sensorid</span><span class="p">)</span>
                            <span class="n">newlinks</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">newlinks</span><span class="p">]</span>
                            <span class="n">result</span> <span class="o">=</span> <span class="nb">all</span><span class="p">(</span><span class="n">elem</span> <span class="ow">in</span> <span class="n">allsensoridslist</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">newlinks</span><span class="p">)</span>
                            <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="p">:</span>
                                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;invalid sensor ids&#39;</span><span class="p">,</span> <span class="s1">&#39;allowed_sensors&#39;</span><span class="p">:</span> <span class="n">allsensoridslist</span><span class="p">})</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">finalresult</span> <span class="o">=</span> <span class="p">[]</span>
                                <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">newlinks</span><span class="p">:</span>
                                    <span class="n">final_query</span> <span class="o">=</span> <span class="s2">&quot;SELECT time, sensor_value FROM water_output_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">experimentname</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;_scada_sensors WHERE sensorid=&#39;&quot;</span><span class="o">+</span><span class="n">value</span><span class="o">+</span><span class="s2">&quot;&#39;&quot;</span>
                                    <span class="n">allsensorsids</span> <span class="o">=</span> <span class="n">dbcommunication</span><span class="o">.</span><span class="n">read_influxdb_values</span><span class="p">(</span><span class="n">final_query</span><span class="p">)</span>
                                    <span class="n">entry</span> <span class="o">=</span> <span class="p">{}</span>
                                    <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;sensorid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                                    <span class="n">finalvalues</span> <span class="o">=</span> <span class="p">[]</span>
                                    <span class="k">for</span> <span class="n">reading</span> <span class="ow">in</span> <span class="n">allsensorsids</span><span class="p">:</span>
                                        <span class="n">indivalue</span> <span class="o">=</span> <span class="p">{}</span>
                                        <span class="n">indivalue</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reading</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                                        <span class="n">indivalue</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reading</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                                        <span class="n">finalvalues</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">indivalue</span><span class="p">)</span>
                                    <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">finalvalues</span>
                                    <span class="n">finalresult</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
                                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">finalresult</span><span class="p">)</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;invalid sensor ids&#39;</span><span class="p">,</span><span class="s1">&#39;allowed_sensors&#39;</span><span class="p">:</span> <span class="n">allsensoridslist</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">final_query</span> <span class="o">=</span> <span class="s2">&quot;SHOW TAG VALUES ON virtual_city FROM water_output_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">experimentname</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;_scada_sensors WITH KEY=sensorid&quot;</span>
                    <span class="n">allsensorsids</span> <span class="o">=</span> <span class="n">dbcommunication</span><span class="o">.</span><span class="n">read_influxdb_values</span><span class="p">(</span><span class="n">final_query</span><span class="p">)</span>
                    <span class="n">allsensoridslist</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">val4</span> <span class="ow">in</span> <span class="n">allsensorsids</span><span class="p">:</span>
                        <span class="n">allsensoridslist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val4</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">finalresult</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">allsensoridslist</span><span class="p">:</span>
                        <span class="n">final_query</span> <span class="o">=</span> <span class="s2">&quot;SELECT time, sensor_value FROM water_output_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">experimentname</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;_scada_sensors WHERE sensorid=&#39;&quot;</span> <span class="o">+</span> <span class="n">value</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span>
                        <span class="n">allsensorsids</span> <span class="o">=</span> <span class="n">dbcommunication</span><span class="o">.</span><span class="n">read_influxdb_values</span><span class="p">(</span><span class="n">final_query</span><span class="p">)</span>
                        <span class="n">entry</span> <span class="o">=</span> <span class="p">{}</span>
                        <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;sensorid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                        <span class="n">finalvalues</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="k">for</span> <span class="n">reading</span> <span class="ow">in</span> <span class="n">allsensorsids</span><span class="p">:</span>
                            <span class="n">indivalue</span> <span class="o">=</span> <span class="p">{}</span>
                            <span class="n">indivalue</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reading</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">indivalue</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reading</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                            <span class="n">finalvalues</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">indivalue</span><span class="p">)</span>
                        <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">finalvalues</span>
                        <span class="n">finalresult</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span><span class="n">data</span> <span class="o">=</span> <span class="n">finalresult</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;experimentname does not exist&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="WaterOutputNodesViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterOutputNodesViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterOutputNodesViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to read EPANET simulation output for nodes.</span>
<span class="sd">        Using the &#39;nodes&#39; field, a list of nodes can be specified for relevant results. If &#39;nodes&#39; field is left empty then results for all the nodes will be returned.</span>
<span class="sd">        Using the &#39;fields&#39; field, a list of fields can be specified for relevant results. If &#39;fields&#39; field is left empty then all the fields will be returned.</span>
<span class="sd">        Using the &#39;resolution&#39; field, the instrument (sensor) resolution can be specified. If &#39;resolution&#39; field is left empty then simulation results will be returned.</span>
<span class="sd">        Using the &#39;drop&#39; field, the drop rate in percentage can be specified. If &#39;drop&#39; field is left empty then all the results will be returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterOutputNodesSerializer</span>

<div class="viewcode-block" id="WaterOutputNodesViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterOutputNodesViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Water Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s1">&#39;Here you can retrieve EPANET simulation nodes Output&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;nodes&#39;</span><span class="p">:</span> <span class="s1">&#39;provide a list of nodes, or leave empty to receive all of them&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;nodes example&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;n1&#39;</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">,</span> <span class="s1">&#39;n3&#39;</span><span class="p">],</span>
                         <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="s1">&#39;provide a list of fields, or leave empty to receive all of them&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;fields allowed&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;nodedemand&#39;</span><span class="p">,</span> <span class="s1">&#39;nodehead&#39;</span><span class="p">,</span> <span class="s1">&#39;nodepressure&#39;</span><span class="p">,</span> <span class="s1">&#39;nodequality&#39;</span><span class="p">],</span>
                         <span class="s1">&#39;resolution&#39;</span><span class="p">:</span> <span class="s1">&#39;provide a float between 0.0 and 1.0 to specify sensor resolution or leave empty to get original value&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;drop&#39;</span><span class="p">:</span> <span class="s1">&#39;provide a value between 0 and 100 to specify the random drop rate&#39;</span><span class="p">})</span></div>

<div class="viewcode-block" id="WaterOutputNodesViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.WaterOutputNodesViewSet.post">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterOutputNodesSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">nodes</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;nodes&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nodes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">final_query</span> <span class="o">=</span> <span class="s2">&quot;SELECT DISTINCT nodeid FROM water_output_nodes_values&quot;</span>
                <span class="n">alllinkidsdup</span> <span class="o">=</span> <span class="n">dbcommunication</span><span class="o">.</span><span class="n">read_db_values</span><span class="p">(</span><span class="n">final_query</span><span class="p">)</span>
                <span class="n">alllinkidslist</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">val4</span> <span class="ow">in</span> <span class="n">alllinkidsdup</span><span class="p">:</span>
                    <span class="n">alllinkidslist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val4</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">if</span> <span class="s2">&quot;[&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nodes</span> <span class="ow">or</span> <span class="s2">&quot;]&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;nodes must be a list&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">newlinks</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>
                    <span class="n">newlinks</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">newlinks</span><span class="p">]</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="nb">all</span><span class="p">(</span><span class="n">elem</span> <span class="ow">in</span> <span class="n">alllinkidslist</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">newlinks</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;invalid nodes&#39;</span><span class="p">,</span> <span class="s1">&#39;allowed_nodes&#39;</span><span class="p">:</span> <span class="n">alllinkidslist</span><span class="p">})</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fields&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;[&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fields</span> <span class="ow">or</span> <span class="s2">&quot;]&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;fields must be a list&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">newfields</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
                    <span class="n">newfields</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">newfields</span><span class="p">]</span>
                    <span class="n">allowedfields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;nodedemand&#39;</span><span class="p">,</span> <span class="s1">&#39;nodehead&#39;</span><span class="p">,</span> <span class="s1">&#39;nodepressure&#39;</span><span class="p">,</span> <span class="s1">&#39;nodequality&#39;</span><span class="p">]</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="nb">all</span><span class="p">(</span><span class="n">elem</span> <span class="ow">in</span> <span class="n">allowedfields</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">newfields</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;invalid fields&#39;</span><span class="p">,</span> <span class="s1">&#39;allowed_fields&#39;</span><span class="p">:</span> <span class="n">allowedfields</span><span class="p">})</span>
            <span class="n">resolution</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;resolution&#39;</span><span class="p">)</span>
            <span class="n">drop</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;drop&#39;</span><span class="p">)</span>
            <span class="n">final_values</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="n">nodes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">final_query</span> <span class="o">=</span> <span class="s2">&quot;SELECT * FROM water_output_nodes_values&quot;</span>
                    <span class="n">final_values</span> <span class="o">=</span> <span class="n">dbcommunication</span><span class="o">.</span><span class="n">read_db_values</span><span class="p">(</span><span class="n">final_query</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">specificfields</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">newfields</span><span class="p">)</span>
                    <span class="n">final_query</span> <span class="o">=</span> <span class="s2">&quot;SELECT nodeid, readingtime, &quot;</span> <span class="o">+</span> <span class="n">specificfields</span> <span class="o">+</span> <span class="s2">&quot; FROM water_output_nodes_values&quot;</span>
                    <span class="n">final_values</span> <span class="o">=</span> <span class="n">dbcommunication</span><span class="o">.</span><span class="n">read_db_values</span><span class="p">(</span><span class="n">final_query</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">nodes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">newlinks</span><span class="p">:</span>
                        <span class="n">final_query</span> <span class="o">=</span> <span class="s2">&quot;SELECT * FROM water_output_nodes_values WHERE nodeid=&#39;&quot;</span> <span class="o">+</span> <span class="n">value</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span>
                        <span class="n">linksinner</span> <span class="o">=</span> <span class="n">dbcommunication</span><span class="o">.</span><span class="n">read_db_values</span><span class="p">(</span><span class="n">final_query</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">linksinner</span><span class="p">:</span>
                            <span class="n">final_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">newlinks</span><span class="p">:</span>
                        <span class="n">specificfields</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">newfields</span><span class="p">)</span>
                        <span class="n">final_query</span> <span class="o">=</span> <span class="s2">&quot;SELECT id, nodeid, readingtime, &quot;</span> <span class="o">+</span> <span class="n">specificfields</span> <span class="o">+</span> <span class="s2">&quot; FROM water_output_nodes_values WHERE nodeid=&#39;&quot;</span> <span class="o">+</span> <span class="n">value</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span>
                        <span class="n">linksinner</span> <span class="o">=</span> <span class="n">dbcommunication</span><span class="o">.</span><span class="n">read_db_values</span><span class="p">(</span><span class="n">final_query</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">linksinner</span><span class="p">:</span>
                            <span class="n">final_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="n">nodesinresults</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">final_values</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nodesinresults</span><span class="p">:</span>
                    <span class="n">nodesinresults</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">resultstoreturn</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">drop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">population</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">probabilityof1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">drop</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span>
                <span class="n">weights</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">drop</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span><span class="p">,</span> <span class="n">probabilityof1</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodesinresults</span><span class="p">:</span>
                <span class="n">nodevalues</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">final_values</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">node</span> <span class="o">==</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="n">v</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S&quot;</span><span class="p">)</span>
                        <span class="n">restvalstub</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
                        <span class="n">restvallist</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="k">for</span> <span class="n">v1</span> <span class="ow">in</span> <span class="n">restvalstub</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">resolution</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="k">try</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">resolution</span><span class="p">))</span><span class="o">.</span><span class="n">is_integer</span><span class="p">():</span>
                                        <span class="n">resultwithrest</span> <span class="o">=</span> <span class="n">v1</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">resultwithrest</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">fmod</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">v1</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">resolution</span><span class="p">))</span>
                                        <span class="n">t001</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">resolution</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
                                        <span class="n">flformat</span> <span class="o">=</span> <span class="s2">&quot;{:.&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">t001</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="o">+</span> <span class="s2">&quot;f}&quot;</span>
                                        <span class="n">resultwithrest</span> <span class="o">=</span> <span class="n">flformat</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">resultwithrest</span><span class="p">)</span>
                                    <span class="k">if</span> <span class="n">drop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                        <span class="n">resultwithrest</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">choices</span><span class="p">(</span><span class="n">population</span><span class="p">,</span> <span class="n">weights</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">resultwithrest</span><span class="p">)</span>
                                        <span class="n">restvallist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">resultwithrest</span><span class="p">))</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">restvallist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">resultwithrest</span><span class="p">))</span>
                                <span class="k">except</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">drop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                        <span class="k">if</span> <span class="n">choices</span><span class="p">(</span><span class="n">population</span><span class="p">,</span> <span class="n">weights</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                            <span class="n">restvallist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                                        <span class="k">else</span><span class="p">:</span>
                                            <span class="n">restvallist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">restvallist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">drop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="k">try</span><span class="p">:</span>
                                        <span class="n">resultwithrest</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">choices</span><span class="p">(</span><span class="n">population</span><span class="p">,</span> <span class="n">weights</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
                                        <span class="n">restvallist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">resultwithrest</span><span class="p">)</span>
                                    <span class="k">except</span><span class="p">:</span>
                                        <span class="k">if</span> <span class="n">choices</span><span class="p">(</span><span class="n">population</span><span class="p">,</span> <span class="n">weights</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                            <span class="n">restvallist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                                        <span class="k">else</span><span class="p">:</span>
                                            <span class="n">restvallist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">restvallist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
                        <span class="n">nodevalues</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">restvallist</span>
                <span class="n">resultstoreturn</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="n">nodevalues</span>
            <span class="n">allowedfields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;nodedemand&#39;</span><span class="p">,</span> <span class="s1">&#39;nodehead&#39;</span><span class="p">,</span> <span class="s1">&#39;nodepressure&#39;</span><span class="p">,</span> <span class="s1">&#39;nodequality&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">outputformat</span> <span class="o">=</span> <span class="s2">&quot;{&#39;node&#39;: {&#39;measure_time&#39;: [&quot;</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowedfields</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;],...},...}&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">outputformat</span> <span class="o">=</span> <span class="s2">&quot;{&#39;node&#39;: {&#39;measure_time&#39;: [&quot;</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">newfields</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;],...},...}&quot;</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;outputformat&#39;</span><span class="p">:</span> <span class="n">outputformat</span><span class="p">,</span> <span class="s1">&#39;values&#39;</span><span class="p">:</span> <span class="n">resultstoreturn</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#UPDATED</span>
<div class="viewcode-block" id="WaterAddLeakViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterAddLeakViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterAddLeakViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to add leak</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterLeakSerializer</span>

<div class="viewcode-block" id="WaterAddLeakViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterAddLeakViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the lane&#39;s length in m.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;area&#39;</span><span class="p">:</span> <span class="s1">&#39;Area of the leak in m^2&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;start_time&#39;</span><span class="p">:</span><span class="s1">&#39;Start time of the leak in seconds.&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;end_time&#39;</span><span class="p">:</span><span class="s1">&#39;Time at which the leak is fixed in seconds&#39;</span><span class="p">,</span>
                          <span class="p">})</span></div>

<div class="viewcode-block" id="WaterAddLeakViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.WaterAddLeakViewSet.post">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterLeakSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">file</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
                <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span> <span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">Loader</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">FullLoader</span><span class="p">)</span>
                <span class="n">Start_Time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;times&#39;</span><span class="p">][</span><span class="s1">&#39;StartTime&#39;</span><span class="p">],</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M&#39;</span><span class="p">)</span>
                <span class="n">leakages</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;leakages&#39;</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">leakages</span><span class="p">:</span>
                    <span class="n">items</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">split</span> <span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
                    <span class="n">pipe</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">area</span> <span class="o">=</span> <span class="mf">3.14159</span> <span class="o">*</span> <span class="p">(</span><span class="nb">float</span> <span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>
                    <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span> <span class="p">(</span><span class="nb">str</span> <span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M&#39;</span><span class="p">)</span>
                    <span class="n">end</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span> <span class="p">(</span><span class="nb">str</span> <span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M&#39;</span><span class="p">)</span>
                    <span class="n">start_sec</span> <span class="o">=</span> <span class="p">(</span><span class="n">start</span> <span class="o">-</span> <span class="n">Start_Time</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span> <span class="p">()</span>
                    <span class="n">end_sec</span> <span class="o">=</span> <span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">Start_Time</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span> <span class="p">()</span>
                    <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">morph</span><span class="o">.</span><span class="n">split_pipe</span> <span class="p">(</span><span class="n">wn</span><span class="p">,</span> <span class="n">pipe</span><span class="p">,</span> <span class="n">pipe</span> <span class="o">+</span> <span class="s1">&#39;_B&#39;</span><span class="p">,</span> <span class="n">pipe</span> <span class="o">+</span> <span class="s1">&#39;_leak_node&#39;</span><span class="p">)</span>
                    <span class="n">leak_node</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_node</span> <span class="p">(</span><span class="n">pipe</span> <span class="o">+</span> <span class="s1">&#39;_leak_node&#39;</span><span class="p">)</span>
                    <span class="c1">#emitter coefficient</span>
                    <span class="n">leak_node</span><span class="o">.</span><span class="n">add_leak</span> <span class="p">(</span><span class="n">wn</span><span class="p">,</span> <span class="n">area</span> <span class="o">=</span> <span class="n">area</span><span class="p">,</span> <span class="n">start_time</span> <span class="o">=</span> <span class="n">start_sec</span><span class="p">,</span> <span class="n">end_time</span> <span class="o">=</span> <span class="n">end_sec</span><span class="p">)</span>
                <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="s1">&#39;basp/Water/Water.inp&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;Done&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="WaterEarthquakeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterEarthquakeViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterEarthquakeViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to add earthquake</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterEarthquakeSerializer</span>

<div class="viewcode-block" id="WaterEarthquakeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterEarthquakeViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Water Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;epicenterx&#39;</span><span class="p">:</span> <span class="s2">&quot;x location&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;epicentery&#39;</span><span class="p">:</span> <span class="s1">&#39;y location&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;magnitude&#39;</span><span class="p">:</span><span class="s1">&#39;Richter scale&#39;</span><span class="p">,</span>
                          <span class="s1">&#39; depth &#39;</span><span class="p">:</span><span class="s1">&#39;m, shallow depth&#39;</span><span class="p">,</span>
                          <span class="p">})</span></div>

<div class="viewcode-block" id="WaterEarthquakeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.WaterEarthquakeViewSet.post">[docs]</a>    <span class="nd">@swagger_auto_schema</span> <span class="p">(</span>
        <span class="n">responses</span> <span class="o">=</span> <span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span> <span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span> <span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterEarthquakeSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;in1&#39;</span><span class="p">)</span>
                <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;wn&#39;</span><span class="p">)</span>

                <span class="n">epicenterx</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;epicenterx&#39;</span><span class="p">)</span>
                <span class="n">epicentery</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;epicentery&#39;</span><span class="p">)</span>
                <span class="n">magnitude</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;magnitude&#39;</span><span class="p">)</span>
                <span class="n">depth</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;depth&#39;</span><span class="p">)</span>
                <span class="n">epicenter</span> <span class="o">=</span> <span class="p">(</span><span class="n">epicenterx</span><span class="p">,</span><span class="n">epicentery</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span> <span class="n">epicenter</span> <span class="p">)</span>
                <span class="n">earthquake</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">Earthquake</span> <span class="p">(</span><span class="n">epicenter</span><span class="p">,</span> <span class="n">magnitude</span><span class="p">,</span> <span class="n">depth</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">earthquake</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;exception e &#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;else error&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="WaterPowerOutageViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.WaterPowerOutageViewSet">[docs]</a><span class="k">class</span> <span class="nc">WaterPowerOutageViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to add power outage</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterEarthquakeSerializer</span>

<div class="viewcode-block" id="WaterPowerOutageViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterPowerOutageViewSet.list">[docs]</a>    <span class="nd">@swagger_auto_schema</span><span class="p">(</span>
        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Water Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;link&#39;</span><span class="p">:</span> <span class="s2">&quot;pump name&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;start_time&#39;</span><span class="p">:</span> <span class="s1">&#39;start time in seconds&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;end_time&#39;</span><span class="p">:</span><span class="s1">&#39;end time in seconds&#39;</span><span class="p">,</span>
                          <span class="p">})</span></div>

<div class="viewcode-block" id="WaterPowerOutageViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.WaterPowerOutageViewSet.post">[docs]</a>    <span class="nd">@swagger_auto_schema</span> <span class="p">(</span>
        <span class="n">responses</span> <span class="o">=</span> <span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span> <span class="p">(</span><span class="s1">&#39;ok, data returned&#39;</span><span class="p">),</span> <span class="mi">400</span><span class="p">:</span> <span class="n">openapi</span><span class="o">.</span><span class="n">Response</span> <span class="p">(</span><span class="s1">&#39;error, bad request&#39;</span><span class="p">)})</span>
    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterPowerOutageSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;in1&#39;</span><span class="p">)</span>
                <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;wn&#39;</span><span class="p">)</span>

                <span class="n">link</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;link&#39;</span><span class="p">)</span>
                <span class="n">start_time</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;start_time&#39;</span><span class="p">)</span>
                <span class="n">end_time</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;end_time&#39;</span><span class="p">)</span>

                <span class="n">pump</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_link</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
                <span class="n">pump</span><span class="o">.</span><span class="n">add_outage</span> <span class="p">(</span><span class="n">wn</span><span class="p">,</span> <span class="n">start_time</span><span class="p">,</span> <span class="n">end_time</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;Done&#39;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;exception e &#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;else error&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1">#TODO</span>
<div class="viewcode-block" id="TransportationLaneGetLengthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLengthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetLengthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the lane&#39;s length in m</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>
<div class="viewcode-block" id="TransportationLaneGetLengthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLengthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the lane&#39;s length in m.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationLaneGetLengthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLengthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getLength</span><span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetShapeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetShapeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetShapeViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get this lane&#39;s shape</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>
<div class="viewcode-block" id="TransportationLaneGetShapeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetShapeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of 2D positions (cartesian) describing the geometry.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;List of 2D positions (cartesian) describing the geometry.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationLaneGetShapeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetShapeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getShape</span><span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetWidthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetWidthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetWidthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the width of the named lane [m]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneGetWidthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetWidthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the width of the lane in m.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the width of the lane in m.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneGetWidthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetWidthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getWidth</span><span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetLastStepVehicleNumberViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLastStepVehicleNumberViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetLastStepVehicleNumberViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the number of vehicles on this lane within the last time step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneGetLastStepVehicleNumberViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLastStepVehicleNumberViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the total number of vehicles for the last time step on the given lane.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the total number of vehicles for the last time step on the given lane.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneGetLastStepVehicleNumberViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLastStepVehicleNumberViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getLastStepVehicleNumber</span><span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetLastStepMeanSpeedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLastStepMeanSpeedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetLastStepMeanSpeedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the mean speed of vehicles that were on this lane within the last simulation step [m/s]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneGetLastStepMeanSpeedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLastStepMeanSpeedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the average speed in m/s for the last time step on the given lane.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the average speed in m/s for the last time step on the given lane.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneGetLastStepMeanSpeedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLastStepMeanSpeedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getLastStepMeanSpeed</span><span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetLastStepVehicleIDsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLastStepVehicleIDsViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetLastStepVehicleIDsViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the list of ids of vehicles that were on this lane in the last simulation step</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneGetLastStepVehicleIDsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLastStepVehicleIDsViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the ids of the vehicles for the last time step on the given lane.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the ids of the vehicles for the last time step on the given lane.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneGetLastStepVehicleIDsViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLastStepVehicleIDsViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getLastStepVehicleIDs</span><span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetLastStepOccupancyViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLastStepOccupancyViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetLastStepOccupancyViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the total lengths of vehicles on this lane during the last simulation step divided by the length of this lane</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneGetLastStepOccupancyViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLastStepOccupancyViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the occupancy in % for the last time step on the given lane.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the occupancy in </span><span class="si">% f</span><span class="s2">or the last time step on the given lane.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneGetLastStepOccupancyViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLastStepOccupancyViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getLastStepOccupancy</span><span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetLastStepLengthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLastStepLengthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetLastStepLengthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the mean length of vehicles which were on this lane in the last step [m]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneGetLastStepLengthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLastStepLengthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the mean vehicle length in m for the last time step on the given lane.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the mean vehicle length in m for the last time step on the given lane.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneGetLastStepLengthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLastStepLengthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getLastStepLength</span><span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetWaitingTimeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetWaitingTimeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetWaitingTimeViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the waiting time for all vehicles on the lane [s]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneGetWaitingTimeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetWaitingTimeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the waiting time for all vehicles on the lane [s]&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the waiting time for all vehicles on the lane [s]&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneGetWaitingTimeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetWaitingTimeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getWaitingTime</span><span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetTraveltimeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetTraveltimeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetTraveltimeViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the estimated travel time for the last time step on the given lane [s]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneGetTraveltimeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetTraveltimeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the estimated travel time in s for the last time step on the given lane.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the estimated travel time in s for the last time step on the given lane.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneGetTraveltimeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetTraveltimeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getTraveltime</span><span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetLastStepHaltingNumberViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLastStepHaltingNumberViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetLastStepHaltingNumberViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the total number of halting vehicles for the last time step on the given lane. A speed of less than 0.1 m/s is considered a halt.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneGetLastStepHaltingNumberViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLastStepHaltingNumberViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the total number of halting vehicles for the last time step on the given lane. A speed of less than 0.1 m/s is considered a halt.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the total number of halting vehicles for the last time step on the given lane. A speed of less than 0.1 m/s is considered a halt.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneGetLastStepHaltingNumberViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLastStepHaltingNumberViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getLastStepHaltingNumber</span><span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>



<div class="viewcode-block" id="TransportationLaneGetCO2EmissionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetCO2EmissionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetCO2EmissionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the CO2 emission in mg for the last time step on the given lane.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>
<div class="viewcode-block" id="TransportationLaneGetCO2EmissionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetCO2EmissionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the CO2 emission in mg for the last time step on the given lane.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationLaneGetCO2EmissionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetCO2EmissionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getCO2Emission</span><span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetCOEmissionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetCOEmissionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetCOEmissionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the CO emission in mg for the last time step on the given lane.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>
<div class="viewcode-block" id="TransportationLaneGetCOEmissionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetCOEmissionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the CO emission in mg for the last time step on the given lane.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationLaneGetCOEmissionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetCOEmissionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getCOEmission</span> <span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetHCEmissionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetHCEmissionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetHCEmissionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the HC emission in mg for the last time step on the given lane.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>
<div class="viewcode-block" id="TransportationLaneGetHCEmissionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetHCEmissionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the HC emission in mg for the last time step on the given lane.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationLaneGetHCEmissionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetHCEmissionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getHCEmission</span> <span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetPMxEmissionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetPMxEmissionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetPMxEmissionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the particular matter emission in mg for the last time step on the given lane.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>
<div class="viewcode-block" id="TransportationLaneGetPMxEmissionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetPMxEmissionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the particular matter emission in mg for the last time step on the given lane.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationLaneGetPMxEmissionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetPMxEmissionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getPMxEmission</span> <span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetNOxEmissionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetNOxEmissionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetNOxEmissionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the NOx emission in mg for the last time step on the given lane.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>
<div class="viewcode-block" id="TransportationLaneGetNOxEmissionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetNOxEmissionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the NOx emission in mg for the last time step on the given lane.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationLaneGetNOxEmissionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetNOxEmissionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getNOxEmission</span> <span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetFuelConsumptionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetFuelConsumptionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetFuelConsumptionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the fuel consumption in ml for the last time step on the given lane.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>
<div class="viewcode-block" id="TransportationLaneGetFuelConsumptionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetFuelConsumptionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the fuel consumption in ml for the last time step on the given lane.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationLaneGetFuelConsumptionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetFuelConsumptionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getFuelConsumption</span> <span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetNoiseEmissionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetNoiseEmissionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetNoiseEmissionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the noise emission in db for the last time step on the given lane.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>
<div class="viewcode-block" id="TransportationLaneGetNoiseEmissionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetNoiseEmissionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the noise emission in db for the last time step on the given lane.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationLaneGetNoiseEmissionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetNoiseEmissionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getNoiseEmission</span><span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetElectricityConsumptionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetElectricityConsumptionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetElectricityConsumptionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the electricity consumption in ml for the last time step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>
<div class="viewcode-block" id="TransportationLaneGetElectricityConsumptionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetElectricityConsumptionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the electricity consumption in ml for the last time step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationLaneGetElectricityConsumptionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetElectricityConsumptionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getElectricityConsumption</span><span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetIDListViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetIDListViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetIDListViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get a list of all lanes in the network</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="TransportationLaneGetIDListViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetIDListViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all objects in the network&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getIDList</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns a list of all lanes in the network.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;data&#39;</span><span class="p">:</span><span class="n">tracioutput</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetIDCountViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetIDCountViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetIDCountViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the number of all lanes in the network</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="TransportationLaneGetIDCountViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetIDCountViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all objects in the network&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getIDCount</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the number of all lanes in the network.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;data&#39;</span> <span class="p">:</span> <span class="n">tracioutput</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationTrafficlightGetIDListViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetIDListViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationTrafficlightGetIDListViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get a list of all traffic lights in the network</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="TransportationTrafficlightGetIDListViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetIDListViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all objects in the network&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">trafficlight</span><span class="o">.</span><span class="n">getIDList</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns a list of all traffic lights in the network.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;data&#39;</span><span class="p">:</span><span class="n">traciout</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div></div>



<div class="viewcode-block" id="TransportationTrafficlightGetIDCountViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetIDCountViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationTrafficlightGetIDCountViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the count of all traffic lights in the network</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="TransportationTrafficlightGetIDCountViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetIDCountViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all objects in the network&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">trafficlight</span><span class="o">.</span><span class="n">getIDCount</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the count of all traffic lights in the network.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;data&#39;</span><span class="p">:</span><span class="n">traciout</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationTrafficlightGetRedYellowGreenStateViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetRedYellowGreenStateViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationTrafficlightGetRedYellowGreenStateViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the traffic light state</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span>
<div class="viewcode-block" id="TransportationTrafficlightGetRedYellowGreenStateViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetRedYellowGreenStateViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the named tl&#39;s state as a tuple of light definitions from rugGyYoO, &quot;</span>
                                        <span class="s2">&quot;for red, yed-yellow, green, yellow, off, where lower case letters mean that &quot;</span>
                                        <span class="s2">&quot;the stream has to decelerate.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;tlsID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a traffic light id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationTrafficlightGetRedYellowGreenStateViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetRedYellowGreenStateViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">tlsID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tlsID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">trafficlight</span><span class="o">.</span><span class="n">getRedYellowGreenState</span><span class="p">(</span><span class="n">tlsID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleGetIDCountViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetIDCountViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetIDCountViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the number of vehicles currently running within the scenario</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="TransportationVehicleGetIDCountViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetIDCountViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of currently loaded objects&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getIDCount</span><span class="p">()</span>
            <span class="c1"># </span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span><span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s1">&#39;Returns the number of vehicles currently running within the scenario&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">}</span>
                            <span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationTrafficlightGetPhaseDurationViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetPhaseDurationViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationTrafficlightGetPhaseDurationViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the total duration of the current phase (in seconds). This value</span>
<span class="sd">        is not affected by the elapsed or remaining duration of the current phase.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span>
<div class="viewcode-block" id="TransportationTrafficlightGetPhaseDurationViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetPhaseDurationViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the total duration of the current phase (in seconds). This value &quot;</span>
                                        <span class="s2">&quot;is not affected by the elapsed or remaining duration of the current phase.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;tlsID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a traffic light id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationTrafficlightGetPhaseDurationViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetPhaseDurationViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">tlsID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tlsID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">trafficlight</span><span class="o">.</span><span class="n">getPhaseDuration</span><span class="p">(</span><span class="n">tlsID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationTrafficlightGetPhaseViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetPhaseViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationTrafficlightGetPhaseViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the index of the current phase within the list of all phases of</span>
<span class="sd">        the current program.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span>
<div class="viewcode-block" id="TransportationTrafficlightGetPhaseViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetPhaseViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the index of the current phase within the list of all phases of the current program.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;tlsID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a traffic light id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationTrafficlightGetPhaseViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetPhaseViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">tlsID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tlsID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">trafficlight</span><span class="o">.</span><span class="n">getPhase</span><span class="p">(</span><span class="n">tlsID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetIDListViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetIDListViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetIDListViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get a list of ids of all vehicles currently running within the scenario</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetIDListSerializer</span>
<div class="viewcode-block" id="TransportationVehicleGetIDListViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetIDListViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="c1">###</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getIDList</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>

        <span class="c1">###</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of ids of all vehicles currently running within the scenario&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns a list of ids of all vehicles currently running within the scenario&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;data&#39;</span><span class="p">:</span><span class="n">tracioutput</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationTrafficlightSetRedYellowGreenStateViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightSetRedYellowGreenStateViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationTrafficlightSetRedYellowGreenStateViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to set the named tl&#39;s state as a tuple of light definitions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightSetRedYellowGreenStateSerializer</span>
<div class="viewcode-block" id="TransportationTrafficlightSetRedYellowGreenStateViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightSetRedYellowGreenStateViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the named tl&#39;s state as a tuple of light definitions from &quot;</span>
                                        <span class="s2">&quot;rugGyYuoO, for red, red-yellow, green, yellow, off, where lower &quot;</span>
                                        <span class="s2">&quot;case letters mean that the stream has to decelerate.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;tlsID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a traffic light id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s2">&quot;A tuple of light definitions from &quot;</span>
                                  <span class="s2">&quot;rugGyYuoO, for red, red-yellow, green, yellow, off, where lower &quot;</span>
                                  <span class="s2">&quot;case letters mean that the stream has to decelerate.&quot;</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationTrafficlightSetRedYellowGreenStateViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightSetRedYellowGreenStateViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightSetRedYellowGreenStateSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">tlsID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tlsID&#39;</span><span class="p">)</span>
            <span class="n">state</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">trafficlight</span><span class="o">.</span><span class="n">setRedYellowGreenState</span><span class="p">(</span><span class="n">tlsID</span><span class="p">,</span><span class="n">state</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tlsID</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">state</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationTrafficlightSetLinkStateViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightSetLinkStateViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationTrafficlightSetLinkStateViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to set the state for the given tls and link index.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightSetLinkStateSerializer</span>
<div class="viewcode-block" id="TransportationTrafficlightSetLinkStateViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightSetLinkStateViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the state for the given tls and link index.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;tlsID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a traffic light id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;The state must be one of rRgGyYoOu for red, red-yellow, green, yellow, &#39;</span>
                                  <span class="s1">&#39;off, where lower case letters mean that the stream has to decelerate.&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;tlsLinkIndex&#39;</span><span class="p">:</span> <span class="s1">&#39;The link index is shown in the GUI when setting the appropriate junction visualization option.&#39;</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationTrafficlightSetLinkStateViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightSetLinkStateViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightSetLinkStateSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">tlsID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tlsID&#39;</span><span class="p">)</span>
            <span class="n">tlsLinkIndex</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tlsLinkIndex&#39;</span><span class="p">)</span>
            <span class="n">state</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">trafficlight</span><span class="o">.</span><span class="n">setLinkState</span> <span class="p">(</span><span class="n">tlsID</span><span class="p">,</span><span class="n">tlsLinkIndex</span><span class="p">,</span><span class="n">state</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tlsID</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">tlsLinkIndex</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">state</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationTrafficlightSetPhaseViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightSetPhaseViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationTrafficlightSetPhaseViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to switch to the phase with the given index in the list of all phases for</span>
<span class="sd">        the current program.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightSetPhaseSerializer</span>
<div class="viewcode-block" id="TransportationTrafficlightSetPhaseViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightSetPhaseViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Switches to the phase with the given index in the list of all phases for the current program.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;tlsID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a traffic light id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationTrafficlightSetPhaseViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightSetPhaseViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightSetPhaseSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">tlsID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tlsID&#39;</span><span class="p">)</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">trafficlight</span><span class="o">.</span><span class="n">setPhase</span><span class="p">(</span><span class="n">tlsID</span><span class="p">,</span><span class="n">index</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tlsID</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationTrafficlightSetPhaseDurationViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightSetPhaseDurationViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationTrafficlightSetPhaseDurationViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to set the remaining phase duration of the current phase in seconds.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightSetPhaseDurationSerializer</span>

<div class="viewcode-block" id="TransportationTrafficlightSetPhaseDurationViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightSetPhaseDurationViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Set the remaining phase duration of the current phase in seconds.&quot;</span>
                                        <span class="s2">&quot;This value has no effect on subsquent repetitions of this phase.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationTrafficlightSetPhaseDurationViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightSetPhaseDurationViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightSetPhaseDurationSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">tlsID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tlsID&#39;</span><span class="p">)</span>
            <span class="n">phaseDuration</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;phaseDuration&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">trafficlight</span><span class="o">.</span><span class="n">setPhaseDuration</span> <span class="p">(</span><span class="n">tlsID</span><span class="p">,</span> <span class="n">phaseDuration</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tlsID</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">phaseDuration</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetSpeedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSpeedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetSpeedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the speed of the named vehicle within the last step [m/s]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>
<div class="viewcode-block" id="TransportationVehicleGetSpeedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSpeedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the speed of the named vehicle within the last step [m/s]&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the (longitudinal) speed in m/s of the named vehicle within the last step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleGetSpeedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSpeedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getSpeed</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">tracioutput</span><span class="o">==-</span><span class="mf">1073741824.0</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span> <span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleGetAccelerationViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetAccelerationViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetAccelerationViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the acceleration in the previous time step</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>
<div class="viewcode-block" id="TransportationVehicleGetAccelerationViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetAccelerationViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the acceleration in m/s^2 of the named vehicle within the last step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the acceleration in m/s^2 of the named vehicle within the last step&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleGetAccelerationViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetAccelerationViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getAcceleration</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">tracioutput</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1073741824.0</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleGetPositionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetPositionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetPositionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the position(two doubles) of the named vehicle (center of the front bumper) within the last step [m,m]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>
<div class="viewcode-block" id="TransportationVehicleGetPositionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetPositionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the position of the named vehicle within the last step [m,m]&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the position of the named vehicle within the last step [m,m].&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleGetPositionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetPositionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getPosition</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">-</span><span class="mf">1073741824.0</span> <span class="ow">in</span> <span class="n">tracioutput</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleGetCO2EmissionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetCO2EmissionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetCO2EmissionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get Vehicle&#39;s CO2 emissions in mg/s during this time step, to get the value for one step multiply with the step length</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>
<div class="viewcode-block" id="TransportationVehicleGetCO2EmissionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetCO2EmissionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the CO2 emission in mg/s for the last time step.</span>
<span class="sd">            Multiply by the step length to get the value for one step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the CO2 emission in mg/s for the last time step. Multiply by the step length to get the value for one step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleGetCO2EmissionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetCO2EmissionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getCO2Emission</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">tracioutput</span><span class="o">==-</span><span class="mf">1073741824.0</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleGetCOEmissionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetCOEmissionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetCOEmissionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get Vehicle&#39;s CO emissions in mg/s during this time step, to get the value for one step multiply with the step length</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>
<div class="viewcode-block" id="TransportationVehicleGetCOEmissionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetCOEmissionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the CO emission in mg/s for the last time step.</span>
<span class="sd">            Multiply by the step length to get the value for one step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the CO emission in mg/s for the last time step. Multiply by the step length to get the value for one step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleGetCOEmissionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetCOEmissionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getCOEmission</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">tracioutput</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1073741824.0</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleGetHCEmissionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetHCEmissionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetHCEmissionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get Vehicle&#39;s HC emissions in mg/s during this time step, to get the value for one step multiply with the step length</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>
<div class="viewcode-block" id="TransportationVehicleGetHCEmissionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetHCEmissionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the HC emission in mg/s for the last time step.</span>
<span class="sd">            Multiply by the step length to get the value for one step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the HC emission in mg/s for the last time step. Multiply by the step length to get the value for one step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleGetHCEmissionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetHCEmissionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getHCEmission</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">tracioutput</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1073741824.0</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleGetPMxEmissionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetPMxEmissionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetPMxEmissionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get Vehicle&#39;s PMx emissions in mg/s during this time step, to get the value for one step multiply with the step length</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>
<div class="viewcode-block" id="TransportationVehicleGetPMxEmissionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetPMxEmissionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the particular matter emission in mg/s for the last time step.</span>
<span class="sd">            Multiply by the step length to get the value for one step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the particular matter emission emission in mg/s for the last time step. Multiply by the step length to get the value for one step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleGetPMxEmissionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetPMxEmissionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getPMxEmission</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">tracioutput</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1073741824.0</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleGetNOxEmissionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetNOxEmissionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetNOxEmissionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get Vehicle&#39;s NOx emissions in mg/s during this time step, to get the value for one step multiply with the step length</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>
<div class="viewcode-block" id="TransportationVehicleGetNOxEmissionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetNOxEmissionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the NOx emission in mg/s for the last time step.</span>
<span class="sd">            Multiply by the step length to get the value for one step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the NOx emission in mg/s for the last time step. Multiply by the step length to get the value for one step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleGetNOxEmissionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetNOxEmissionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getNOxEmission</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">tracioutput</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1073741824.0</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleGetFuelConsumptionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetFuelConsumptionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetFuelConsumptionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get Vehicle&#39;s fuel consumption in ml/s during this time step, to get the value for one step multiply with the step length</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>
<div class="viewcode-block" id="TransportationVehicleGetFuelConsumptionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetFuelConsumptionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the NOx emission in mg/s for the last time step.</span>
<span class="sd">            Multiply by the step length to get the value for one step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the fuel consumption in ml/s for the last time step. Multiply by the step length to get the value for one step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleGetFuelConsumptionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetFuelConsumptionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getFuelConsumption</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">tracioutput</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1073741824.0</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleGetNoiseEmissionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetNoiseEmissionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetNoiseEmissionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get Noise generated by the vehicle in dBA</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>
<div class="viewcode-block" id="TransportationVehicleGetNoiseEmissionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetNoiseEmissionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the noise emission in db for the last time step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the noise emission in db for the last time step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleGetNoiseEmissionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetNoiseEmissionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getNoiseEmission</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">tracioutput</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1073741824.0</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleGetElectricityConsumptionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetElectricityConsumptionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetElectricityConsumptionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get Vehicle&#39;s electricity consumption in Wh/s during this time step, to get the value for one step multiply with the step length</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>
<div class="viewcode-block" id="TransportationVehicleGetElectricityConsumptionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetElectricityConsumptionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the electricity consumption in Wh/s for the last time step.</span>
<span class="sd">            Multiply by the step length to get the value for one step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the electricity consumption in Wh/s for the last time step. Multiply by the step length to get the value for one step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleGetElectricityConsumptionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetElectricityConsumptionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getElectricityConsumption</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">tracioutput</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1073741824.0</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStateSetStopViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetStopViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateSetStopViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">           Lets the vehicle stop at the given edge, at the given position and lane.</span>
<span class="sd">           The vehicle will stop for the given duration. Re-issuing a stop command with the same lane and position allows changing the duration.</span>
<span class="sd">           Setting the duration to 0 cancels an existing stop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span><span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetStopSerializer</span>
<div class="viewcode-block" id="TransportationVehicleStateSetStopViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetStopViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds or modifies a stop with the given parameters.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Adds or modifies a stop with the given parameters.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a position&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;laneIndex&#39;</span><span class="p">:</span><span class="s1">&#39;Provide the lane Index&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;duration&#39;</span><span class="p">:</span><span class="s1">&#39;How long the vehicle will stop&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;flags&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;startPos&#39;</span><span class="p">:</span><span class="s1">&#39;Provide the start position in seconds&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;until&#39;</span><span class="p">:</span><span class="s1">&#39; in seconds&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleStateSetStopViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetStopViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetStopSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pos&#39;</span><span class="p">)</span>
            <span class="n">laneIndex</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneIndex&#39;</span><span class="p">)</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;duration&#39;</span><span class="p">)</span>
            <span class="n">flags</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;flags&#39;</span><span class="p">)</span>
            <span class="n">startPos</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;startPos&#39;</span><span class="p">)</span>
            <span class="n">until</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;until&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setStop</span><span class="p">(</span><span class="n">vehID</span><span class="p">,</span><span class="n">edgeID</span><span class="p">,</span><span class="n">pos</span><span class="p">,</span><span class="n">laneIndex</span><span class="p">,</span><span class="n">duration</span><span class="p">,</span><span class="n">flags</span><span class="p">,</span><span class="n">startPos</span><span class="p">,</span><span class="n">until</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleStateSetBusStopViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetBusStopViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateSetBusStopViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">           Lets the vehicle stop at the given edge, at the given position and lane.</span>
<span class="sd">           The vehicle will stop for the given duration. Re-issuing a stop command with the same lane and position allows changing the duration.</span>
<span class="sd">           Setting the duration to 0 cancels an existing stop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetBusStopSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStateSetBusStopViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetBusStopViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds or modifies a bus stop with the given parameters. The duration and the until attribute are in seconds.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Adds or modifies a bus stop with the given parameters. The duration and the until attribute are in seconds.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;stopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a stop id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="s1">&#39;How long the vehicle will stop&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;flags&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;until&#39;</span><span class="p">:</span> <span class="s1">&#39; in seconds&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStateSetBusStopViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetBusStopViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetBusStopSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">stopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;stopID&#39;</span><span class="p">)</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;duration&#39;</span><span class="p">)</span>
            <span class="n">flags</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;flags&#39;</span><span class="p">)</span>
            <span class="n">until</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;until&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setBusStop</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">stopID</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">until</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStateSetContainerStopViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetContainerStopViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateSetContainerStopViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">           Lets the vehicle stop at the given edge, at the given position and lane.</span>
<span class="sd">           The vehicle will stop for the given duration. Re-issuing a stop command with the same lane and position allows changing the duration.</span>
<span class="sd">           Setting the duration to 0 cancels an existing stop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetContainerStopSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStateSetContainerStopViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetContainerStopViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds or modifies a bus stop with the given parameters. The duration and the until attribute are in seconds.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Adds or modifies a container stop with the given parameters. The duration and the until attribute are in seconds.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;stopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a stop id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="s1">&#39;How long the vehicle will stop&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;flags&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;until&#39;</span><span class="p">:</span> <span class="s1">&#39; in seconds&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStateSetContainerStopViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetContainerStopViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetContainerStopSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">stopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;stopID&#39;</span><span class="p">)</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;duration&#39;</span><span class="p">)</span>
            <span class="n">flags</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;flags&#39;</span><span class="p">)</span>
            <span class="n">until</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;until&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setContainerStop</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">stopID</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">until</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStateSetChargingStopViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetChargingStopViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateSetChargingStopViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">           Lets the vehicle stop at the given edge, at the given position and lane.</span>
<span class="sd">           The vehicle will stop for the given duration. Re-issuing a stop command with the same lane and position allows changing the duration.</span>
<span class="sd">           Setting the duration to 0 cancels an existing stop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetChargingStopSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStateSetChargingStopViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetChargingStopViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds or modifies a bus stop with the given parameters. The duration and the until attribute are in seconds.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Adds or modifies a stop at a chargingStation with the given parameters. The duration and the until attribute are in seconds.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;stopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a stop id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="s1">&#39;How long the vehicle will stop&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;flags&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;until&#39;</span><span class="p">:</span> <span class="s1">&#39; in seconds&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStateSetChargingStopViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetChargingStopViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetChargingStopSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">stopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;stopID&#39;</span><span class="p">)</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;duration&#39;</span><span class="p">)</span>
            <span class="n">flags</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;flags&#39;</span><span class="p">)</span>
            <span class="n">until</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;until&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setChargingStationStop</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">stopID</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">until</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStateSetParkingAreaStopViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetParkingAreaStopViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateSetParkingAreaStopViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">           Lets the vehicle stop at the given edge, at the given position and lane.</span>
<span class="sd">           The vehicle will stop for the given duration. Re-issuing a stop command with the same lane and position allows changing the duration.</span>
<span class="sd">           Setting the duration to 0 cancels an existing stop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetParkingAreaStopSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStateSetParkingAreaStopViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetParkingAreaStopViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds or modifies a bus stop with the given parameters. The duration and the until attribute are in seconds.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Adds or modifies a stop at a parkingArea with the given parameters. The duration and the until attribute are in seconds&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;stopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a stop id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="s1">&#39;How long the vehicle will stop&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;flags&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;until&#39;</span><span class="p">:</span> <span class="s1">&#39; in seconds&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStateSetParkingAreaStopViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetParkingAreaStopViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetParkingAreaStopSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">stopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;stopID&#39;</span><span class="p">)</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;duration&#39;</span><span class="p">)</span>
            <span class="n">flags</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;flags&#39;</span><span class="p">)</span>
            <span class="n">until</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;until&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setParkingAreaStop</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">stopID</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">until</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStateChangeTargetViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateChangeTargetViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateChangeTargetViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">           The vehicle&#39;s destination edge is set to the given. The route is rebuilt.</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateChangeTargetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStateChangeTargetViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateChangeTargetViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds or modifies a bus stop with the given parameters. The duration and the until attribute are in seconds.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;The vehicle&#39;s destination edge is set to the given edge id. The route is rebuilt.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStateChangeTargetViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateChangeTargetViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateChangeTargetSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">changeTarget</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStateSetRouteIDViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetRouteIDViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateSetRouteIDViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">           Assigns the named route to the vehicle, assuming a) the named route exists, and b) it starts on the edge the vehicle is currently at(1)(2).</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetRouteIdSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStateSetRouteIDViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetRouteIDViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds or modifies a bus stop with the given parameters. The duration and the until attribute are in seconds.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Changes the vehicles route to the route with the given id.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;RouteID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a route id&#39;</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStateSetRouteIDViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetRouteIDViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetRouteIdSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">routeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;routeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">changeTarget</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">routeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleStateSetRouteViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetRouteViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateSetRouteViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Assigns the list of edges as the vehicle&#39;s new route assuming the first edge given is the one the vehicle is curently at(1)(2)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetRouteSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStateSetRouteViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetRouteViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;changes the vehicle route to given edges list. The first edge in the list has to be the one that the vehicle is at at the moment.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;edgeList&#39;</span><span class="p">:</span> <span class="s1">&#39;provide a list of edges&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;edgeList_example&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">]</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStateSetRouteViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetRouteViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetRouteSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="n">edgeList</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;route&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">edgeList</span><span class="p">)</span>
            <span class="c1"># dclasses = disallowedClasses.strip (&#39;][&#39;).split (&#39;, &#39;)</span>
            <span class="k">if</span> <span class="s2">&quot;[&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">edgeList</span> <span class="ow">or</span> <span class="s2">&quot;]&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">edgeList</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;edgeList must be a list&#39;</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">dclasses</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span> <span class="p">(</span><span class="n">edgeList</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Give a list as in the example format&#39;</span><span class="p">,</span>
                                      <span class="s1">&#39;edgeList_example&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">]})</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setRoute</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">dclasses</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="n">vehID</span><span class="p">,</span> <span class="s1">&#39;edgeList&#39;</span><span class="p">:</span> <span class="n">dclasses</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleRerouteParkingAreaViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleRerouteParkingAreaViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleRerouteParkingAreaViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">           Changes the next parking area in parkingAreaID, updates the vehicle route, and preserve consistency in case of passengers/containers on board</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleRerouteParkingAreaSerializer</span>

<div class="viewcode-block" id="TransportationVehicleRerouteParkingAreaViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleRerouteParkingAreaViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds or modifies a bus stop with the given parameters. The duration and the until attribute are in seconds.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Changes the next parking area in parkingAreaID, updates the vehicle route,and preserve consistency in case of passengers/containers on board.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;parkingAreaID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a parkingArea ID&#39;</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleRerouteParkingAreaViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleRerouteParkingAreaViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleRerouteParkingAreaSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">parkingAreaID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;parkingAreaID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">rerouteParkingArea</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">parkingAreaID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStateSetAdaptedTraveltimeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetAdaptedTraveltimeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateSetAdaptedTraveltimeViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">           Inserts the information about the travel time (in seconds) of edge &quot;edgeID&quot; valid from begin time to end time (in seconds) into the vehicle&#39;s internal edge weights container.</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStatesetAdaptedTraveltimeSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStateSetAdaptedTraveltimeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetAdaptedTraveltimeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds or modifies a bus stop with the given parameters. The duration and the until attribute are in seconds.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Inserts the information about the travel time of edge &#39;edgeID&#39; valid from begin time to end time into the vehicle&#39;s internal edge weights container.If the time is not specified, any previously set values for that edge are removed.&quot;</span>
                            <span class="s2">&quot; If begTime or endTime are not specified the value is set for the whole simulation duration.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;travel time in seconds&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;begTime&#39;</span><span class="p">:</span> <span class="s1">&#39;Begin time in seconds&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;endTime&#39;</span><span class="p">:</span> <span class="s1">&#39;End time in seconds&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStateSetAdaptedTraveltimeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetAdaptedTraveltimeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStatesetAdaptedTraveltimeSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>
            <span class="n">time</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
            <span class="n">begTime</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;begTime&#39;</span><span class="p">)</span>
            <span class="n">endTime</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;endTime&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setAdaptedTraveltime</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">edgeID</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">begTime</span><span class="p">,</span> <span class="n">endTime</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStatesetEffortViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStatesetEffortViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStatesetEffortViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">        Inserts the information about the effort of edge &quot;edgeID&quot; valid from begin time to end time (in seconds) into the vehicle&#39;s internal edge weights container.        &quot;&quot;&quot;</span>

    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetEffortSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStatesetEffortViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStatesetEffortViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds or modifies a bus stop with the given parameters. The duration and the until attribute are in seconds.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Inserts the information about the effort of edge&#39;edgeID&#39; valid from&quot;</span>
                            <span class="s2">&quot;begin time to end time into the vehicle&#39;s internal edge weights&quot;</span>
                            <span class="s2">&quot;container.If the time is not specified, any previously set values for that edge&quot;</span>
                            <span class="s2">&quot;are removed.&quot;</span>
                            <span class="s2">&quot;If begTime or endTime are not specified the value is set for the whole simulation duration.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;effort&#39;</span><span class="p">:</span> <span class="s1">&#39;effort&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;begTime&#39;</span><span class="p">:</span> <span class="s1">&#39;Begin time in seconds&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;endTime&#39;</span><span class="p">:</span> <span class="s1">&#39;End time in seconds&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStatesetEffortViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStatesetEffortViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetEffortSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>
            <span class="n">effort</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;effort&#39;</span><span class="p">)</span>
            <span class="n">begTime</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;begTime&#39;</span><span class="p">)</span>
            <span class="n">endTime</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;endTime&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setEffort</span><span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">edgeID</span><span class="p">,</span> <span class="n">effort</span><span class="p">,</span> <span class="n">begTime</span><span class="p">,</span> <span class="n">endTime</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStateSetSignalsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetSignalsViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateSetSignalsViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">            Sets a new state of signal.&quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStatesetSignalsSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStateSetSignalsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetSignalsViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds or modifies a bus stop with the given parameters. The duration and the until attribute are in seconds.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets an integer encoding the state of the vehicle&#39;s signals.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;signals&#39;</span><span class="p">:</span> <span class="s1">&#39;integer encoding the state of the vehicles signals&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStateSetSignalsViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetSignalsViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStatesetSignalsSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">signals</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;signals&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setSignals</span><span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">signals</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStatesetRoutingModeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStatesetRoutingModeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStatesetRoutingModeViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">            Sets the routing mode (0: default, 1: aggregated)&quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStatesetRoutingModeSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStatesetRoutingModeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStatesetRoutingModeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds or modifies a bus stop with the given parameters. The duration and the until attribute are in seconds.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the current routing mode:&quot;</span>
                            <span class="s2">&quot;tc.ROUTING_MODE_DEFAULT    : use weight storages and fall-back to edge speeds (default)&quot;</span>
                            <span class="s2">&quot;tc.ROUTING_MODE_AGGREGATED : use global smoothed travel times from device.rerouting&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;routingMode&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide the current routing mode&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStatesetRoutingModeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStatesetRoutingModeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStatesetRoutingModeSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">routingMode</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;routingMode&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setRoutingMode</span><span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">routingMode</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStatesetMoveToViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStatesetMoveToViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStatesetMoveToViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">            Moves the vehicle to a new position along the current route&quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateMoveToSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStatesetMoveToViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStatesetMoveToViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Moves the vehicle to a new position along the current route&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Move a vehicle to a new position along it&#39;s current route.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide the lane id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;pos&#39;</span><span class="p">:</span><span class="s1">&#39;Provide the new position&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;reason&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStatesetMoveToViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStatesetMoveToViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateMoveToSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;pos&#39;</span><span class="p">)</span>
            <span class="n">reason</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;reason&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">moveTo</span><span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">laneID</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleStateResumeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateResumeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateResumeViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">           Resumes the vehicle from the current stop (throws an error if the vehicle is not stopped).</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateResumeSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStateResumeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateResumeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds or modifies a bus stop with the given parameters. The duration and the until attribute are in seconds.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Resumes the vehicle from the current stop (throws an error if the vehicle is not stopped).&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStateResumeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateResumeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateResumeSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">resume</span> <span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStateChangeLaneViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateChangeLaneViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateChangeLaneViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">           Forces a lane change to the lane with the given index;</span>
<span class="sd">           if successful, the lane will be chosen for the given amount of time (in seconds).</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span><span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateChangeLaneSerializer</span>
<div class="viewcode-block" id="TransportationVehicleStateChangeLaneViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateChangeLaneViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Forces a lane change to the lane with the given index; if successful,</span>
<span class="sd">            the lane will be chosen for the given amount of time (in s).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Forces a lane change to the lane with the given index; if successful,the lane will be chosen for the given amount of time (in s).&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;laneIndex&#39;</span><span class="p">:</span><span class="s1">&#39;Provide the lane Index&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;duration&#39;</span><span class="p">:</span><span class="s1">&#39;How long the vehicle will stop&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleStateChangeLaneViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateChangeLaneViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateChangeLaneSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">laneIndex</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneIndex&#39;</span><span class="p">)</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;duration&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">changeLane</span><span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">laneIndex</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStateChangeSubLaneViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateChangeSubLaneViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateChangeSubLaneViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">           Forces a lateral change by the given amount (negative values indicate changing to the right, positive to the left).</span>
<span class="sd">           This will override any other lane change motivations but conform to safety-constraints as configured by laneChangeMode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span><span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateChangeSubLaneSerializer</span>
<div class="viewcode-block" id="TransportationVehicleStateChangeSubLaneViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateChangeSubLaneViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Forces a lateral change by the given amount (negative values indicate changing to the right, positive</span>
<span class="sd">            to the left). This will override any other lane change motivations but conform to</span>
<span class="sd">            safety-constraints as configured by laneChangeMode.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Forces a lateral change by the given amount (negative values indicate changing to the right, positive to the left). This will override any other lane change motivations but conform to safety-constraints as configured by laneChangeMode.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;latDist&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleStateChangeSubLaneViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateChangeSubLaneViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateChangeSubLaneSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">latDist</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;latDist&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">changeSublane</span><span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">latDist</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStateSlowDownViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSlowDownViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateSlowDownViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">          Changes the speed smoothly to the given value over the given amount of time in seconds (can also be used to increase speed).</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span><span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSlowDownSerializer</span>
<div class="viewcode-block" id="TransportationVehicleStateSlowDownViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSlowDownViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Changes the speed smoothly to the given value over the given amount</span>
<span class="sd">            of time in seconds (can also be used to increase speed).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Changes the speed smoothly to the given value over the given amount of time in seconds (can also be used to increase speed).&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;speed&#39;</span><span class="p">:</span><span class="s1">&#39;Provide the value of the speed&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;duration&#39;</span><span class="p">:</span><span class="s1">&#39;Provide the duration in seconds&#39;</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleStateSlowDownViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSlowDownViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSlowDownSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">speed</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;speed&#39;</span><span class="p">)</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;duration&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">slowDown</span><span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">speed</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStateSetSpeedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetSpeedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateSetSpeedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">          Sets the vehicle speed to the given value. The speed will be followed according to the current speed mode.</span>
<span class="sd">           By default the vehicle may drive slower than the set speed according to the safety rules of the car-follow model.</span>
<span class="sd">           When sending a value of -1 the vehicle will revert to its original behavior (using the maxSpeed of its vehicle type and following all safety rules).</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span><span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetSpeedSerializer</span>
<div class="viewcode-block" id="TransportationVehicleStateSetSpeedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetSpeedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the speed in m/s for the named vehicle within the last step.</span>
<span class="sd">            Calling with speed=-1 hands the vehicle control back to SUMO.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the speed in m/s for the named vehicle within the last step. Calling with speed=-1 hands the vehicle control back to SUMO.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;speed&#39;</span><span class="p">:</span><span class="s1">&#39;Provide the value of the speed&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleStateSetSpeedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetSpeedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetSpeedSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">speed</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;speed&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setSpeed</span><span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">speed</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleStateSetColorViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetColorViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateSetColorViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">          Sets the color for the vehicle with the given ID, i.e. (255,0,0) for the color red.</span>
<span class="sd">            The fourth component (alpha) is optional.</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetColorSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStateSetColorViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetColorViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the color for the vehicle with the given ID, i.e. (255,0,0) for the color red.</span>
<span class="sd">            The fourth component (alpha) is optional.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the color for the vehicle with the given ID, i.e. (255,0,0) for the color red.&quot;</span>
                                        <span class="s2">&quot;The fourth component (alpha) is optional.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide the vehicle color i.e. (255,0,0)&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStateSetColorViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetColorViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetColorSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setColor</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStatedispatchTaxiViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStatedispatchTaxiViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStatedispatchTaxiViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">         dispatches the taxi with the given id to service the given reservations.</span>
<span class="sd">        If only a single reservation is given, this implies pickup and drop-off</span>
<span class="sd">        If multiple reservations are given, each reservation id must occur twice</span>
<span class="sd">        (once for pickup and once for drop-off) and the list encodes ride</span>
<span class="sd">        sharing of passengers (in pickup and drop-off order)</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateDispatchTaxiSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStatedispatchTaxiViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStatedispatchTaxiViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;dispatches the taxi with the given id to service the given reservations.</span>
<span class="sd">            If only a single reservation is given, this implies pickup and drop-off</span>
<span class="sd">            If multiple reservations are given, each reservation id must occur twice</span>
<span class="sd">            (once for pickup and once for drop-off) and the list encodes ride</span>
<span class="sd">            sharing of passengers (in pickup and drop-off order)&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;dispatches the taxi with the given id to service the given reservations.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide the vehicle color i.e. (255,0,0)&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStatedispatchTaxiViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStatedispatchTaxiViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateDispatchTaxiSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">reservations</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;reservations&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">dispatchTaxi</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">reservations</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStateMoveToViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateMoveToViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateMoveToViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">          Moves the vehicle to a new position along the current route</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span><span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateMoveToSerializer</span>
<div class="viewcode-block" id="TransportationVehicleStateMoveToViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateMoveToViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Move a vehicle to a new position along it&#39;s current route.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Move a vehicle to a new position along it&#39;s current route.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span><span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;pos&#39;</span><span class="p">:</span><span class="s1">&#39;Provide a position&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;reason&#39;</span><span class="p">:</span><span class="s1">&#39;Provide a reason&#39;</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleStateMoveToViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateMoveToViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateMoveToSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pos&#39;</span><span class="p">)</span>
            <span class="n">reason</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;reason&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">moveTo</span><span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">laneID</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleStateMoveToXYViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateMoveToXYViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateMoveToXYViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">            Place vehicle at the given x,y coordinates and force it&#39;s angle to</span>
<span class="sd">            the given value (for drawing).</span>
<span class="sd">            If the angle is set to INVALID_DOUBLE_VALUE, the vehicle assumes the</span>
<span class="sd">            natural angle of the edge on which it is driving.</span>
<span class="sd">            If keepRoute is set to 1, the closest position</span>
<span class="sd">            within the existing route is taken. If keepRoute is set to 0, the vehicle may move to</span>
<span class="sd">            any edge in the network but it&#39;s route then only consists of that edge.</span>
<span class="sd">            If keepRoute is set to 2 the vehicle has all the freedom of keepRoute=0</span>
<span class="sd">            but in addition to that may even move outside the road network.</span>
<span class="sd">            edgeID and lane are optional placement hints to resolve ambiguities.</span>
<span class="sd">            The command fails if no suitable target position is found within the</span>
<span class="sd">            distance given by matchThreshold.</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateMoveToXYSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStateMoveToXYViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateMoveToXYViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Moves the vehicle to a new position after normal vehicle movements have taken place.</span>
<span class="sd">          Also forces the angle of the vehicle to the given value (navigational angle in degree).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Moves the vehicle to a new position after normal vehicle movements have taken place.&quot;</span>
                            <span class="s2">&quot;Also forces the angle of the vehicle to the given value (navigational angle in degree).&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;lane&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide x coordinate&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide y coordinate&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;angle&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide the angle&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;KeepRoute&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;matchThreshold&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStateMoveToXYViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateMoveToXYViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateMoveToXYSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>
            <span class="n">lane</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;lane&#39;</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
            <span class="n">angle</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;angle&#39;</span><span class="p">)</span>
            <span class="n">keepRoute</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;keepRoute&#39;</span><span class="p">)</span>
            <span class="n">matchThreshold</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;matchThreshold&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">moveTo</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">edgeID</span><span class="p">,</span> <span class="n">lane</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">keepRoute</span><span class="p">,</span> <span class="n">matchThreshold</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStateReplaceStopViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateReplaceStopViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateReplaceStopViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">            Replaces stop at the given index with a new stop. Automatically modifies</span>
<span class="sd">            the route if the replacement stop is at another location.</span>
<span class="sd">            For edgeID a stopping place id may be given if the flag marks this</span>
<span class="sd">            stop as stopping on busStop, parkingArea, containerStop etc.</span>
<span class="sd">            If edgeID is &quot;&quot;, the stop at the given index will be removed without</span>
<span class="sd">            replacement and the route will not be modified.</span>
<span class="sd">            If teleport is set to 1, the route to the replacement stop will be</span>
<span class="sd">            disconnected (forcing a teleport).</span>
<span class="sd">            If stopIndex is 0 the gap will be between the current</span>
<span class="sd">            edge and the new stop. Otherwise the gap will be between the stop edge for</span>
<span class="sd">            nextStopIndex - 1 and the new stop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStatereplaceStopSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStateReplaceStopViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateReplaceStopViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Moves the vehicle to a new position after normal vehicle movements have taken place.</span>
<span class="sd">          Also forces the angle of the vehicle to the given value (navigational angle in degree).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Replaces stop at the given index with a new stop. Automatically modifies the &quot;</span>
                                         <span class="s2">&quot;route if the replacement stop is at another location&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;nextStopIndex&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide next stop Index&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;pos&#39;</span><span class="p">:</span><span class="s1">&#39;Provide a position&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;laneIndex&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane index&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide the duration&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;flags&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;startPos&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;until&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;teleport &#39;</span><span class="p">:</span><span class="s1">&#39;teleport&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStateReplaceStopViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateReplaceStopViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStatereplaceStopSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">nextStopIndex</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;nextStopIndex&#39;</span><span class="p">)</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>
            <span class="n">laneIndex</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;laneIndex&#39;</span><span class="p">)</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;pos&#39;</span><span class="p">)</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;duration&#39;</span><span class="p">)</span>
            <span class="n">flags</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;flags&#39;</span><span class="p">)</span>
            <span class="n">startPos</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;startPos&#39;</span><span class="p">)</span>
            <span class="n">until</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;until&#39;</span><span class="p">)</span>
            <span class="n">teleport</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;teleport&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">replaceStop</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">nextStopIndex</span><span class="p">,</span> <span class="n">edgeID</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">laneIndex</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="n">startPos</span><span class="p">,</span> <span class="n">until</span><span class="p">,</span> <span class="n">teleport</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleStateRerouteTraveltimeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateRerouteTraveltimeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateRerouteTraveltimeViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">            Reroutes a vehicle. If</span>
<span class="sd">            currentTravelTimes is True (default) then the current traveltime of the</span>
<span class="sd">            edges is loaded and used for rerouting. If currentTravelTimes is False</span>
<span class="sd">            custom travel times are used. The various functions and options for</span>
<span class="sd">            customizing travel times are described at https://sumo.dlr.de/wiki/Simulation/Routing</span>

<span class="sd">            When rerouteTraveltime has been called once with option</span>
<span class="sd">            currentTravelTimes=True, all edge weights are set to the current travel</span>
<span class="sd">            times at the time of that call (even for subsequent simulation steps).</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateRerouteTraveltimeSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStateRerouteTraveltimeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateRerouteTraveltimeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the vehicle&#39;s speed mode as a bitset.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Computes a new route to the current destination that minimizes travel time.&quot;</span>
                                         <span class="s2">&quot; The assumed values for each edge in the network can be customized in various ways&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;currentTravelTimes&#39;</span><span class="p">:</span> <span class="s1">&#39;True or False&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStateRerouteTraveltimeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateRerouteTraveltimeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateRerouteTraveltimeSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">currentTravelTimes</span>  <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;currentTravelTimes&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">rerouteTraveltime</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">currentTravelTimes</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStateRerouteEffortViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateRerouteEffortViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateRerouteEffortViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">            Computes a new route using the vehicle&#39;s internal and the global edge effort information. Replaces the current route by the found</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateRerouteEffortSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStateRerouteEffortViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateRerouteEffortViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the vehicle&#39;s speed mode as a bitset.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Reroutes a vehicle according to the effort values.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStateRerouteEffortViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateRerouteEffortViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateRerouteEffortSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">rerouteEffort</span> <span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleStateSetSpeedModeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetSpeedModeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateSetSpeedModeViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">          	Sets how the values set by speed (0x40) and slowdown (0x14) shall be treated. Also allows to configure the behavior at junctions. See below.</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span><span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetSpeedModeSerializer</span>
<div class="viewcode-block" id="TransportationVehicleStateSetSpeedModeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetSpeedModeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the vehicle&#39;s speed mode as a bitset.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the vehicle&#39;s speed mode as a bitset.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;sm&#39;</span><span class="p">:</span><span class="s1">&#39;Provide the speed mode&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleStateSetSpeedModeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetSpeedModeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetSpeedModeSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">sm</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sm&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setSpeedMode</span><span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">sm</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStateSetSpeedFactorViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetSpeedFactorViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateSetSpeedFactorViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">        Sets the vehicle&#39;s speed factor to the given value</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span><span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetSpeedFactorSerializer</span>
<div class="viewcode-block" id="TransportationVehicleStateSetSpeedFactorViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetSpeedFactorViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the speed factor (tendency to drive faster or slower than).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the speed factor (tendency to drive faster or slower than).&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;factor&#39;</span><span class="p">:</span><span class="s1">&#39;Provide the speed factor&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleStateSetSpeedFactorViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetSpeedFactorViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetSpeedFactorSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">factor</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;factor&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setSpeedFactor</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">factor</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStateSetMaxSpeedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetMaxSpeedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateSetMaxSpeedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">         Sets the vehicle&#39;s maximum speed to the given value</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span><span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetMaxSpeedSerializer</span>
<div class="viewcode-block" id="TransportationVehicleStateSetMaxSpeedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetMaxSpeedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the maximum speed in m/s for this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the maximum speed in m/s for this vehicle.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;speed&#39;</span><span class="p">:</span><span class="s1">&#39;Provide the value of the speed&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleStateSetMaxSpeedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetMaxSpeedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetMaxSpeedSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">speed</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;speed&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setMaxSpeed</span><span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">speed</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleStateSetLaneChangeModeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetLaneChangeModeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateSetLaneChangeModeViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">         Sets how lane changing in general and lane changing requests by TraCI are performed</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetLaneChangeModeSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStateSetLaneChangeModeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetLaneChangeModeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the maximum speed in m/s for this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the vehicle&#39;s lane change mode as a bitset.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39; lcm&#39;</span><span class="p">:</span> <span class="s1">&#39;lane change mode&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStateSetLaneChangeModeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateSetLaneChangeModeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateSetLaneChangeModeSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">lcm</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;lcm&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setLaneChangeMode</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">lcm</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStateUpdateBestLanesViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateUpdateBestLanesViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateUpdateBestLanesViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">         updates internal data structures for strategic lane choice. (e.g. after modifying access permissions).</span>
<span class="sd">         Note: This happens automatically when changing the route or moving to a new edge</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateUpdateBestLanesSerializer</span>

<div class="viewcode-block" id="TransportationVehicleStateUpdateBestLanesViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateUpdateBestLanesViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Triggers an update of the vehicle&#39;s bestLanes (structure determining the lane preferences used by LC models)</span>
<span class="sd">                It may be called after modifying the vClass for instance.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Triggers an update of the vehicle&#39;s bestLanes (structure determining the lane preferences used by LC models)&quot;</span>
                                            <span class="s2">&quot;It may be called after modifying the vClass for instance.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleStateUpdateBestLanesViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateUpdateBestLanesViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateUpdateBestLanesSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">updateBestLanes</span> <span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleAddViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleAddViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleAddViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">	        Adds the defined vehicle</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleAddSerializer</span>

<div class="viewcode-block" id="TransportationVehicleAddViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleAddViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;	Adds the defined vehicle&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Add a new vehicle (new style with all possible parameters)&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;routeID&#39;</span><span class="p">:</span><span class="s1">&#39;Provide a route id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;typeID&#39;</span><span class="p">:</span><span class="s1">&#39;Provide a type id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;depart&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;departLane&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;departPos&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;departSpeed&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;arrivalLane&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;arrivalPos&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;arrivalSpeed&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;fromTaz&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;toTaz&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;line&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;personCapacity&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;personNumber&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleAddViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleAddViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleAddSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">routeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;routeID&#39;</span><span class="p">)</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="n">depart</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;depart&#39;</span><span class="p">)</span>
            <span class="n">departLane</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;departLane&#39;</span><span class="p">)</span>
            <span class="n">departPos</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;departPos&#39;</span><span class="p">)</span>
            <span class="n">departSpeed</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;departSpeed&#39;</span><span class="p">)</span>
            <span class="n">arrivalLane</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;arrivalLane&#39;</span><span class="p">)</span>
            <span class="n">arrivalPos</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;arrivalPos&#39;</span><span class="p">)</span>
            <span class="n">arrivalSpeed</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;arrivalSpeed&#39;</span><span class="p">)</span>
            <span class="n">fromTaz</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;fromTaz&#39;</span><span class="p">)</span>
            <span class="n">toTaz</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;toTaz&#39;</span><span class="p">)</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;lane&#39;</span><span class="p">)</span>
            <span class="n">personCapacity</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;personCapacity&#39;</span><span class="p">)</span>
            <span class="n">personNumber</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;personNumber&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">add</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">routeID</span><span class="p">,</span> <span class="n">typeID</span><span class="p">,</span> <span class="n">depart</span><span class="p">,</span> <span class="n">departLane</span><span class="p">,</span> <span class="n">departPos</span><span class="p">,</span> <span class="n">departSpeed</span><span class="p">,</span> <span class="n">arrivalLane</span><span class="p">,</span> <span class="n">arrivalPos</span><span class="p">,</span> <span class="n">arrivalSpeed</span><span class="p">,</span> <span class="n">fromTaz</span><span class="p">,</span> <span class="n">toTaz</span><span class="p">,</span><span class="n">line</span><span class="p">,</span> <span class="n">personCapacity</span><span class="p">,</span><span class="n">personNumber</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleStateRemoveViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateRemoveViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleStateRemoveViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">         Removes the defined vehicle.</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span><span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateRemoveSerializer</span>
<div class="viewcode-block" id="TransportationVehicleStateRemoveViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateRemoveViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove vehicle with the given ID for the give reason.</span>
<span class="sd">            Reasons are defined in module constants and start with REMOVE_&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Remove vehicle with the given ID for the give reason. Reasons are defined in module constants and start with REMOVE_&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;reason&#39;</span><span class="p">:</span><span class="s1">&#39;Provide the reason&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleStateRemoveViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleStateRemoveViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleStateRemoveSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">reason</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;reason&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">reason</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleSetLengthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetLengthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleSetLengthViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">         	Sets the vehicle&#39;s length to the given value</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetLengthSerializer</span>

<div class="viewcode-block" id="TransportationVehicleSetLengthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetLengthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the length in m for the given vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the length in m for the given vehicle.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;length&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the vehicle&#39;s length&quot;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleSetLengthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetLengthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetLengthSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">length</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;length&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setLength</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleSetVehicleClassViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetVehicleClassViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleSetVehicleClassViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">	        Sets the vehicle&#39;s length to the given value</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetVehicleClassSerializer</span>

<div class="viewcode-block" id="TransportationVehicleSetVehicleClassViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetVehicleClassViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;	Sets the vehicle&#39;s length to the given value&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the vehicle&#39;s length to the given value&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;clazz&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the vehicle class&quot;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleSetVehicleClassViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetVehicleClassViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetVehicleClassSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">clazz</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;clazz&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setVehicleClass</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">clazz</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleSetEmissionClassViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetEmissionClassViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleSetEmissionClassViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">	        Sets the emission class for this vehicle.</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetEmmisionClassSerializer</span>

<div class="viewcode-block" id="TransportationVehicleSetEmissionClassViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetEmissionClassViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;	Sets the emission class for this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the emission class for this vehicle.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;clazz&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the emmision class&quot;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleSetEmissionClassViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetEmissionClassViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetEmmisionClassSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">clazz</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;clazz&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setEmissionClass</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">clazz</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleSetWidthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetWidthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleSetWidthViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">	        Sets the width in m for this vehicle.</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetWidthSerializer</span>

<div class="viewcode-block" id="TransportationVehicleSetWidthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetWidthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;	Sets the width in m for this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the width in m for this vehicle.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the vehicle width&quot;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleSetWidthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetWidthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetWidthSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setWidth</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">width</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleSetHeightViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetHeightViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleSetHeightViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">	        Sets the height in m for this vehicle.</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetHeightSerializer</span>

<div class="viewcode-block" id="TransportationVehicleSetHeightViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetHeightViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;	Sets the height in m for this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the height in m for this vehicle.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;height&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the vehicle height&quot;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleSetHeightViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetHeightViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetHeightSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">height</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;height&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setHeight</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleMinGapViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleMinGapViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleMinGapViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">	        Sets the vehicle&#39;s minimum headway gap to the given value</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetMinGapSerializer</span>

<div class="viewcode-block" id="TransportationVehicleMinGapViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleMinGapViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;	Sets the offset (gap to front vehicle if halting) for this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the offset (gap to front vehicle if halting) for this vehicle.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;minGap&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the min Gap&quot;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleMinGapViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleMinGapViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetMinGapSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">minGap</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;minGap&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setMinGap</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">minGap</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleSetShapeClassViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetShapeClassViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleSetShapeClassViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">	        Sets the vehicle&#39;s shape class to the given value</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetShapeClassSerializer</span>

<div class="viewcode-block" id="TransportationVehicleSetShapeClassViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetShapeClassViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the shape class for this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the shape class for this vehicle.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;clazz&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the vehicle&#39;s shape class&quot;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleSetShapeClassViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetShapeClassViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetShapeClassSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">clazz</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;clazz&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setShapeClass</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span><span class="n">clazz</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleSetAccelerationViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetAccelerationViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleSetAccelerationViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">	        Sets the vehicle&#39;s wished maximum acceleration to the given value</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetAccelerationSerializer</span>

<div class="viewcode-block" id="TransportationVehicleSetAccelerationViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetAccelerationViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the vehicle&#39;s wished maximum acceleration to the given value&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the vehicle&#39;s wished maximum acceleration to the given value	&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;accel&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the vehicle&#39;s maximum acceleration&quot;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleSetAccelerationViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetAccelerationViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetAccelerationSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">accel</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;accel&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setAccel</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span><span class="n">accel</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleSetDecelerationViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetDecelerationViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleSetDecelerationViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">            Sets the vehicle&#39;s wished maximum deceleration to the given value&quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetDecelerationSerializer</span>

<div class="viewcode-block" id="TransportationVehicleSetDecelerationViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetDecelerationViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the preferred maximal deceleration in m/s^2 for this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the preferred maximal deceleration in m/s^2 for this vehicle.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;decel&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the vehicle&#39;s maximum deceleration&quot;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleSetDecelerationViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetDecelerationViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetDecelerationSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">decel</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;decel&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setDecel</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span><span class="n">decel</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleSetImperfectionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetImperfectionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleSetImperfectionViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">            Sets the vehicle&#39;s driver imperfection (sigma) to the given value	&quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetImperfectionSerializer</span>

<div class="viewcode-block" id="TransportationVehicleSetImperfectionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetImperfectionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the preferred maximal deceleration in m/s^2 for this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the vehicle&#39;s driver imperfection (sigma) to the given value	&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;imperfection&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the vehicle&#39;s driver imperfection&quot;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleSetImperfectionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetImperfectionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetImperfectionSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">imperfection</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;imperfection&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setImperfection</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span><span class="n">imperfection</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleSetTauViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetTauViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleSetTauViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">            Sets the vehicle&#39;s wished headway time to the given value.&quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetTauctionSerializer</span>

<div class="viewcode-block" id="TransportationVehicleSetTauViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetTauViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the driver&#39;s tau-parameter (reaction time or anticipation time depending on the car-following model) in s</span>
<span class="sd">            for this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the driver&#39;s tau-parameter (reaction time or anticipation time depending on the car-following model) in s for this vehicle.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;tau&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the driver&#39;s tau-parameter&quot;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleSetTauViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetTauViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetTauctionSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">tau</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;tau&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setTau</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span><span class="n">tau</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleSetTypeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetTypeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleSetTypeViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">            Sets the id of the type for the named vehicle.&quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetTypeSerializer</span>

<div class="viewcode-block" id="TransportationVehicleSetTypeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetTypeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the id of the type for the named vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the id of the type for the named vehicle.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the typeID&quot;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleSetTypeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetTypeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetTypeSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setType</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleSetViaViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetViaViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleSetViaViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">            Changes the via edges to the given edges list (to be used during subsequent rerouting calls).&quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetViaSerializer</span>

<div class="viewcode-block" id="TransportationVehicleSetViaViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetViaViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;changes the via edges to the given edges list (to be used during</span>
<span class="sd">            subsequent rerouting calls).</span>
<span class="sd">            Note: a single edgeId as argument is allowed as shorthand for a list of length 1&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Changes the via edges to the given edges list (to be used during subsequent rerouting calls).&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;list&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the edges list&quot;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleSetViaViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetViaViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetViaSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="nb">list</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setVia</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span><span class="nb">list</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleSetMaxSpeedLatViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetMaxSpeedLatViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleSetMaxSpeedLatViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">            Sets the maximum lateral speed in m/s for this vehicle.	&quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetMaxSpeedLatSerializer</span>

<div class="viewcode-block" id="TransportationVehicleSetMaxSpeedLatViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetMaxSpeedLatViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the maximum lateral speed in m/s for this vehicle.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the maximum lateral speed in m/s for this vehicle.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;speed&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide maximum lateral speed in m/s&quot;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleSetMaxSpeedLatViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetMaxSpeedLatViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetMaxSpeedLatSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">speed</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;speed&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setMaxSpeedLat</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span><span class="n">speed</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleSetMinGapLatViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetMinGapLatViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleSetMinGapLatViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">            Sets the minimum lateral gap of the vehicle at 50km/h in m&quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetMinGapSerializer</span>

<div class="viewcode-block" id="TransportationVehicleSetMinGapLatViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetMinGapLatViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the minimum lateral gap of the vehicle at 50km/h in m&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the minimum lateral gap of the vehicle at 50km/h in m&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;minGapLat&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the minimum lateral gap in m/s&quot;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleSetMinGapLatViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetMinGapLatViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetMinGapSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">MinGapLat</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;MinGapLat&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setMinGapLat</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span><span class="n">MinGapLat</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleSetLateralAlignmentViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetLateralAlignmentViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleSetLateralAlignmentViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">            Sets the preferred lateral alignment for this vehicle.&quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetLateralAlignmentSerializer</span>

<div class="viewcode-block" id="TransportationVehicleSetLateralAlignmentViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetLateralAlignmentViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the preferred lateral alignment for this vehicle.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;align&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the lateral alignment for this vehicle&quot;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleSetLateralAlignmentViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetLateralAlignmentViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetLateralAlignmentSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">align</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;align&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setLateralAlignment</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span><span class="n">align</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleSetParameterViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetParameterViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleSetParameterViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">            Sets the preferred lateral alignment for this vehicle.&quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetParameterSerializer</span>

<div class="viewcode-block" id="TransportationVehicleSetParameterViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetParameterViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the preferred lateral alignment for this vehicle.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;align&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the lateral alignment for this vehicle&quot;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleSetParameterViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetParameterViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleSetParameterSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">objID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;objID&#39;</span><span class="p">)</span>
            <span class="n">param</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;param&#39;</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setParameter</span> <span class="p">(</span><span class="n">objID</span><span class="p">,</span><span class="n">param</span><span class="p">,</span><span class="n">value</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleSetActionStepLengthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetActionStepLengthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleSetActionStepLengthViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">            Sets the current action step length for the vehicle in s. If the boolean value resetActionOffset is true, an action step is scheduled immediately for the vehicle.&quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehiclesetActionStepLengthSerializer</span>

<div class="viewcode-block" id="TransportationVehicleSetActionStepLengthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetActionStepLengthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the action step length for this vehicle. If resetActionOffset == True (default), the</span>
<span class="sd">        next action point is scheduled immediately. if If resetActionOffset == False, the interval</span>
<span class="sd">        between the last and the next action point is updated to match the given value, or if the latter</span>
<span class="sd">        is smaller than the time since the last action point, the next action follows immediately.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the preferred lateral alignment for this vehicle.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;actionStepLength&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the lateral alignment for this vehicle&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;resetActionOffset&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleSetActionStepLengthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleSetActionStepLengthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehiclesetActionStepLengthSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">actionStepLength</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;actionStepLength&#39;</span><span class="p">)</span>
            <span class="n">resetActionOffset</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;resetActionOffset&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">setParameter</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span><span class="n">actionStepLength</span><span class="p">,</span><span class="n">resetActionOffset</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationRouteGetIDListViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationRouteGetIDListViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationRouteGetIDListViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get a list of all routes in the network</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="TransportationRouteGetIDListViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationRouteGetIDListViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all objects in the network&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">route</span><span class="o">.</span><span class="n">getIDList</span> <span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns a list of all routes in the network.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;data&#39;</span><span class="p">:</span><span class="n">traciout</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div></div>



<div class="viewcode-block" id="TransportationRouteGetIDCountViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationRouteGetIDCountViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationRouteGetIDCountViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the number of all routes in the network</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="TransportationRouteGetIDCountViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationRouteGetIDCountViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all objects in the network&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">route</span><span class="o">.</span><span class="n">getIDCount</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the number of all routes in the network.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;data&#39;</span><span class="p">:</span><span class="n">traciout</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div></div>



<div class="viewcode-block" id="TransportationRouteGetEdgesViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationRouteGetEdgesViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationRouteGetEdgesViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get a list of all edges in the route.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationRouteGetSerializer</span>
<div class="viewcode-block" id="TransportationRouteGetEdgesViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationRouteGetEdgesViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns a list of all edges in the route.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;routeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a route id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationRouteGetEdgesViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationRouteGetEdgesViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationRouteGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">routeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;routeID&#39;</span><span class="p">)</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">route</span><span class="o">.</span><span class="n">getEdges</span><span class="p">(</span><span class="n">routeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>

                
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="k">class</span> <span class="nc">TransportationRouteAddViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to add a new route with the given id consisting of the given list of edge IDs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationRouteAddSerializer</span>
    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Adds a new route with the given id consisting of the given list of edge IDs.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;routeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a route id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;edges&#39;</span><span class="p">:</span> <span class="s1">&#39;provide a list of edge IDs.&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;edges_example&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;edge_1&#39;</span><span class="p">,</span> <span class="s1">&#39;edge_2&#39;</span><span class="p">]</span>
                         <span class="p">}</span>
                        <span class="p">)</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationRouteAddSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">routeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;routeID&#39;</span><span class="p">)</span>
            <span class="n">edges</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edges&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;(&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">edges</span> <span class="ow">or</span> <span class="s2">&quot;)&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;edges must be tuble&#39;</span><span class="p">,</span><span class="s1">&#39;edges_example&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;class_1&#39;</span><span class="p">,</span> <span class="s1">&#39;class_2&#39;</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">new_edges</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">edges</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Give a tuple as in the example format&#39;</span><span class="p">,</span> <span class="s1">&#39;edges_example&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;class_1&#39;</span><span class="p">,</span> <span class="s1">&#39;class_2&#39;</span><span class="p">)})</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">route</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">routeID</span><span class="p">,</span><span class="n">new_edges</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">routeID</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">new_edges</span><span class="p">)})</span>

                    
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span>


<div class="viewcode-block" id="TransportationLaneSetAllowedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneSetAllowedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneSetAllowedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to set a list of allowed vehicle classes.</span>
<span class="sd">        Use the &#39;laneID&#39; field, to provide the lane id.</span>
<span class="sd">        Use the &#39;allowedClasses&#39; field, to provide a list of allowed vehicle classes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneSetAllowedSerializer</span>
<div class="viewcode-block" id="TransportationLaneSetAllowedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneSetAllowedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets a list of allowed vehicle classes.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the lane id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;allowedClasses&#39;</span><span class="p">:</span> <span class="s1">&#39;provide a list of allowed vehicle classes, or leave empty which means means all vehicles are allowed&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;allowedClasses_example&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;class_1&quot;</span><span class="p">,</span> <span class="s2">&quot;class_2&quot;</span><span class="p">]</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationLaneSetAllowedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneSetAllowedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneSetAllowedSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>
            <span class="n">allowedClasses</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;allowedClasses&#39;</span><span class="p">)</span>
            <span class="c1"># aclasses = allowedClasses.strip(&#39;][&#39;).split(&#39;, &#39;)</span>


            <span class="k">if</span> <span class="s2">&quot;[&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowedClasses</span> <span class="ow">or</span> <span class="s2">&quot;]&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowedClasses</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;allowedClasses must be a list&#39;</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">aclasses</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span> <span class="p">(</span><span class="n">allowedClasses</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Give a list as in the example format&#39;</span><span class="p">,</span> <span class="s1">&#39;disallowedClasses_example&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;class_1&#39;</span><span class="p">,</span> <span class="s1">&#39;class_2&#39;</span><span class="p">]})</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">setAllowed</span><span class="p">(</span><span class="n">laneID</span><span class="p">,</span><span class="n">aclasses</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="n">laneID</span><span class="p">,</span> <span class="s1">&#39;allowedClasses&#39;</span><span class="p">:</span> <span class="n">allowedClasses</span><span class="p">})</span>

                    
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneSetDisallowedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneSetDisallowedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneSetDisallowedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to set a list of disallowed vehicle classes.</span>
<span class="sd">        Use the &#39;laneID&#39; field, to provide the lane id.</span>
<span class="sd">        Use the &#39;disallowedClasses&#39; field, to provide a list of disallowed vehicle classes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneSetDisallowedSerializer</span>
<div class="viewcode-block" id="TransportationLaneSetDisallowedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneSetDisallowedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets a list of disallowed vehicle classes.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the lane id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;disallowedClasses&#39;</span><span class="p">:</span> <span class="s1">&#39;provide a list of disallowed vehicle classes, or leave empty which means means all vehicles are not allowed&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;disallowedClasses_example&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;class_1&#39;</span><span class="p">,</span> <span class="s1">&#39;class_2&#39;</span><span class="p">]</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationLaneSetDisallowedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneSetDisallowedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneSetDisallowedSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>
            <span class="n">disallowedClasses</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;disallowedClasses&#39;</span><span class="p">)</span>
            <span class="c1"># dclasses = disallowedClasses.strip (&#39;][&#39;).split (&#39;, &#39;)</span>
            <span class="k">if</span> <span class="s2">&quot;[&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">disallowedClasses</span> <span class="ow">or</span> <span class="s2">&quot;]&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">disallowedClasses</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;disallowedClasses must be a list&#39;</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">dclasses</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span> <span class="p">(</span><span class="n">disallowedClasses</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Give a list as in the example format&#39;</span><span class="p">,</span> <span class="s1">&#39;disallowedClasses_example&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;class_1&#39;</span><span class="p">,</span> <span class="s1">&#39;class_2&#39;</span><span class="p">]</span> <span class="p">})</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">setDisallowed</span> <span class="p">(</span><span class="n">laneID</span><span class="p">,</span> <span class="n">dclasses</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="n">laneID</span><span class="p">,</span> <span class="s1">&#39;disallowedClasses&#39;</span><span class="p">:</span> <span class="n">dclasses</span><span class="p">})</span>

                    
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneSetLengthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneSetLengthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneSetLengthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to set the length of the lane.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneSetLengthSerializer</span>
<div class="viewcode-block" id="TransportationLaneSetLengthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneSetLengthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the length of the lane in m.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the lane id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;length&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the lane length&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationLaneSetLengthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneSetLengthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneSetLengthSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>
            <span class="n">length</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;length&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">setLength</span><span class="p">(</span><span class="n">laneID</span><span class="p">,</span><span class="n">length</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">laneID</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">length</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneSetMaxSpeedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneSetMaxSpeedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneSetMaxSpeedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to set a new maximum allowed speed on the lane in m/s.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneSetMaxSpeedSerializer</span>
<div class="viewcode-block" id="TransportationLaneSetMaxSpeedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneSetMaxSpeedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets a new maximum allowed speed on the lane in m/s.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the lane id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;speed&#39;</span><span class="p">:</span> <span class="s1">&#39;provide a maximum allowed speed on the lane in m/s&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationLaneSetMaxSpeedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneSetMaxSpeedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneSetMaxSpeedSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>
            <span class="n">speed</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;speed&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">setMaxSpeed</span> <span class="p">(</span><span class="n">laneID</span><span class="p">,</span> <span class="n">speed</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">laneID</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">speed</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPersonAddViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonAddViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPersonAddViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Inserts a new person to the simulation at the given edge, position and time (in s).</span>
<span class="sd">        This function should be followed by appending Stages or the person will immediately vanish on departure.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonAddSerializer</span>
<div class="viewcode-block" id="TransportationPersonAddViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonAddViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Inserts a new person to the simulation at the given edge, position and</span>
<span class="sd">        time (in s). This function should be followed by appending Stages or the person</span>
<span class="sd">        will immediately vanish on departure.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Inserts a new person to the simulation at the given edge, position and&quot;</span>
                            <span class="s2">&quot;time (in s). This function should be followed by appending Stages or the person&quot;</span>
                            <span class="s2">&quot;will immediately vanish on departure.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;PersonID&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the person id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeId&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the edge id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;pos&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;depart&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPersonAddViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonAddViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonAddSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">personID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;personID&#39;</span><span class="p">)</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pos&#39;</span><span class="p">)</span>
            <span class="n">depart</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;depart&#39;</span><span class="p">)</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">person</span><span class="o">.</span><span class="n">add</span> <span class="p">(</span><span class="n">personID</span><span class="p">,</span><span class="n">edgeID</span><span class="p">,</span><span class="n">pos</span><span class="p">,</span><span class="n">depart</span><span class="p">,</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPersonAppendDrivingStageViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonAppendDrivingStageViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPersonAppendDrivingStageViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Appends a driving stage to the plan of the given person</span>
<span class="sd">        The lines parameter should be a space-separated list of line ids</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonAppendDrivingStageSerializer</span>
<div class="viewcode-block" id="TransportationPersonAppendDrivingStageViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonAppendDrivingStageViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Appends a driving stage to the plan of the given person</span>
<span class="sd">        The lines parameter should be a space-separated list of line ids</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Appends a driving stage to the plan of the given person&quot;</span>
                                        <span class="s2">&quot;The lines parameter should be a space-separated list of line ids&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;PersonID&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the person id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;toEdge&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the edge id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;lines&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;stopID&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPersonAppendDrivingStageViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonAppendDrivingStageViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonAppendDrivingStageSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">personID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;personID&#39;</span><span class="p">)</span>
            <span class="n">toEdge</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;toEdge&#39;</span><span class="p">)</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;lines&#39;</span><span class="p">)</span>
            <span class="n">stopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;stopID&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">person</span><span class="o">.</span><span class="n">appendDrivingStage</span> <span class="p">(</span><span class="n">personID</span><span class="p">,</span><span class="n">toEdge</span><span class="p">,</span><span class="n">lines</span><span class="p">,</span><span class="n">stopID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPersonAppendWaitingStageViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonAppendWaitingStageViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPersonAppendWaitingStageViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Appends a waiting stage with duration in s to the plan of the given person</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonAppendWaitingStageSerializer</span>
<div class="viewcode-block" id="TransportationPersonAppendWaitingStageViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonAppendWaitingStageViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Appends a waiting stage with duration in s to the plan of the given person</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Appends a waiting stage with duration in s to the plan of the given person&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;PersonID&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the person id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;description&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;stopID&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPersonAppendWaitingStageViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonAppendWaitingStageViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonAppendWaitingStageSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">personID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;personID&#39;</span><span class="p">)</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;duration&#39;</span><span class="p">)</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span>
            <span class="n">stopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;stopID&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">person</span><span class="o">.</span><span class="n">appendWaitingStage</span> <span class="p">(</span><span class="n">personID</span><span class="p">,</span><span class="n">duration</span><span class="p">,</span><span class="n">description</span><span class="p">,</span><span class="n">stopID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationPersonAppendWalkingStageViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonAppendWalkingStageViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPersonAppendWalkingStageViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Appends a walking stage to the plan of the given person</span>
<span class="sd">        The walking speed can either be specified, computed from the duration parameter (in s) or taken from the</span>
<span class="sd">        type of the person</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonAppendWalkingStageSerializer</span>

<div class="viewcode-block" id="TransportationPersonAppendWalkingStageViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonAppendWalkingStageViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Appends a walking stage to the plan of the given person&quot;</span>
                                        <span class="s2">&quot;The walking speed can either be specified, computed from the duration parameter (in s) or taken from the&quot;</span>
                                        <span class="s2">&quot;type of the person.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;personID&#39;</span><span class="p">:</span> <span class="s1">&#39;provide a person id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;edges&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;edge_1&#39;</span><span class="p">,</span> <span class="s1">&#39;edge_2&#39;</span><span class="p">],</span>
                          <span class="s1">&#39;arrivalPos&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;duration&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;speed&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;stopID&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationPersonAppendWalkingStageViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonAppendWalkingStageViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonAppendWalkingStageSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">personID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;personID&#39;</span><span class="p">)</span>
            <span class="n">edges</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;edges&#39;</span><span class="p">)</span>
            <span class="n">arrivalPos</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;arrivalPos&#39;</span><span class="p">)</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;duration&#39;</span><span class="p">)</span>
            <span class="n">speed</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;speed&#39;</span><span class="p">)</span>
            <span class="n">stopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;stopID&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;[&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">edges</span> <span class="ow">or</span> <span class="s2">&quot;]&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;disallowedClasses must be a list&#39;</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">dclasses</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span> <span class="p">(</span><span class="n">edges</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Give a list as in the example format&#39;</span><span class="p">,</span>
                                      <span class="s1">&#39;edges&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;edges_1&#39;</span><span class="p">,</span> <span class="s1">&#39;edges_2&#39;</span><span class="p">]})</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">traci</span><span class="o">.</span><span class="n">person</span><span class="o">.</span><span class="n">appendWalkingStage</span> <span class="p">(</span><span class="n">personID</span><span class="p">,</span> <span class="n">edges</span><span class="p">,</span> <span class="n">arrivalPos</span><span class="p">,</span><span class="n">duration</span><span class="p">,</span><span class="n">speed</span><span class="p">,</span><span class="n">stopID</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPersonRemoveStageViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonRemoveStageViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPersonRemoveStageViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">       Removes the nth next stage</span>
<span class="sd">        nextStageIndex must be lower then value of getRemainingStages(personID)</span>
<span class="sd">        nextStageIndex 0 immediately aborts the current stage and proceeds to the next stage</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonRemoveStageSerializer</span>
<div class="viewcode-block" id="TransportationPersonRemoveStageViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonRemoveStageViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Removes the nth next stage</span>
<span class="sd">        nextStageIndex must be lower then value of getRemainingStages(personID)</span>
<span class="sd">        nextStageIndex 0 immediately aborts the current stage and proceeds to the next stage</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Removes the nth next stage&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;PersonID&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the person id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;nextStageIndex&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPersonRemoveStageViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonRemoveStageViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonRemoveStageSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">personID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;personID&#39;</span><span class="p">)</span>
            <span class="n">nextStageIndex</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;nextStageIndex&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">person</span><span class="o">.</span><span class="n">removeStage</span> <span class="p">(</span><span class="n">personID</span><span class="p">,</span><span class="n">nextStageIndex</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPersonRemoveStagesViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonRemoveStagesViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPersonRemoveStagesViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Removes all stages of the person. If no new phases are appended,</span>
<span class="sd">        the person will be removed from the simulation in the next simulationStep().</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonRemoveStageSerializer</span>
<div class="viewcode-block" id="TransportationPersonRemoveStagesViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonRemoveStagesViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Removes all stages of the person. If no new phases are appended,</span>
<span class="sd">        the person will be removed from the simulation in the next simulationStep().</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Removes all stages of the person.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;PersonID&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the person id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPersonRemoveStagesViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonRemoveStagesViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonRemoveStagesSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">personID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;personID&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">person</span><span class="o">.</span><span class="n">removeStages</span> <span class="p">(</span><span class="n">personID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPersonRerouteTraveltimeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonRerouteTraveltimeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPersonRerouteTraveltimeViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Computes a new route to the current destination that minimizes travel time.</span>
<span class="sd">         The assumed values for each edge in the network can be customized in various ways.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonRerouteTraveltimeSerializer</span>
<div class="viewcode-block" id="TransportationPersonRerouteTraveltimeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonRerouteTraveltimeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes a new route to the current destination that minimizes travel time.</span>
<span class="sd">         The assumed values for each edge in the network can be customized in various ways.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Computes a new route to the current destination that minimizes travel time&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;PersonID&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the person id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPersonRerouteTraveltimeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonRerouteTraveltimeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonRerouteTraveltimeSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">personID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;personID&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">person</span><span class="o">.</span><span class="n">rerouteTraveltime</span> <span class="p">(</span><span class="n">personID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPersonMoveToXYViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonMoveToXYViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPersonMoveToXYViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Place person at the given x,y coordinates and force it&#39;s angle to</span>
<span class="sd">        the given value (for drawing).</span>
<span class="sd">        If the angle is set to INVALID_DOUBLE_VALUE, the vehicle assumes the</span>
<span class="sd">        natural angle of the edge on which it is driving.</span>
<span class="sd">        If keepRoute is set to 1, the closest position</span>
<span class="sd">        within the existing route is taken. If keepRoute is set to 0, the vehicle may move to</span>
<span class="sd">        any edge in the network but it&#39;s route then only consists of that edge.</span>
<span class="sd">        If keepRoute is set to 2 the person has all the freedom of keepRoute=0</span>
<span class="sd">        but in addition to that may even move outside the road network.</span>
<span class="sd">        edgeID is an optional placement hint to resolve ambiguities.</span>
<span class="sd">        The command fails if no suitable target position is found within the</span>
<span class="sd">        distance given by matchThreshold.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonMoveToXYSerializer</span>
<div class="viewcode-block" id="TransportationPersonMoveToXYViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonMoveToXYViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Place person at the given x,y coordinates and force it&#39;s angle to</span>
<span class="sd">        the given value (for drawing).</span>
<span class="sd">        If the angle is set to INVALID_DOUBLE_VALUE, the vehicle assumes the</span>
<span class="sd">        natural angle of the edge on which it is driving.</span>
<span class="sd">        If keepRoute is set to 1, the closest position</span>
<span class="sd">        within the existing route is taken. If keepRoute is set to 0, the vehicle may move to</span>
<span class="sd">        any edge in the network but it&#39;s route then only consists of that edge.</span>
<span class="sd">        If keepRoute is set to 2 the person has all the freedom of keepRoute=0</span>
<span class="sd">        but in addition to that may even move outside the road network.</span>
<span class="sd">        edgeID is an optional placement hint to resolve ambiguities.</span>
<span class="sd">        The command fails if no suitable target position is found within the</span>
<span class="sd">        distance given by matchThreshold.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Moves the person to a new position after normal movements have taken place.&quot;</span>
                                        <span class="s2">&quot; Also forces the angle of the person to the given value (navigational angle in degree).&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;PersonID&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the person id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span><span class="s1">&#39;provide the edge id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="s1">&#39;provide the x position&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="s1">&#39;provide the y position&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;angle&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;keepRoute&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;matchThreshold&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPersonMoveToXYViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonMoveToXYViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonMoveToXYSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">personID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;personID&#39;</span><span class="p">)</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
            <span class="n">angle</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;angle&#39;</span><span class="p">)</span>
            <span class="n">keepRoute</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;keepRoute&#39;</span><span class="p">)</span>
            <span class="n">matchThreshold</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;matchThreshold&#39;</span><span class="p">)</span>


            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">person</span><span class="o">.</span><span class="n">moveToXY</span> <span class="p">(</span><span class="n">personID</span><span class="p">,</span> <span class="n">edgeID</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">keepRoute</span><span class="p">,</span> <span class="n">matchThreshold</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPersonSetHeightViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetHeightViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPersonSetHeightViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the height in m for this person.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonSetHeightSerializer</span>
<div class="viewcode-block" id="TransportationPersonSetHeightViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetHeightViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the height in m for this person.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the height in m for this person.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;PersonID&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the person id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;height&#39;</span><span class="p">:</span><span class="s1">&#39;provide the height in m&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPersonSetHeightViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetHeightViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonSetHeightSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">personID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;personID&#39;</span><span class="p">)</span>
            <span class="n">height</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;height&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">person</span><span class="o">.</span><span class="n">setHeight</span><span class="p">(</span><span class="n">personID</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPersonSetLengthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetLengthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPersonSetLengthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the length in m for the given person.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonSetLengthSerializer</span>
<div class="viewcode-block" id="TransportationPersonSetLengthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetLengthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the length in m for the given person.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the length in m for the given person.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;PersonID&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the person id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;length&#39;</span><span class="p">:</span><span class="s1">&#39;provide the length in m&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPersonSetLengthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetLengthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonSetLengthSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">personID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;personID&#39;</span><span class="p">)</span>
            <span class="n">length</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;length&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">person</span><span class="o">.</span><span class="n">setLength</span><span class="p">(</span><span class="n">personID</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPersonSetMinGapViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetMinGapViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPersonSetMinGapViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the offset (gap to front person if halting) for this vehicle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonSetMinGapSerializer</span>
<div class="viewcode-block" id="TransportationPersonSetMinGapViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetMinGapViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the offset (gap to front person if halting) for this vehicle.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the offset (gap to front person if halting) for this vehicle.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;PersonID&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the person id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;minGap&#39;</span><span class="p">:</span><span class="s1">&#39;provide the gap to front person if halting&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPersonSetMinGapViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetMinGapViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonSetMinGapSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">personID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;personID&#39;</span><span class="p">)</span>
            <span class="n">minGap</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;minGap&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">person</span><span class="o">.</span><span class="n">setMinGap</span><span class="p">(</span><span class="n">personID</span><span class="p">,</span> <span class="n">minGap</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPersonSetSpeedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetSpeedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPersonSetSpeedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the maximum speed in m/s for the named person for subsequent step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonSetSpeedSerializer</span>
<div class="viewcode-block" id="TransportationPersonSetSpeedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetSpeedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the maximum speed in m/s for the named person for subsequent step.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the maximum speed in m/s for the named person for subsequent step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;PersonID&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the person id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;speed&#39;</span><span class="p">:</span><span class="s1">&#39;provide the maximum speed in m/s &#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPersonSetSpeedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetSpeedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonSetSpeedSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">personID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;personID&#39;</span><span class="p">)</span>
            <span class="n">speed</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;speed&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">person</span><span class="o">.</span><span class="n">setSpeed</span><span class="p">(</span><span class="n">personID</span><span class="p">,</span> <span class="n">speed</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPersonSetTypeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetTypeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPersonSetTypeViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the id of the type for the named person.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonSetTypeSerializer</span>
<div class="viewcode-block" id="TransportationPersonSetTypeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetTypeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the id of the type for the named person.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the id of the type for the named person.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;PersonID&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the person id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span><span class="s1">&#39;provide the id of the type&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPersonSetTypeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetTypeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonSetTypeSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">personID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;personID&#39;</span><span class="p">)</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">person</span><span class="o">.</span><span class="n">setType</span><span class="p">(</span><span class="n">personID</span><span class="p">,</span> <span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPersonSetWidthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetWidthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPersonSetWidthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the width in m for this person.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonSetWidthSerializer</span>
<div class="viewcode-block" id="TransportationPersonSetWidthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetWidthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the width in m for this person.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the width in m for this person.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;PersonID&#39;</span><span class="p">:</span> <span class="s1">&#39;provide the person id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;width&#39;</span><span class="p">:</span><span class="s1">&#39;provide the width in m&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPersonSetWidthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetWidthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonSetWidthSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">personID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;personID&#39;</span><span class="p">)</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">person</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="n">personID</span><span class="p">,</span> <span class="n">width</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationPersonSetColorViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetColorViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPersonSetColorViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>

<span class="sd">          Sets the color for the vehicle with the given ID, i.e. (255,0,0) for the color red.</span>
<span class="sd">            The fourth component (alpha) is optional.</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonSetColorSerializer</span>

<div class="viewcode-block" id="TransportationPersonSetColorViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetColorViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the color for the vehicle with the given ID, i.e. (255,0,0) for the color red.</span>
<span class="sd">            The fourth component (alpha) is optional.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the color for the vehicle with the given ID, i.e. (255,0,0) for the color red.&quot;</span>
                                        <span class="s2">&quot;The fourth component (alpha) is optional.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;personID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a person id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide the vehicle color i.e. (255,0,0)&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationPersonSetColorViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPersonSetColorViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPersonSetColorSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">personID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;personID&#39;</span><span class="p">)</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">person</span><span class="o">.</span><span class="n">setColor</span> <span class="p">(</span><span class="n">personID</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>



<div class="viewcode-block" id="TransportationVehicleTypeSetLengthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetLengthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeSetLengthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">       Sets the length in m of the vehicles of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetLengthSerializer</span>
<div class="viewcode-block" id="TransportationVehicleTypeSetLengthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetLengthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the length in m of the vehicles of this type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the length in m of the vehicles of this type.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the vehicle&#39;s type&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;length&#39;</span><span class="p">:</span><span class="s1">&#39;provide the length in m&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleTypeSetLengthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetLengthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetLengthSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="n">length</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;length&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">setLength</span><span class="p">(</span><span class="n">typeID</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleTypeSetMaxSpeedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetMaxSpeedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeSetMaxSpeedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the maximum speed in m/s of vehicles of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetMaxSpeedSerializer</span>
<div class="viewcode-block" id="TransportationVehicleTypeSetMaxSpeedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetMaxSpeedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the maximum speed in m/s of vehicles of this type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the maximum speed in m/s of vehicles of this type.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the vehicle&#39;s type&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;speed&#39;</span><span class="p">:</span><span class="s1">&#39;provide speed in m/s&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleTypeSetMaxSpeedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetMaxSpeedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetMaxSpeedSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="n">speed</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;speed&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">setMaxSpeed</span><span class="p">(</span><span class="n">typeID</span><span class="p">,</span> <span class="n">speed</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleTypeSetVehicleClassViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetVehicleClassViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeSetVehicleClassViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the class of vehicles of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetVehicleClassSerializer</span>
<div class="viewcode-block" id="TransportationVehicleTypeSetVehicleClassViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetVehicleClassViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the class of vehicles of this type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the class of vehicles of this type.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the vehicle&#39;s type&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;clazz&#39;</span><span class="p">:</span><span class="s1">&#39;provide the class&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleTypeSetVehicleClassViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetVehicleClassViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetVehicleClassSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="n">clazz</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;clazz&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">setVehicleClass</span><span class="p">(</span><span class="n">typeID</span><span class="p">,</span> <span class="n">clazz</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleTypeSetSpeedFactorViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetSpeedFactorViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeSetSpeedFactorViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the speed factor of vehicles of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetSpeedFactorSerializer</span>
<div class="viewcode-block" id="TransportationVehicleTypeSetSpeedFactorViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetSpeedFactorViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the speed factor of vehicles of this type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the speed factor of vehicles of this type.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the vehicle&#39;s type&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;factor&#39;</span><span class="p">:</span><span class="s1">&#39;provide the speed factor&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleTypeSetSpeedFactorViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetSpeedFactorViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetSpeedFactorSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="n">factor</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;factor&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">setSpeedFactor</span><span class="p">(</span><span class="n">typeID</span><span class="p">,</span> <span class="n">factor</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleTypeSetSpeedDeviationViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetSpeedDeviationViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeSetSpeedDeviationViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the maximum speed deviation of vehicles of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetSpeedDeviationSerializer</span>
<div class="viewcode-block" id="TransportationVehicleTypeSetSpeedDeviationViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetSpeedDeviationViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the maximum speed deviation of vehicles of this type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the maximum speed deviation of vehicles of this type.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the vehicle&#39;s type&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;deviation&#39;</span><span class="p">:</span><span class="s1">&#39;provide the speed deviation&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleTypeSetSpeedDeviationViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetSpeedDeviationViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetSpeedDeviationSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="n">deviation</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;deviation&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">setSpeedDeviation</span><span class="p">(</span><span class="n">typeID</span><span class="p">,</span> <span class="n">deviation</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleTypeSetEmissionClassViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetEmissionClassViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeSetEmissionClassViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the emission class of vehicles of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetEmissionClassSerializer</span>
<div class="viewcode-block" id="TransportationVehicleTypeSetEmissionClassViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetEmissionClassViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Sets the emission class of vehicles of this type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the emission class of vehicles of this type.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the vehicle&#39;s type&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;clazz&#39;</span><span class="p">:</span><span class="s1">&#39;provide the emission class&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleTypeSetEmissionClassViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetEmissionClassViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetEmissionClassSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="n">clazz</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;clazz&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">setEmissionClass</span><span class="p">(</span><span class="n">typeID</span><span class="p">,</span> <span class="n">clazz</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeSetWidthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetWidthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeSetWidthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Information</span>

<span class="sd">    Sets the width in m of vehicles of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetWidthSerializer</span>
<div class="viewcode-block" id="TransportationVehicleTypeSetWidthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetWidthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Sets the width in m of vehicles of this type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the width in m of vehicles of this type.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the vehicle&#39;s type&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;width&#39;</span><span class="p">:</span><span class="s1">&#39;provide the width in m&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleTypeSetWidthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetWidthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetWidthSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="n">typeID</span><span class="p">,</span> <span class="n">width</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeSetHeightViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetHeightViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeSetHeightViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">       Sets the height in m of vehicles of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetHeightSerializer</span>
<div class="viewcode-block" id="TransportationVehicleTypeSetHeightViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetHeightViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Sets the height in m of vehicles of this type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the height in m of vehicles of this type.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the vehicle&#39;s type&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;height&#39;</span><span class="p">:</span><span class="s1">&#39;provide the height in m&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleTypeSetHeightViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetHeightViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetHeightSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="n">height</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;height&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">setHeight</span><span class="p">(</span><span class="n">typeID</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleTypeSetMinGapViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetMinGapViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeSetMinGapViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">       Sets the offset (gap to front vehicle if halting) of vehicles of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetMinGapSerializer</span>
<div class="viewcode-block" id="TransportationVehicleTypeSetMinGapViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetMinGapViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Sets the offset (gap to front vehicle if halting) of vehicles of this type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the offset (gap to front vehicle if halting) of vehicles of this type.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the vehicle&#39;s type&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;minGap&#39;</span><span class="p">:</span><span class="s1">&#39;provide the gap to front vehicle if halting&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleTypeSetMinGapViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetMinGapViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetMinGapSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="n">minGap</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;minGap&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">setMinGap</span><span class="p">(</span><span class="n">typeID</span><span class="p">,</span> <span class="n">minGap</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleTypeSetShapeClassViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetShapeClassViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeSetShapeClassViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the shape class of vehicles of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetShapeClassSerializer</span>
<div class="viewcode-block" id="TransportationVehicleTypeSetShapeClassViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetShapeClassViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Sets the shape class of vehicles of this type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the shape class of vehicles of this type.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the vehicle&#39;s type&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;clazz&#39;</span><span class="p">:</span><span class="s1">&#39;provide the shape class&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleTypeSetShapeClassViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetShapeClassViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetShapeClassSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="n">clazz</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;clazz&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">setShapeClass</span><span class="p">(</span><span class="n">typeID</span><span class="p">,</span> <span class="n">clazz</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleTypeSetAccelerationViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetAccelerationViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeSetAccelerationViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the maximum acceleration in m/s^2 of vehicles of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetShapeClassSerializer</span>
<div class="viewcode-block" id="TransportationVehicleTypeSetAccelerationViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetAccelerationViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Sets the maximum acceleration in m/s^2 of vehicles of this type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the maximum acceleration in m/s^2 of vehicles of this type.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the vehicle&#39;s type&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;accel&#39;</span><span class="p">:</span><span class="s1">&#39;provide the maximum acceleration&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleTypeSetAccelerationViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetAccelerationViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetAccelerationSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="n">accel</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;accel&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">setAccel</span><span class="p">(</span><span class="n">typeID</span><span class="p">,</span> <span class="n">accel</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleTypeSetDecelerationViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetDecelerationViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeSetDecelerationViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the maximal comfortable deceleration in m/s^2 of vehicles of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetDecelerationSerializer</span>
<div class="viewcode-block" id="TransportationVehicleTypeSetDecelerationViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetDecelerationViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Sets the maximal comfortable deceleration in m/s^2 of vehicles of this type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the maximal comfortable deceleration in m/s^2 of vehicles of this type.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the vehicle&#39;s type&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;decel&#39;</span><span class="p">:</span><span class="s1">&#39;provide the maximum deceleration&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleTypeSetDecelerationViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetDecelerationViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetDecelerationSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="n">decel</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;decel&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">setDecel</span><span class="p">(</span><span class="n">typeID</span><span class="p">,</span> <span class="n">decel</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleTypeSetImperfectionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetImperfectionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeSetImperfectionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the driver imperfection of vehicles of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetImperfectionSerializer</span>
<div class="viewcode-block" id="TransportationVehicleTypeSetImperfectionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetImperfectionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Sets the driver imperfection of vehicles of this type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the driver imperfection of vehicles of this type.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the vehicle&#39;s type&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;imperfection&#39;</span><span class="p">:</span><span class="s1">&#39;provide the driver imperfection&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleTypeSetImperfectionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetImperfectionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetImperfectionSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="n">imperfection</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;imperfection&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">setImperfection</span><span class="p">(</span><span class="n">typeID</span><span class="p">,</span> <span class="n">imperfection</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleTypeSetTauViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetTauViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeSetTauViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the driver&#39;s tau-parameter (reaction time or anticipation time depending on the car-following model) in s</span>
<span class="sd">        for vehicles of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetTauSerializer</span>
<div class="viewcode-block" id="TransportationVehicleTypeSetTauViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetTauViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Sets the driver&#39;s tau-parameter (reaction time or anticipation time depending on the car-following model) in s</span>
<span class="sd">        for vehicles of this type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the driver&#39;s tau-parameter (reaction time or anticipation time depending on the car-following model) in s&quot;</span>
                                        <span class="s2">&quot;for vehicles of this type.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the vehicle&#39;s type&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;tau&#39;</span><span class="p">:</span><span class="s2">&quot;provide the driver&#39;s tau-parameter&quot;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleTypeSetTauViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetTauViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetTauSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="n">tau</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tau&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">setTau</span><span class="p">(</span><span class="n">typeID</span><span class="p">,</span> <span class="n">tau</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleTypeSetMaxSpeedLatViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetMaxSpeedLatViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeSetMaxSpeedLatViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the maximum lateral speed of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetMaxSpeedLatSerializer</span>
<div class="viewcode-block" id="TransportationVehicleTypeSetMaxSpeedLatViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetMaxSpeedLatViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Sets the maximum lateral speed of this type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the maximum lateral speed of this type.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the vehicle&#39;s type&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;speed&#39;</span><span class="p">:</span><span class="s2">&quot;provide the  maximum lateral speed &quot;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleTypeSetMaxSpeedLatViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetMaxSpeedLatViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetMaxSpeedLatSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="n">speed</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;speed&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">setMaxSpeedLat</span><span class="p">(</span><span class="n">typeID</span><span class="p">,</span> <span class="n">speed</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleTypeSetMinGapLatViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetMinGapLatViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeSetMinGapLatViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the minimum lateral gap at 50km/h of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetMinGapLatSerializer</span>
<div class="viewcode-block" id="TransportationVehicleTypeSetMinGapLatViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetMinGapLatViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Sets the minimum lateral gap at 50km/h of this type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the minimum lateral gap at 50km/h of this type.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the vehicle&#39;s type&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;minGapLat&#39;</span><span class="p">:</span><span class="s2">&quot;provide the  minimum lateral gap &quot;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleTypeSetMinGapLatViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetMinGapLatViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetMinGapLatSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="n">minGapLat</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;minGapLat&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">setMinGapLat</span><span class="p">(</span><span class="n">typeID</span><span class="p">,</span> <span class="n">minGapLat</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleTypeSetLateralAlignmentViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetLateralAlignmentViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeSetLateralAlignmentViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the preferred lateral alignment of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetLateralAlignmentSerializer</span>
<div class="viewcode-block" id="TransportationVehicleTypeSetLateralAlignmentViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetLateralAlignmentViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Sets the preferred lateral alignment of this type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the preferred lateral alignment of this type.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the vehicle&#39;s type&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;latAlignment&#39;</span><span class="p">:</span><span class="s2">&quot;provide the preferred lateral alignment &quot;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleTypeSetLateralAlignmentViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetLateralAlignmentViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetLateralAlignmentSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="n">latAlignment</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;latAlignment&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">setLateralAlignment</span><span class="p">(</span><span class="n">typeID</span><span class="p">,</span> <span class="n">latAlignment</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleTypeCopyViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeCopyViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeCopyViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Duplicates the vType with ID origTypeID. The newly created vType is assigned the ID newTypeID</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeCopySerializer</span>
<div class="viewcode-block" id="TransportationVehicleTypeCopyViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeCopyViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Duplicates the vType with ID origTypeID. The newly created vType is assigned the ID newTypeID</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Duplicates the vType with ID origTypeID. The newly created vType is assigned the ID newTypeID.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;origTypeID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the vType&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;newTypeID&#39;</span><span class="p">:</span><span class="s2">&quot;provide the new vType &quot;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleTypeCopyViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeCopyViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeCopySerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">origTypeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;origTypeID&#39;</span><span class="p">)</span>
            <span class="n">newTypeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;newTypeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">origTypeID</span><span class="p">,</span> <span class="n">newTypeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleTypeActionStepLengthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeActionStepLengthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeActionStepLengthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the action step length for this vehicle. If resetActionOffset == True (default), the</span>
<span class="sd">        next action point is scheduled immediately. if If resetActionOffset == False, the interval</span>
<span class="sd">        between the last and the next action point is updated to match the given value, or if the latter</span>
<span class="sd">        is smaller than the time since the last action point, the next action follows immediately.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetActionStepLengthSerializer</span>
<div class="viewcode-block" id="TransportationVehicleTypeActionStepLengthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeActionStepLengthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Sets the action step length for this vehicle. If resetActionOffset == True (default), the</span>
<span class="sd">        next action point is scheduled immediately. if If resetActionOffset == False, the interval</span>
<span class="sd">        between the last and the next action point is updated to match the given value, or if the latter</span>
<span class="sd">        is smaller than the time since the last action point, the next action follows immediately.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the current action step length for the vehicle type in s.&quot;</span>
                                        <span class="s2">&quot; If the boolean value resetActionOffset is true, an action step is scheduled immediately for all vehicles of the type.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the vehicle id&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;actionStepLength&#39;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;resetActionOffset&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationVehicleTypeActionStepLengthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeActionStepLengthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetActionStepLengthSerializer</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">actionStepLength</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;actionStepLength&#39;</span><span class="p">)</span>
            <span class="n">resetActionOffset</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;resetActionOffset&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">setActionStepLength</span><span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">actionStepLength</span><span class="p">,</span><span class="n">resetActionOffset</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleTypeSetColorViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetColorViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeSetColorViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Information</span>
<span class="sd">            Sets the color of this type.</span>

<span class="sd">        &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetColorSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeSetColorViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetColorViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the color of this type.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the color of this type.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;personID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a person id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide the vehicle color i.e. (255,0,0)&#39;</span><span class="p">,</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeSetColorViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeSetColorViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeSetColorSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">setColor</span> <span class="p">(</span><span class="n">vehID</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationRouteAddViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationRouteAddViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationRouteAddViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Adds a new route with the given id consisting of the given list of edge IDs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationRouteAddSerializer</span>

<div class="viewcode-block" id="TransportationRouteAddViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationRouteAddViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a new route with the given id consisting of the given list of edge IDs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Adds a new route with the given id consisting of the given list of edge IDs.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;routeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a route id&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;edges&#39;</span><span class="p">:</span> <span class="s1">&#39;provide a list of edges&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;edges_example&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">]</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationRouteAddViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationRouteAddViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationRouteAddSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">routeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;routeID&#39;</span><span class="p">)</span>
            <span class="n">edges</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;edges&#39;</span><span class="p">)</span>
            <span class="c1"># dclasses = disallowedClasses.strip (&#39;][&#39;).split (&#39;, &#39;)</span>
            <span class="k">if</span> <span class="s2">&quot;[&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">edges</span> <span class="ow">or</span> <span class="s2">&quot;]&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;edges must be a list&#39;</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">dclasses</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span> <span class="p">(</span><span class="n">edges</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Give a list as in the example format&#39;</span><span class="p">,</span>
                                      <span class="s1">&#39;edges_example&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">]})</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">add</span> <span class="p">(</span><span class="n">routeID</span><span class="p">,</span> <span class="n">dclasses</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPoIStateSetTypeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPoIStateSetTypeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPoIStateSetTypeViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the (abstract) type of the poi.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPoIStateSetTypeSerializer</span>
<div class="viewcode-block" id="TransportationPoIStateSetTypeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPoIStateSetTypeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Sets the (abstract) type of the poi.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the (abstract) type of the poi.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;poiID&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the poi id&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;poiType&#39;</span><span class="p">:</span><span class="s2">&quot;Provide the poi type&quot;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPoIStateSetTypeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPoIStateSetTypeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPoIStateSetTypeSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">poiID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;poiID&#39;</span><span class="p">)</span>
            <span class="n">poiType</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;poiType&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">poi</span><span class="o">.</span><span class="n">setType</span><span class="p">(</span><span class="n">poiID</span><span class="p">,</span> <span class="n">poiType</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPoIStateSetPositionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPoIStateSetPositionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPoIStateSetPositionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the position coordinates of the poi.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPoIStateSetPositionSerializer</span>
<div class="viewcode-block" id="TransportationPoIStateSetPositionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPoIStateSetPositionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Sets the position coordinates of the poi.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Sets the position coordinates of the poi.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;poiID&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the poi id&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the poi x position&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="s2">&quot;Provide the poi y position&quot;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPoIStateSetPositionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPoIStateSetPositionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPoIStateSetPositionSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">poiID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;poiID&#39;</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">poi</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="n">poiID</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPoIStateSetWidthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPoIStateSetWidthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPoIStateSetWidthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the width of the poi.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPoIStateSetWidthSerializer</span>
<div class="viewcode-block" id="TransportationPoIStateSetWidthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPoIStateSetWidthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the width of the poi.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span><span class="s1">&#39;Sets the width of the poi.&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;poiID&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the poi id&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the poi&#39;s width&quot;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPoIStateSetWidthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPoIStateSetWidthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPoIStateSetWidthSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">poiID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;poiID&#39;</span><span class="p">)</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">poi</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="n">poiID</span><span class="p">,</span> <span class="n">width</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPoIStateSetHeightViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPoIStateSetHeightViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPoIStateSetHeightViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the height of the poi.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPoIStateSetHeightSerializer</span>
<div class="viewcode-block" id="TransportationPoIStateSetHeightViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPoIStateSetHeightViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the height of the poi.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span><span class="s1">&#39;Sets the height of the poi.&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;poiID&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the poi id&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;height&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the poi&#39;s width&quot;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPoIStateSetHeightViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPoIStateSetHeightViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPoIStateSetHeightSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">poiID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;poiID&#39;</span><span class="p">)</span>
            <span class="n">height</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;height&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">poi</span><span class="o">.</span><span class="n">setHeight</span><span class="p">(</span><span class="n">poiID</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPoIStateSetAngleViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPoIStateSetAngleViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPoIStateSetAngleViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the angle of the poi.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPoIStateSetAngleSerializer</span>
<div class="viewcode-block" id="TransportationPoIStateSetAngleViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPoIStateSetAngleViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the angle of the poi.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span><span class="s1">&#39;Sets the angle of the poi.&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;poiID&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the poi id&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;height&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the poi&#39;s width&quot;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPoIStateSetAngleViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPoIStateSetAngleViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPoIStateSetAngleSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">poiID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;poiID&#39;</span><span class="p">)</span>
            <span class="n">angle</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;angle&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">poi</span><span class="o">.</span><span class="n">setAngle</span><span class="p">(</span><span class="n">poiID</span><span class="p">,</span> <span class="n">angle</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPoIStateRemoveViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPoIStateRemoveViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPoIStateRemoveViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Removes the poi with the given poiID</span>


<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPoIStateRemoveSerializer</span>
<div class="viewcode-block" id="TransportationPoIStateRemoveViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPoIStateRemoveViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes the poi with the given poiID</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span><span class="s1">&#39;Removes the poi with the given poiID&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;poiID&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the poi id&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;layer&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the layer&quot;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPoIStateRemoveViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPoIStateRemoveViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPoIStateRemoveSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">poiID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;poiID&#39;</span><span class="p">)</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;layer&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">poi</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">poiID</span><span class="p">,</span> <span class="n">layer</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPolygonSetTypeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPolygonSetTypeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPolygonSetTypeViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the (abstract) type of the polygon.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPolygonSetTypeSerializer</span>
<div class="viewcode-block" id="TransportationPolygonSetTypeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPolygonSetTypeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the (abstract) type of the polygon.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span><span class="s1">&#39;Sets the (abstract) type of the polygon.&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;polygonID&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the polygon id&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;polygonType&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the polygon type&quot;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPolygonSetTypeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPolygonSetTypeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPolygonSetTypeSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">polygonID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;polygonID&#39;</span><span class="p">)</span>
            <span class="n">polygonType</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;polygonType&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">polygon</span><span class="o">.</span><span class="n">setType</span><span class="p">(</span><span class="n">polygonID</span><span class="p">,</span> <span class="n">polygonType</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPolygonSetFilledViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPolygonSetFilledViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPolygonSetFilledViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Sets the filled status of the polygon</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPolygonSetFilledSerializer</span>
<div class="viewcode-block" id="TransportationPolygonSetFilledViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPolygonSetFilledViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the filled status of the polygon</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span><span class="s1">&#39;Sets the filled status of the polygon&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;polygonID&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the polygon id&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;filled&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the filled status&quot;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPolygonSetFilledViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPolygonSetFilledViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPolygonSetFilledSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">polygonID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;polygonID&#39;</span><span class="p">)</span>
            <span class="n">filled</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;filled&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">polygon</span><span class="o">.</span><span class="n">setFilled</span><span class="p">(</span><span class="n">polygonID</span><span class="p">,</span> <span class="n">filled</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPolygonSetLineWidthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPolygonSetLineWidthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPolygonSetLineWidthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">       Sets the line width for drawing unfilled polygon</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPolygonSetLineWidthSerializer</span>
<div class="viewcode-block" id="TransportationPolygonSetLineWidthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPolygonSetLineWidthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Sets the line width for drawing unfilled polygon</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span><span class="s1">&#39;Sets the line width for drawing unfilled polygon&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;polygonID&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the polygon id&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;lineWidth&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the line width&quot;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPolygonSetLineWidthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPolygonSetLineWidthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPolygonSetLineWidthSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">polygonID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;polygonID&#39;</span><span class="p">)</span>
            <span class="n">lineWidth</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;lineWidth&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">polygon</span><span class="o">.</span><span class="n">setFilled</span><span class="p">(</span><span class="n">polygonID</span><span class="p">,</span> <span class="n">lineWidth</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationPolygonRemoveViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPolygonRemoveViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPolygonRemoveViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">       Removes a polygon with the given ID</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPolygonRemoveSerializer</span>
<div class="viewcode-block" id="TransportationPolygonRemoveViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPolygonRemoveViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Removes a polygon with the given ID</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span><span class="s1">&#39;Removes a polygon with the given ID&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;polygonID&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the polygon id&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;layer&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the layer&quot;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationPolygonRemoveViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPolygonRemoveViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPolygonRemoveSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">polygonID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;polygonID&#39;</span><span class="p">)</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;layer&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">polygon</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">polygonID</span><span class="p">,</span> <span class="n">layer</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<span class="c1">#TODO</span>
<div class="viewcode-block" id="TransportationPolygonAddDynamicsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPolygonAddDynamicsViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationPolygonAddDynamicsViewSet</span> <span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Adds the specified dynamics for the Polygon</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPolygonAddDynamicsSerializer</span>

<div class="viewcode-block" id="TransportationPolygonAddDynamicsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPolygonAddDynamicsViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds the specified dynamics for the Polygon</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Adds the specified dynamics for the Polygon&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;polygonID&#39;</span><span class="p">:</span> <span class="s1">&#39;ID of the polygon, upon which the specified dynamics shall act&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;trackedObjectID&#39;</span><span class="p">:</span><span class="s1">&#39;ID of a SUMO traffic object, which shall be tracked by the polygon&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;timeSpan&#39;</span><span class="p">:</span> <span class="s2">&quot;list of time points for timing the animation keyframes (must start with element zero)&quot;</span>
                                        <span class="s2">&quot;If it has length zero, no animation is taken into account.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;timeSpan_example&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">],</span>
                          <span class="s1">&#39;alphaSpan&#39;</span><span class="p">:</span><span class="s2">&quot;list of alpha values to be attained at keyframes intermediate values are&quot;</span>
                                        <span class="s2">&quot;obtained by linear interpolation. Must have length equal to timeSpan, or zero&quot;</span>
                                        <span class="s2">&quot;if no alpha animation is desired.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;alphaSpan_example&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">],</span>
                          <span class="s1">&#39;looped&#39;</span><span class="p">:</span><span class="s2">&quot; Whether the animation should restart when the last keyframe is reached. In that case&quot;</span>
                                    <span class="s2">&quot;the animation jumps to the first keyframe as soon as the last is reached.&quot;</span>
                                    <span class="s2">&quot;If looped==false, the controlled polygon is removed as soon as the timeSpan elapses.&quot;</span><span class="p">,</span>
                          <span class="s1">&#39;rotate&#39;</span><span class="p">:</span> <span class="s2">&quot;Whether, the polygon should be rotated with the tracked object (only applies when such is given)&quot;</span>
                                    <span class="s2">&quot;The center of rotation is the object&#39;s position.&quot;</span>
                          <span class="p">}</span>
                         <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationPolygonAddDynamicsViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationPolygonAddDynamicsViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationPolygonAddDynamicsSerializer</span> <span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span> <span class="p">():</span>
            <span class="n">polygonID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;routeID&#39;</span><span class="p">)</span>
            <span class="n">trackedObjectID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;trackedObjectID&#39;</span><span class="p">)</span>
            <span class="n">timeSpan</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span> <span class="p">(</span><span class="s1">&#39;timeSpan&#39;</span><span class="p">)</span>
            <span class="n">alphaSpan</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;alphaSpan&#39;</span><span class="p">)</span>
            <span class="n">looped</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;looped&#39;</span><span class="p">)</span>
            <span class="n">rotate</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rotate&#39;</span><span class="p">)</span>
            <span class="n">dclasses</span> <span class="o">=</span> <span class="n">timeSpan</span><span class="o">.</span><span class="n">strip</span> <span class="p">(</span><span class="s1">&#39;][&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span> <span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">dclasses</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;[&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">timeSpan</span> <span class="ow">or</span> <span class="s2">&quot;]&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">timeSpan</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;timeSpan must be a list&#39;</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">tclasses</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">timeSpan</span><span class="p">:</span>
                        <span class="n">tclasses</span><span class="o">.</span><span class="n">append</span> <span class="p">(</span><span class="nb">float</span> <span class="p">(</span><span class="n">element</span><span class="p">))</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">tclasses</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Give a list as in the example format&#39;</span><span class="p">,</span>
                                      <span class="s1">&#39;timespan_example&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">]})</span>
            <span class="k">if</span> <span class="s2">&quot;[&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">alphaSpan</span> <span class="ow">or</span> <span class="s2">&quot;]&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">alphaSpan</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;timeSpan must be a list&#39;</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">aclasses</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">alphaSpan</span><span class="p">:</span>
                        <span class="n">aclasses</span><span class="o">.</span><span class="n">append</span> <span class="p">(</span><span class="nb">float</span> <span class="p">(</span><span class="n">element</span><span class="p">))</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">aclasses</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Give a list as in the example format&#39;</span><span class="p">,</span>
                                      <span class="s1">&#39;alphaspan_example&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">]})</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">traci</span><span class="o">.</span><span class="n">polygon</span><span class="o">.</span><span class="n">addDynamics</span> <span class="p">(</span><span class="n">polygonID</span><span class="p">,</span> <span class="n">trackedObjectID</span><span class="p">,</span> <span class="n">tclasses</span><span class="p">,</span> <span class="n">aclasses</span><span class="p">,</span> <span class="n">looped</span><span class="p">,</span> <span class="n">rotate</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgesAdaptTraveltimeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgesAdaptTraveltimeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgesAdaptTraveltimeViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">      Adapt the travel time value (in s) used for (re-)routing for the given edge.</span>

<span class="sd">        When setting begin time and end time (in seconds), the changes only</span>
<span class="sd">        apply to that time range. Otherwise they apply all the time</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgesAdaptTraveltimeSerializer</span>
<div class="viewcode-block" id="TransportationEdgesAdaptTraveltimeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgesAdaptTraveltimeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       Adapt the travel time value (in s) used for (re-)routing for the given edge.</span>

<span class="sd">        When setting begin time and end time (in seconds), the changes only</span>
<span class="sd">        apply to that time range. Otherwise they apply all the time</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span><span class="s1">&#39;Adapt the travel time value (in s) used for (re-)routing for the given edge.&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the polygon id&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the travel time&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;begin&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the begin time&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;end&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the end time&quot;</span><span class="p">,</span>

                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationEdgesAdaptTraveltimeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgesAdaptTraveltimeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgesAdaptTraveltimeSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>
            <span class="n">time</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
            <span class="n">begin</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;begin&#39;</span><span class="p">)</span>
            <span class="n">end</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">)</span>


            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">adaptTraveltime</span><span class="p">(</span><span class="n">edgeID</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">begin</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationEdgesSetEffortViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgesSetEffortViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgesSetEffortViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Adapt the effort value used for (re-)routing for the given edge.</span>

<span class="sd">        When setting begin time and end time (in seconds), the changes only</span>
<span class="sd">        apply to that time range. Otherwise they apply all the time</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgesSetEffortSerializer</span>
<div class="viewcode-block" id="TransportationEdgesSetEffortViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgesSetEffortViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adapt the effort value used for (re-)routing for the given edge.</span>

<span class="sd">        When setting begin time and end time (in seconds), the changes only</span>
<span class="sd">        apply to that time range. Otherwise they apply all the time</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span><span class="s1">&#39;Adapt the effort value used for (re-)routing for the given edge.&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the polygon id&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;effort&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the effort value&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;begin&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the begin time&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;end&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the end time&quot;</span><span class="p">,</span>

                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationEdgesSetEffortViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgesSetEffortViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgesSetEffortSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>
            <span class="n">effort</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;effort&#39;</span><span class="p">)</span>
            <span class="n">begin</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;begin&#39;</span><span class="p">)</span>
            <span class="n">end</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">)</span>


            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">setEffort</span><span class="p">(</span><span class="n">edgeID</span><span class="p">,</span> <span class="n">effort</span><span class="p">,</span> <span class="n">begin</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationEdgesSetMaxSpeedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgesSetMaxSpeedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgesSetMaxSpeedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Set a new maximum speed (in m/s) for all lanes of the edge.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgesSetMaxSpeedSerializer</span>
<div class="viewcode-block" id="TransportationEdgesSetMaxSpeedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgesSetMaxSpeedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set a new maximum speed (in m/s) for all lanes of the edge.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span><span class="s1">&#39;Set a new maximum speed (in m/s) for all lanes of the edge.&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the edge id&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;speed&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the maximum speed&quot;</span><span class="p">,</span>

                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationEdgesSetMaxSpeedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgesSetMaxSpeedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgesSetMaxSpeedSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">serializer</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>
            <span class="n">speed</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;speed&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">setMaxSpeed</span><span class="p">(</span><span class="n">edgeID</span><span class="p">,</span> <span class="n">speed</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<span class="c1">#TODO</span>
<div class="viewcode-block" id="TransportationSimulationClearPendingViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationSimulationClearPendingViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationSimulationClearPendingViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Set a new maximum speed (in m/s) for all lanes of the edge.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationSimulationClearPendingSerializer</span>
<div class="viewcode-block" id="TransportationSimulationClearPendingViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationSimulationClearPendingViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set a new maximum speed (in m/s) for all lanes of the edge.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span><span class="s1">&#39;Set a new maximum speed (in m/s) for all lanes of the edge.&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the edge id&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;speed&#39;</span><span class="p">:</span> <span class="s2">&quot;provide the maximum speed&quot;</span><span class="p">,</span>

                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationSimulationClearPendingViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationSimulationClearPendingViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationSimulationClearPendingSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">routeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;routeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">simulation</span><span class="o">.</span><span class="n">clearPending</span><span class="p">(</span><span class="n">routeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationSimulationSaveStateViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationSimulationSaveStateViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationSimulationSaveStateViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Saves current simulation state to the given filename.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationSimulationSaveStateSerializer</span>
<div class="viewcode-block" id="TransportationSimulationSaveStateViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationSimulationSaveStateViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Saves current simulation state to the given filename.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span><span class="s1">&#39;Saves current simulation state to the given filename.&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;fileName&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the file name&quot;</span><span class="p">,</span>

                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationSimulationSaveStateViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationSimulationSaveStateViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationSimulationSaveStateSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fileName&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">simulation</span><span class="o">.</span><span class="n">saveState</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">traciout</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">traciout</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationSimulationLoadStateViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationSimulationLoadStateViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationSimulationLoadStateViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Saves current simulation state to the given filename.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationSimulationLoadStateSerializer</span>
<div class="viewcode-block" id="TransportationSimulationLoadStateViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationSimulationLoadStateViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Saves current simulation state to the given filename.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span><span class="s1">&#39;Saves current simulation state to the given filename.&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;fileName&#39;</span><span class="p">:</span> <span class="s2">&quot;Provide the file name&quot;</span><span class="p">,</span>

                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationSimulationLoadStateViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationSimulationLoadStateViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationSimulationLoadStateSerializer</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fileName&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">simulation</span><span class="o">.</span><span class="n">loadState</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;successful&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationStartViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationStartViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationStartViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to start Sumo simulation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="TransportationStartViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationStartViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Start Sumo simulation&quot;</span><span class="p">,</span>

                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationStartViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationStartViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>
        <span class="k">if</span> <span class="s1">&#39;SUMO_HOME&#39;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
            <span class="n">tools</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;SUMO_HOME&#39;</span><span class="p">],</span> <span class="s1">&#39;tools&#39;</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tools</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tools</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;/usr/bin/sumo/&quot;</span><span class="p">,</span> <span class="s1">&#39;tools&#39;</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tools</span><span class="p">)</span>

        <span class="n">sumoBinary</span> <span class="o">=</span> <span class="s2">&quot;/usr/bin/sumo&quot;</span>

        <span class="c1"># import traci as tr</span>
        <span class="c1"># import sumolib.miscutils</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">traci</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="kc">None</span>
            <span class="c1"># return Response({&#39;status&#39;: &#39;error&#39;, &#39;message&#39;: str(e)})</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;start&quot;</span><span class="p">)</span>
        <span class="c1"># PORT = sumolib.miscutils.getFreeSocketPort()</span>
        <span class="k">global</span> <span class="n">port</span>
        <span class="c1"># port = PORT</span>
        <span class="c1"># print(&quot;port&quot;, PORT)</span>
        <span class="n">sumoCmd</span> <span class="o">=</span> <span class="p">[</span><span class="n">sumoBinary</span><span class="p">,</span> <span class="s2">&quot;-c&quot;</span><span class="p">,</span> <span class="s2">&quot;limassol/lim.sumocfg&quot;</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;next&quot;</span><span class="p">)</span>
        <span class="n">traci</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">sumoCmd</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span></div></div>


<div class="viewcode-block" id="TransportationStepsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationStepsViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationStepsViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to move forward the simulation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationStepSerializer</span>
<div class="viewcode-block" id="TransportationStepsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationStepsViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Move simulation time&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;steps&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide the number of steps&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="TransportationStepsViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationStepsViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationStepSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">steps</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;steps&#39;</span><span class="p">)</span>
            <span class="n">traci</span><span class="o">.</span><span class="n">simulationStep</span><span class="p">(</span><span class="n">steps</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;Successful&quot;</span><span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1"># Induction Loop Value Retrieval</span>
<div class="viewcode-block" id="TransportationInductionloopGetIDListViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetIDListViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationInductionloopGetIDListViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the ids of all induction loops within the scenario (the given Induction Loop ID is ignored)</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="TransportationInductionloopGetIDListViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetIDListViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all objects in the network&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">inductionloop</span><span class="o">.</span><span class="n">getIDList</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the number of all the ids of all induction loops.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;data&#39;</span><span class="p">:</span><span class="n">traciout</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationInductionloopGetPositionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetPositionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationInductionloopGetPositionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the position of the induction loop at it&#39;s lane, counted from the lane&#39;s begin, in meters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationInductionloopGetSerializer</span>

<div class="viewcode-block" id="TransportationInductionloopGetPositionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetPositionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the position measured from the beginning of the lane in meters.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the position measured from the beginning of the lane in meters.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;loopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a loop id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationInductionloopGetPositionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetPositionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationInductionloopGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">loopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;loopID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">inductionloop</span><span class="o">.</span><span class="n">getPosition</span><span class="p">(</span><span class="n">loopID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationInductionloopGetLaneIDViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetLaneIDViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationInductionloopGetLaneIDViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the ID of the lane the induction loop is placed at.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationInductionloopGetSerializer</span>

<div class="viewcode-block" id="TransportationInductionloopGetLaneIDViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetLaneIDViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the id of the lane the loop is on.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the id of the lane the loop is on.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;loopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a loop id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationInductionloopGetLaneIDViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetLaneIDViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationInductionloopGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">loopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;loopID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">inductionloop</span><span class="o">.</span><span class="n">getLaneID</span><span class="p">(</span><span class="n">loopID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationInductionloopGetIDCountViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetIDCountViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationInductionloopGetIDCountViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the number of induction loops within the scenario (the given Induction Loop ID is ignored)</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="TransportationInductionloopGetIDCountViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetIDCountViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of currently loaded objects.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">inductionloop</span><span class="o">.</span><span class="n">getIDCount</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the number of currently loaded objects.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;data&#39;</span><span class="p">:</span><span class="n">traciout</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationInductionloopGetLastStepVehicleNumberViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetLastStepVehicleNumberViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationInductionloopGetLastStepVehicleNumberViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the number of vehicles that were on the named induction loop within the last simulation step [#];</span>

<span class="sd">        Note:This value corresponds to the nVehEntered measure of induction loops.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationInductionloopGetSerializer</span>

<div class="viewcode-block" id="TransportationInductionloopGetLastStepVehicleNumberViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetLastStepVehicleNumberViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of vehicles that were on the named induction loop within the last simulation step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the number of vehicles that were on the named induction loop within the last simulation step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;loopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a loop id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationInductionloopGetLastStepVehicleNumberViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetLastStepVehicleNumberViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationInductionloopGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">loopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;loopID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">inductionloop</span><span class="o">.</span><span class="n">getLastStepVehicleNumber</span><span class="p">(</span><span class="n">loopID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationInductionloopGetLastStepMeanSpeedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetLastStepMeanSpeedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationInductionloopGetLastStepMeanSpeedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the mean speed of vehicles that were on the named induction loop within the last simulation step [m/s]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationInductionloopGetSerializer</span>

<div class="viewcode-block" id="TransportationInductionloopGetLastStepMeanSpeedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetLastStepMeanSpeedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the mean speed in m/s of vehicles that were on the named induction loop within the last simulation step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the mean speed in m/s of vehicles that were on the named induction loop within the last simulation step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;loopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a loop id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationInductionloopGetLastStepMeanSpeedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetLastStepMeanSpeedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationInductionloopGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">loopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;loopID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">inductionloop</span><span class="o">.</span><span class="n">getLastStepMeanSpeed</span><span class="p">(</span><span class="n">loopID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationInductionloopGetLastStepVehicleIDsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetLastStepVehicleIDsViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationInductionloopGetLastStepVehicleIDsViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the list of ids of vehicles that were on the named induction loop in the last simulation step</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationInductionloopGetSerializer</span>

<div class="viewcode-block" id="TransportationInductionloopGetLastStepVehicleIDsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetLastStepVehicleIDsViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the list of ids of vehicles that were on the named induction loop in the last simulation step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the list of ids of vehicles that were on the named induction loop in the last simulation step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;loopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a loop id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationInductionloopGetLastStepVehicleIDsViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetLastStepVehicleIDsViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationInductionloopGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">loopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;loopID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">inductionloop</span><span class="o">.</span><span class="n">getLastStepVehicleIDs</span><span class="p">(</span><span class="n">loopID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationInductionloopGetLastStepOccupancyViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetLastStepOccupancyViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationInductionloopGetLastStepOccupancyViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the percentage of time the detector was occupied by a vehicle [%]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationInductionloopGetSerializer</span>

<div class="viewcode-block" id="TransportationInductionloopGetLastStepOccupancyViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetLastStepOccupancyViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the percentage of time the detector was occupied by a vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the percentage of time the detector was occupied by a vehicle.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;loopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a loop id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationInductionloopGetLastStepOccupancyViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetLastStepOccupancyViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationInductionloopGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">loopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;loopID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">inductionloop</span><span class="o">.</span><span class="n">getLastStepOccupancy</span><span class="p">(</span><span class="n">loopID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationInductionloopGetLastStepMeanLengthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetLastStepMeanLengthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationInductionloopGetLastStepMeanLengthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the mean length of vehicles which were on the detector in the last step [m]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationInductionloopGetSerializer</span>

<div class="viewcode-block" id="TransportationInductionloopGetLastStepMeanLengthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetLastStepMeanLengthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the mean length in m of vehicles which were on the detector in the last step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the mean length in m of vehicles which were on the detector in the last step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;loopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a loop id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationInductionloopGetLastStepMeanLengthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetLastStepMeanLengthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationInductionloopGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">loopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;loopID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">inductionloop</span><span class="o">.</span><span class="n">getLastStepMeanLength</span><span class="p">(</span><span class="n">loopID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationInductionloopGetTimeSinceDetectionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetTimeSinceDetectionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationInductionloopGetTimeSinceDetectionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the time since last detection [s]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationInductionloopGetSerializer</span>

<div class="viewcode-block" id="TransportationInductionloopGetTimeSinceDetectionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetTimeSinceDetectionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the time in s since last detection.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the time in s since last detection.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;loopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a loop id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationInductionloopGetTimeSinceDetectionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetTimeSinceDetectionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationInductionloopGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">loopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;loopID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">inductionloop</span><span class="o">.</span><span class="n">getTimeSinceDetection</span><span class="p">(</span><span class="n">loopID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationInductionloopGetVehicleDataViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetVehicleDataViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationInductionloopGetVehicleDataViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get a complex structure containing several information about vehicles which passed the detector</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationInductionloopGetSerializer</span>

<div class="viewcode-block" id="TransportationInductionloopGetVehicleDataViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetVehicleDataViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a complex structure containing several information about vehicles which passed the detector.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns a complex structure containing several information about vehicles which passed the detector.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;loopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a loop id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationInductionloopGetVehicleDataViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationInductionloopGetVehicleDataViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationInductionloopGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">loopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;loopID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">inductionloop</span><span class="o">.</span><span class="n">getVehicleData</span><span class="p">(</span><span class="n">loopID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1"># Lane Area Detector Value Retrieval</span>
<div class="viewcode-block" id="TransportationLaneareaGetIDListViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetIDListViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneareaGetIDListViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get a list of ids of all lane area detectors within the scenario (the given DetectorID is ignored)</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="TransportationLaneareaGetIDListViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetIDListViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all objects in the network&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lanearea</span><span class="o">.</span><span class="n">getIDList</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns a list of ids of all lane area detectors within the scenario (the given DetectorID is ignored)	&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;data&#39;</span><span class="p">:</span><span class="n">traciout</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneareaGetIDCountViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetIDCountViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneareaGetIDCountViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the number of lane area detectors within the scenario (the given DetectorID is ignored)</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="TransportationLaneareaGetIDCountViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetIDCountViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of currently loaded objects.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lanearea</span><span class="o">.</span><span class="n">getIDCount</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the number of lane area detectors within the scenario (the given DetectorID is ignored)&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;data&#39;</span><span class="p">:</span><span class="n">traciout</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneareaGetPositionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetPositionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneareaGetPositionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the starting position of the detector at it&#39;s lane, counted from the lane&#39;s begin, in meters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneareaGetPositionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetPositionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the starting position of the detector measured from the beginning of the lane in meters.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the starting position of the detector measured from the beginning of the lane in meters.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;loopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a detector id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneareaGetPositionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetPositionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">detID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lanearea</span><span class="o">.</span><span class="n">getPosition</span><span class="p">(</span><span class="n">detID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneareaGetLengthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLengthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneareaGetLengthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the length of the detector in meters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneareaGetLengthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLengthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the length of the detector&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the length of the detector&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;loopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a detector id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneareaGetLengthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLengthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">detID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lanearea</span><span class="o">.</span><span class="n">getLength</span><span class="p">(</span><span class="n">detID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneareaGetLaneIDViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLaneIDViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneareaGetLaneIDViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the ID of the lane the detector is placed at.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneareaGetLaneIDViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLaneIDViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the id of the lane the detector is on.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the id of the lane the detector is on.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;loopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a detector id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneareaGetLaneIDViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLaneIDViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">detID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lanearea</span><span class="o">.</span><span class="n">getLaneID</span><span class="p">(</span><span class="n">detID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneareaGetLastStepVehicleNumberViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLastStepVehicleNumberViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneareaGetLastStepVehicleNumberViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the number of vehicles that have been within the area detector within the last simulation step [#];</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneareaGetLastStepVehicleNumberViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLastStepVehicleNumberViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of vehicles that were on the named detector within the last simulation step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the number of vehicles that were on the named detector within the last simulation step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;loopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a detector id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneareaGetLastStepVehicleNumberViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLastStepVehicleNumberViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">detID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lanearea</span><span class="o">.</span><span class="n">getLastStepVehicleNumber</span><span class="p">(</span><span class="n">detID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneareaGetLastStepMeanSpeedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLastStepMeanSpeedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneareaGetLastStepMeanSpeedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the mean speed of vehicles that have been within the named area detector within the last simulation step [m/s]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneareaGetLastStepMeanSpeedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLastStepMeanSpeedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the current mean speed in m/s of vehicles that were on the named e2.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the current mean speed in m/s of vehicles that were on the named e2.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;loopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a detector id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneareaGetLastStepMeanSpeedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLastStepMeanSpeedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">detID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lanearea</span><span class="o">.</span><span class="n">getLastStepMeanSpeed</span><span class="p">(</span><span class="n">detID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneareaGetLastStepVehicleIDsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLastStepVehicleIDsViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneareaGetLastStepVehicleIDsViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the list of ids of vehicles that have been within the detector in the last simulation step</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneareaGetLastStepVehicleIDsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLastStepVehicleIDsViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the list of ids of vehicles that were on the named detector in the last simulation step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the list of ids of vehicles that were on the named detector in the last simulation step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;loopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a detector id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneareaGetLastStepVehicleIDsViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLastStepVehicleIDsViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">detID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lanearea</span><span class="o">.</span><span class="n">getLastStepVehicleIDs</span><span class="p">(</span><span class="n">detID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneareaGetLastStepOccupancyViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLastStepOccupancyViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneareaGetLastStepOccupancyViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the percentage of space the detector was occupied by a vehicle [%]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneareaGetLastStepOccupancyViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLastStepOccupancyViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the percentage of space the detector was occupied by a vehicle [%]&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the percentage of space the detector was occupied by a vehicle [%]&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;loopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a detector id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneareaGetLastStepOccupancyViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLastStepOccupancyViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">detID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lanearea</span><span class="o">.</span><span class="n">getLastStepOccupancy</span><span class="p">(</span><span class="n">detID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneareaGetJamLengthVehicleViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetJamLengthVehicleViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneareaGetJamLengthVehicleViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the jam length in vehicles within the last simulation step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneareaGetJamLengthVehicleViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetJamLengthVehicleViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the jam length in vehicles within the last simulation step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the jam length in vehicles within the last simulation step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;loopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a detector id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneareaGetJamLengthVehicleViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetJamLengthVehicleViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">detID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lanearea</span><span class="o">.</span><span class="n">getJamLengthVehicle</span><span class="p">(</span><span class="n">detID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneareaGetLastStepHaltingNumberViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLastStepHaltingNumberViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneareaGetLastStepHaltingNumberViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the number of vehicles which were halting on the loop during the last time step</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneareaGetLastStepHaltingNumberViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLastStepHaltingNumberViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of vehicles which were halting during the last time step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the number of vehicles which were halting during the last time step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;loopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a detector id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneareaGetLastStepHaltingNumberViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetLastStepHaltingNumberViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">detID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lanearea</span><span class="o">.</span><span class="n">getLastStepHaltingNumber</span><span class="p">(</span><span class="n">detID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneareaGetJamLengthMetersViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetJamLengthMetersViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneareaGetJamLengthMetersViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the length of the jam in meters</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneareaGetJamLengthMetersViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetJamLengthMetersViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the jam length in meters within the last simulation step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the jam length in meters within the last simulation step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;loopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a detector id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneareaGetJamLengthMetersViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneareaGetJamLengthMetersViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneareaGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">detID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;detID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lanearea</span><span class="o">.</span><span class="n">getJamLengthMeters</span><span class="p">(</span><span class="n">detID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<span class="c1"># Calibrator Value Retrieval</span>
<div class="viewcode-block" id="TransportationCalibratorGetBeginViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetBeginViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationCalibratorGetBeginViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the begin time of the current calibration interval</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span>

<div class="viewcode-block" id="TransportationCalibratorGetBeginViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetBeginViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the begin time of the current calibration interval&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the begin time of the current calibration interval&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;calibratorID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationCalibratorGetBeginViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetBeginViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">calibratorID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;calibratorID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">calibrator</span><span class="o">.</span><span class="n">getBegin</span><span class="p">(</span><span class="n">calibratorID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationCalibratorGetEdgeIDViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetEdgeIDViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationCalibratorGetEdgeIDViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the edge of this calibrator</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span>

<div class="viewcode-block" id="TransportationCalibratorGetEdgeIDViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetEdgeIDViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the edge of this calibrator&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the edge of this calibrator&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;calibratorID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationCalibratorGetEdgeIDViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetEdgeIDViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">calibratorID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;calibratorID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">calibrator</span><span class="o">.</span><span class="n">getEdgeID</span><span class="p">(</span><span class="n">calibratorID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationCalibratorGetEndViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetEndViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationCalibratorGetEndViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the end time of the current calibration interval</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span>

<div class="viewcode-block" id="TransportationCalibratorGetEndViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetEndViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the end time of the current calibration interval&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the end time of the current calibration interval&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;calibratorID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationCalibratorGetEndViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetEndViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">calibratorID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;calibratorID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">calibrator</span><span class="o">.</span><span class="n">getEnd</span><span class="p">(</span><span class="n">calibratorID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationCalibratorGetInsertedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetInsertedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationCalibratorGetInsertedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the number of inserted vehicles in the current calibration interval</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span>

<div class="viewcode-block" id="TransportationCalibratorGetInsertedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetInsertedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of inserted vehicles in the current calibration interval&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the number of inserted vehicles in the current calibration interval&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;calibratorID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationCalibratorGetInsertedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetInsertedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">calibratorID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;calibratorID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">calibrator</span><span class="o">.</span><span class="n">getInserted</span><span class="p">(</span><span class="n">calibratorID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationCalibratorGetLaneIDViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetLaneIDViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationCalibratorGetLaneIDViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the lane of this calibrator (if it applies to a single lane)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span>

<div class="viewcode-block" id="TransportationCalibratorGetLaneIDViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetLaneIDViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the lane of this calibrator (if it applies to a single lane)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the lane of this calibrator (if it applies to a single lane)&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;calibratorID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationCalibratorGetLaneIDViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetLaneIDViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">calibratorID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;calibratorID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">calibrator</span><span class="o">.</span><span class="n">getLaneID</span><span class="p">(</span><span class="n">calibratorID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationCalibratorGetPassedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetPassedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationCalibratorGetPassedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the number of passed vehicles in the current calibration interval</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span>

<div class="viewcode-block" id="TransportationCalibratorGetPassedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetPassedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of passed vehicles in the current calibration interval&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the number of passed vehicles in the current calibration interval&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;calibratorID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationCalibratorGetPassedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetPassedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">calibratorID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;calibratorID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">calibrator</span><span class="o">.</span><span class="n">getPassed</span><span class="p">(</span><span class="n">calibratorID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationCalibratorGetRemovedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetRemovedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationCalibratorGetRemovedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the number of removed vehicles in the current calibration interval</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span>

<div class="viewcode-block" id="TransportationCalibratorGetRemovedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetRemovedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of removed vehicles in the current calibration interval&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the number of removed vehicles in the current calibration interval&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;calibratorID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationCalibratorGetRemovedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetRemovedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">calibratorID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;calibratorID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">calibrator</span><span class="o">.</span><span class="n">getRemoved</span><span class="p">(</span><span class="n">calibratorID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationCalibratorGetRouteIDViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetRouteIDViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationCalibratorGetRouteIDViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the route id for the current calibration interval</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span>

<div class="viewcode-block" id="TransportationCalibratorGetRouteIDViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetRouteIDViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the route id for the current calibration interval&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the route id for the current calibration interval&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;calibratorID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationCalibratorGetRouteIDViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetRouteIDViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">calibratorID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;calibratorID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">calibrator</span><span class="o">.</span><span class="n">getRouteID</span><span class="p">(</span><span class="n">calibratorID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationCalibratorGetRouteProbeIDViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetRouteProbeIDViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationCalibratorGetRouteProbeIDViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the routeProbe id for this calibrator</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span>

<div class="viewcode-block" id="TransportationCalibratorGetRouteProbeIDViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetRouteProbeIDViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the routeProbe id for this calibrator&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the routeProbe id for this calibrator&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;calibratorID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationCalibratorGetRouteProbeIDViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetRouteProbeIDViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">calibratorID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;calibratorID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">calibrator</span><span class="o">.</span><span class="n">getRouteProbeID</span><span class="p">(</span><span class="n">calibratorID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationCalibratorGetSpeedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetSpeedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationCalibratorGetSpeedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the target speed of the current calibration interval</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span>

<div class="viewcode-block" id="TransportationCalibratorGetSpeedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetSpeedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the target speed of the current calibration interval&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the target speed of the current calibration interval&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;calibratorID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationCalibratorGetSpeedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetSpeedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">calibratorID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;calibratorID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">calibrator</span><span class="o">.</span><span class="n">getSpeed</span><span class="p">(</span><span class="n">calibratorID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationCalibratorGetTypeIDViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetTypeIDViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationCalibratorGetTypeIDViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the type id for the current calibration interval</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span>

<div class="viewcode-block" id="TransportationCalibratorGetTypeIDViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetTypeIDViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the type id for the current calibration interval&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the type id for the current calibration interval&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;calibratorID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationCalibratorGetTypeIDViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetTypeIDViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">calibratorID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;calibratorID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">calibrator</span><span class="o">.</span><span class="n">getTypeID</span><span class="p">(</span><span class="n">calibratorID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationCalibratorGetVTypesViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetVTypesViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationCalibratorGetVTypesViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get a list of all types to which the calibrator applies (in a type filter is active)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span>

<div class="viewcode-block" id="TransportationCalibratorGetVTypesViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetVTypesViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all types to which the calibrator applies (in a type filter is active)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns a list of all types to which the calibrator applies (in a type filter is active)&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;calibratorID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationCalibratorGetVTypesViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetVTypesViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">calibratorID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;calibratorID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">calibrator</span><span class="o">.</span><span class="n">getVTypes</span><span class="p">(</span><span class="n">calibratorID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationCalibratorGetVehsPerHourViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetVehsPerHourViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationCalibratorGetVehsPerHourViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get he number of vehicles per hour in the current calibration interval</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span>

<div class="viewcode-block" id="TransportationCalibratorGetVehsPerHourViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetVehsPerHourViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of vehicles per hour in the current calibration interval&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the number of vehicles per hour in the current calibration interval&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;calibratorID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationCalibratorGetVehsPerHourViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorGetVehsPerHourViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">calibratorID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;calibratorID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">calibrator</span><span class="o">.</span><span class="n">getVehsPerHour</span><span class="p">(</span><span class="n">calibratorID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationCalibratorSetFlowViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorSetFlowViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationCalibratorSetFlowViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to update or add a calibrator interval</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorSetFlowSerializer</span>

<div class="viewcode-block" id="TransportationCalibratorSetFlowViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorSetFlowViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update or add a calibrator interval&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Update or add a calibrator interval&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;calibratorID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;begin&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;end&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;vehsPerHour&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;speed&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;routeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;departLane&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;departSpeed&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a calibrator id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationCalibratorSetFlowViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationCalibratorSetFlowViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationCalibratorSetFlowSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">calibratorID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;calibratorID&#39;</span><span class="p">)</span>
            <span class="n">begin</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;begin&#39;</span><span class="p">)</span>
            <span class="n">end</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">)</span>
            <span class="n">vehsPerHour</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehsPerHour&#39;</span><span class="p">)</span>
            <span class="n">speed</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;speed&#39;</span><span class="p">)</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>
            <span class="n">routeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;routeID&#39;</span><span class="p">)</span>
            <span class="n">departLane</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;departLane&#39;</span><span class="p">)</span>
            <span class="n">departSpeed</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;departSpeed&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">calibrator</span><span class="o">.</span><span class="n">setFlow</span><span class="p">(</span><span class="n">calibratorID</span><span class="p">,</span><span class="n">begin</span><span class="p">,</span><span class="n">end</span><span class="p">,</span><span class="n">vehsPerHour</span><span class="p">,</span><span class="n">speed</span><span class="p">,</span><span class="n">typeID</span><span class="p">,</span><span class="n">routeID</span><span class="p">,</span><span class="n">departLane</span><span class="p">,</span><span class="n">departSpeed</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1"># Traffic Lights Value Retrieval</span>
<div class="viewcode-block" id="TransportationTrafficlightGetControlledLanesViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetControlledLanesViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationTrafficlightGetControlledLanesViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the list of lanes which are controlled by the named traffic light. Returns at least one entry for every element of the phase state (signal index)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span>

<div class="viewcode-block" id="TransportationTrafficlightGetControlledLanesViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetControlledLanesViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the list of lanes which are controlled by the named traffic light.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the list of lanes which are controlled by the named traffic light.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;tlsID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a traffic light id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationTrafficlightGetControlledLanesViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetControlledLanesViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">tlsID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tlsID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">trafficlight</span><span class="o">.</span><span class="n">getControlledLanes</span><span class="p">(</span><span class="n">tlsID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationTrafficlightGetControlledLinksViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetControlledLinksViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationTrafficlightGetControlledLinksViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the links controlled by the traffic light, the index in the returned list corresponds to the tls link index of the connection. Each index maps to a list of link objects that share the same link index. Each link object is described by giving the incoming, outgoing, and via lane.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span>

<div class="viewcode-block" id="TransportationTrafficlightGetControlledLinksViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetControlledLinksViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the links controlled by the traffic light, sorted by the signal index and described by giving the incoming, outgoing, and via lane.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the links controlled by the traffic light, sorted by the signal index and described by giving the incoming, outgoing, and via lane.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;tlsID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a traffic light id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationTrafficlightGetControlledLinksViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetControlledLinksViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">tlsID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tlsID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">trafficlight</span><span class="o">.</span><span class="n">getControlledLinks</span><span class="p">(</span><span class="n">tlsID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationTrafficlightGetProgramViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetProgramViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationTrafficlightGetProgramViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the id of the current program</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span>

<div class="viewcode-block" id="TransportationTrafficlightGetProgramViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetProgramViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the id of the current program.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the id of the current program.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;tlsID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a traffic light id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationTrafficlightGetProgramViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetProgramViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">tlsID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tlsID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">trafficlight</span><span class="o">.</span><span class="n">getProgram</span><span class="p">(</span><span class="n">tlsID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationTrafficlightGetCompleteRedYellowGreenDefinitionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetCompleteRedYellowGreenDefinitionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationTrafficlightGetCompleteRedYellowGreenDefinitionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the complete traffic light program, structure described under data types</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span>

<div class="viewcode-block" id="TransportationTrafficlightGetCompleteRedYellowGreenDefinitionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetCompleteRedYellowGreenDefinitionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the complete traffic light program, structure described under data types&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the complete traffic light program, structure described under data types&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;tlsID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a traffic light id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationTrafficlightGetCompleteRedYellowGreenDefinitionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetCompleteRedYellowGreenDefinitionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">tlsID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tlsID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">trafficlight</span><span class="o">.</span><span class="n">getCompleteRedYellowGreenDefinition</span><span class="p">(</span><span class="n">tlsID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationTrafficlightGetNextSwitchViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetNextSwitchViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationTrafficlightGetNextSwitchViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the assumed time (in seconds) at which the tls changes the phase. Please note that the time to switch is not relative to current simulation step (the result returned by the query will be absolute time, counting from simulation start); to obtain relative time, one needs to subtract current simulation time from the result returned by this query. Please also note that the time may vary in the case of actuated/adaptive traffic lights</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span>

<div class="viewcode-block" id="TransportationTrafficlightGetNextSwitchViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetNextSwitchViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the absolute simulation time at which the traffic light is schedule to switch to the next phase (in seconds).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the absolute simulation time at which the traffic light is schedule to switch to the next phase (in seconds).&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;tlsID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a traffic light id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationTrafficlightGetNextSwitchViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetNextSwitchViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">tlsID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tlsID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">trafficlight</span><span class="o">.</span><span class="n">getNextSwitch</span><span class="p">(</span><span class="n">tlsID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationTrafficlightGetBlockingVehiclesViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetBlockingVehiclesViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationTrafficlightGetBlockingVehiclesViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the ids of vehicles that occupy the subsequent rail signal block</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span>

<div class="viewcode-block" id="TransportationTrafficlightGetBlockingVehiclesViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetBlockingVehiclesViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the list of vehicles that are blocking the subsequent block for the given tls-linkIndex&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the list of vehicles that are blocking the subsequent block for the given tls-linkIndex&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;tlsID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a traffic light id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;linkIndex&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a traffic light linkIndex&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationTrafficlightGetBlockingVehiclesViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetBlockingVehiclesViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">tlsID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tlsID&#39;</span><span class="p">)</span>
            <span class="n">linkIndex</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;linkIndex&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">trafficlight</span><span class="o">.</span><span class="n">getBlockingVehicles</span><span class="p">(</span><span class="n">tlsID</span><span class="p">,</span> <span class="n">linkIndex</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationTrafficlightGetRivalVehiclesViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetRivalVehiclesViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationTrafficlightGetRivalVehiclesViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the ids of vehicles that are approaching the same rail signal block</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span>

<div class="viewcode-block" id="TransportationTrafficlightGetRivalVehiclesViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetRivalVehiclesViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the list of vehicles that also wish to enter the subsequent block for the given tls-linkIndex (regardless of priority)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the list of vehicles that also wish to enter the subsequent block for the given tls-linkIndex (regardless of priority)&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;tlsID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a traffic light id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;linkIndex&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a traffic light linkIndex&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationTrafficlightGetRivalVehiclesViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetRivalVehiclesViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">tlsID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tlsID&#39;</span><span class="p">)</span>
            <span class="n">linkIndex</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;linkIndex&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">trafficlight</span><span class="o">.</span><span class="n">getRivalVehicles</span><span class="p">(</span><span class="n">tlsID</span><span class="p">,</span> <span class="n">linkIndex</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationTrafficlightGetPriorityVehiclesViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetPriorityVehiclesViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationTrafficlightGetPriorityVehiclesViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the ids of vehicles that are approaching the same rail signal block with higher priority</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span>

<div class="viewcode-block" id="TransportationTrafficlightGetPriorityVehiclesViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetPriorityVehiclesViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the list of vehicles that also wish to enter the subsequent block for the given tls-linkIndex (only those with higher priority)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the list of vehicles that also wish to enter the subsequent block for the given tls-linkIndex (only those with higher priority)&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;tlsID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a traffic light id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;linkIndex&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a traffic light linkIndex&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationTrafficlightGetPriorityVehiclesViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationTrafficlightGetPriorityVehiclesViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationTrafficlightGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">tlsID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tlsID&#39;</span><span class="p">)</span>
            <span class="n">linkIndex</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;linkIndex&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">trafficlight</span><span class="o">.</span><span class="n">getPriorityVehicles</span><span class="p">(</span><span class="n">tlsID</span><span class="p">,</span> <span class="n">linkIndex</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1"># Lane Value Retrieval</span>
<div class="viewcode-block" id="TransportationLaneGetLinkNumberViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLinkNumberViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetLinkNumberViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the number of links outgoing from this lane [#]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneGetLinkNumberViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLinkNumberViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of connections to successive lanes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the number of connections to successive lanes.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneGetLinkNumberViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLinkNumberViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getLinkNumber</span><span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetEdgeIDViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetEdgeIDViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetEdgeIDViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the id of the edge this lane belongs to</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneGetEdgeIDViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetEdgeIDViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the id of the edge the lane belongs to.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the id of the edge the lane belongs to.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneGetEdgeIDViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetEdgeIDViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getEdgeID</span><span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetLinksViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLinksViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetLinksViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get descriptions of the links outgoing from this lane [m]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetLinksSerializer</span>

<div class="viewcode-block" id="TransportationLaneGetLinksViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLinksViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns descriptions of the links outgoing from this lane [m]&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns A list containing id of successor lane together with priority, open and foe</span>
<span class="s2">                                            for each link.</span>
<span class="s2">                                            if extended=True, each result tuple contains</span>
<span class="s2">                                            (string approachedLane, bool hasPrio, bool isOpen, bool hasFoe,</span>
<span class="s2">                                            string approachedInternal, string state, string direction, float length)</span>
<span class="s2">                                             </span>
<span class="s2">                                            isOpen: whether a vehicle driving at the speed limit (minimum auf</span>
<span class="s2">                                                    incoming and outgoing lane) could safely pass the junction with</span>
<span class="s2">                                                    regard to approaching foes if it were to enter it in this step</span>
<span class="s2">                                                    (false for red traffic light).</span>
<span class="s2">                                                    Foe vehicles that are already on the junction are ignored!</span>
<span class="s2">                                            hasPrio: whether the link is the main road at a priority junction or</span>
<span class="s2">                                                     currently has green light (&#39;G&#39;)</span>
<span class="s2">                                            hasFoe: whether any foe vehicles are approaching the junction or on the</span>
<span class="s2">                                                    junction that would interfere with passing it in the current time step&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneGetLinksViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetLinksViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetLinksSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>
            <span class="n">extended</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;extended&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getLinks</span><span class="p">(</span><span class="n">laneID</span><span class="p">,</span><span class="n">extended</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetAllowedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetAllowedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetAllowedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get  the mml-definitions of vehicle classes allowed on this lane</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneGetAllowedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetAllowedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of allowed vehicle classes. An empty list means all vehicles are allowed.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns a list of allowed vehicle classes. An empty list means all vehicles are allowed.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneGetAllowedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetAllowedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getAllowed</span><span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetDisallowedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetDisallowedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetDisallowedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the mml-definitions of vehicle classes not allowed on this lane</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneGetDisallowedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetDisallowedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of disallowed vehicle classes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns a list of disallowed vehicle classes.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneGetDisallowedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetDisallowedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getDisallowed</span><span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationLaneGetMaxSpeedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetMaxSpeedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationLaneGetMaxSpeedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the length of the named lane [m]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span>

<div class="viewcode-block" id="TransportationLaneGetMaxSpeedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetMaxSpeedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the maximum allowed speed on the lane in m/s.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the maximum allowed speed on the lane in m/s.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;laneID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a lane id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationLaneGetMaxSpeedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationLaneGetMaxSpeedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationLaneGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">laneID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;laneID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">lane</span><span class="o">.</span><span class="n">getMaxSpeed</span><span class="p">(</span><span class="n">laneID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1"># Vehicle Value Retrieval</span>
<div class="viewcode-block" id="TransportationVehicleGetLateralSpeedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLateralSpeedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetLateralSpeedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the lateral speed of the named vehicle within the last step [m/s]; error value: -2^30</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetLateralSpeedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLateralSpeedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the lateral speed in m/s of the named vehicle within the last step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the lateral speed in m/s of the named vehicle within the last step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetLateralSpeedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLateralSpeedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getLateralSpeed</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">-</span><span class="mf">1073741824.0</span> <span class="ow">in</span> <span class="n">tracioutput</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetPosition3DViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetPosition3DViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetPosition3DViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the 3D-position(three doubles) of the named vehicle (center of the front bumper) within the last step [m,m,m]; error value: [-2^30, -2^30, -2^30].</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetPosition3DViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetPosition3DViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the position of the named vehicle within the last step [m,m,m].&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the position of the named vehicle within the last step [m,m,m].&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetPosition3DViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetPosition3DViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getPosition3D</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">-</span><span class="mf">1073741824.0</span> <span class="ow">in</span> <span class="n">tracioutput</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetAngleViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetAngleViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetAngleViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the angle of the named vehicle within the last step [°]; error value: -2^30</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetAngleViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetAngleViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the angle in degrees of the named vehicle within the last step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the angle in degrees of the named vehicle within the last step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetAngleViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetAngleViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getAngle</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">-</span><span class="mf">1073741824.0</span> <span class="ow">in</span> <span class="n">tracioutput</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="TransportationVehicleGetRoadIDViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetRoadIDViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetRoadIDViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the id of the edge the named vehicle was at within the last step; error value: &quot;&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetRoadIDViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetRoadIDViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the id of the edge the named vehicle was at within the last step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the id of the edge the named vehicle was at within the last step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetRoadIDViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetRoadIDViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getRoadID</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetLaneIDViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLaneIDViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetLaneIDViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the id of the lane the named vehicle was at within the last step; error value: &quot;&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetLaneIDViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLaneIDViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the id of the lane the named vehicle was at within the last step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the id of the lane the named vehicle was at within the last step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetLaneIDViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLaneIDViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getLaneID</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetLaneIndexViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLaneIndexViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetLaneIndexViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the index of the lane the named vehicle was at within the last step; error value: -2^30</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetLaneIndexViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLaneIndexViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the index of the lane the named vehicle was at within the last step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the index of the lane the named vehicle was at within the last step.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetLaneIndexViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLaneIndexViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getLaneIndex</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">-</span><span class="mf">1073741824.0</span> <span class="ow">in</span> <span class="n">tracioutput</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetTypeIDViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetTypeIDViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetTypeIDViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the id of the type of the named vehicle</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetTypeIDViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetTypeIDViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the id of the type of the named vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the id of the type of the named vehicle.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetTypeIDViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetTypeIDViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getTypeID</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetRouteIDViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetRouteIDViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetRouteIDViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the id of the route of the named vehicle</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetRouteIDViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetRouteIDViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the id of the route of the named vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the id of the route of the named vehicle.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetRouteIDViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetRouteIDViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getRouteID</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetRouteIndexViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetRouteIndexViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetRouteIndexViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the index of the current edge within the vehicles route or -1 if the vehicle has not yet departed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetRouteIndexViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetRouteIndexViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the index of the current edge within the vehicles route or -1 if the vehicle has not yet departed&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the index of the current edge within the vehicles route or -1 if the vehicle has not yet departed&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetRouteIndexViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetRouteIndexViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getRouteIndex</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetRouteViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetRouteViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetRouteViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the ids of the edges the vehicle&#39;s route is made of</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetRouteViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetRouteViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the ids of the edges the vehicle&#39;s route is made of.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the ids of the edges the vehicle&#39;s route is made of.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetRouteViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetRouteViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getRoute</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetColorViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetColorViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetColorViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get  the vehicle&#39;s color (RGBA). This does not return the currently visible color in the GUI but the color value set in the XML file or via TraCI.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetColorViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetColorViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the vehicle&#39;s rgba color.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the vehicle&#39;s rgba color.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetColorViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetColorViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getColor</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetLanePositionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLanePositionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetLanePositionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the position of the vehicle along the lane (the distance from the front bumper to the start of the lane in [m]); error value: -2^30</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetLanePositionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLanePositionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the position of the vehicle along the lane measured in m.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the position of the vehicle along the lane measured in m..&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetLanePositionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLanePositionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getLanePosition</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">-</span><span class="mf">1073741824.0</span> <span class="ow">in</span> <span class="n">tracioutput</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetDistanceViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetDistanceViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetDistanceViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the distance, the vehicle has already driven [m]); error value: -2^30</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetDistanceViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetDistanceViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the distance to the starting point like an odometer.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the distance to the starting point like an odometer.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetDistanceViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetDistanceViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getDistance</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">-</span><span class="mf">1073741824.0</span> <span class="ow">in</span> <span class="n">tracioutput</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetSignalsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSignalsViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetSignalsViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get an integer encoding the state of a vehicle&#39;s signals, see TraCI/Vehicle Signalling for more information.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetSignalsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSignalsViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns an integer encoding the state of a vehicle&#39;s signals.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns an integer encoding the state of a vehicle&#39;s signals.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetSignalsViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSignalsViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getSignals</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetRoutingModeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetRoutingModeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetRoutingModeViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get an integer encoding the current routing mode (0: default, 1: aggregated)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetRoutingModeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetRoutingModeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the current routing mode:</span>
<span class="sd">            tc.ROUTING_MODE_DEFAULT    : use weight storages and fall-back to edge speeds (default)</span>
<span class="sd">            tc.ROUTING_MODE_AGGREGATED : use global smoothed travel times from device.rerouting&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the current routing mode:</span>
<span class="s2">                            tc.ROUTING_MODE_DEFAULT    : use weight storages and fall-back to edge speeds (default)</span>
<span class="s2">                            tc.ROUTING_MODE_AGGREGATED : use global smoothed travel times from device.rerouting.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetRoutingModeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetRoutingModeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getRoutingMode</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetTaxiFleetViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetTaxiFleetViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetTaxiFleetViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the list of all taxis with the given mode:(-1: all, 0 : empty, 1 : pickup,2 : occupied, 3: pickup+occupied). Note: vehicles that are in state pickup+occupied (due to ride sharing) will also be returned when requesting mode 1 or 2</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTaxiGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetTaxiFleetViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetTaxiFleetViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the list of all taxis with the given mode&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Return the list of all taxis with the given mode&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;flag&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Provide a mode:</span>
<span class="s2">                                    -1 : all</span>
<span class="s2">                                    0 : empty</span>
<span class="s2">                                    1 : pickup</span>
<span class="s2">                                    2 : occupied&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetTaxiFleetViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetTaxiFleetViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTaxiGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;flag&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getTaxiFleet</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetBestLanesViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetBestLanesViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetBestLanesViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get for each lane on the current edge, the sequences of lanes that would be followed from that lane without lane-change as well as information regarding lane-change desirability are returned (see below).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetBestLanesViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetBestLanesViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Information about the wish to use subsequent edges&#39; lanes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns information about the wish to use subsequent edges&#39; lanes.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetBestLanesViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetBestLanesViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getBestLanes</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetStopStateViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetStopStateViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetStopStateViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get information in regard to stopping: value = 1 * stopped + 2 * parking + 4 * triggered + 8 * containerTriggered + 16 * atBusStop + 32 * atContainerStop + 64 * atChargingStation + 128 * atParkingArea</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetStopStateViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetStopStateViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns information in regard to stopping&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns information in regard to stopping:</span>
<span class="s2">The returned integer is defined as 1 * stopped + 2 * parking</span>
<span class="s2">+ 4 * personTriggered + 8 * containerTriggered + 16 * isBusStop</span>
<span class="s2">+ 32 * isContainerStop</span>
<span class="s2">with each of these flags defined as 0 or 1&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetStopStateViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetStopStateViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getStopState</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleIsAtBusStopViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleIsAtBusStopViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleIsAtBusStopViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get whether the vehicle is stopped at a bus stop</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleIsAtBusStopViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleIsAtBusStopViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return whether the vehicle is stopped at a bus stop&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Return whether the vehicle is stopped at a bus stop&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleIsAtBusStopViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleIsAtBusStopViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">isAtBusStop</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleIsAtContainerStopViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleIsAtContainerStopViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleIsAtContainerStopViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get whether the vehicle is stopped at a container stop</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleIsAtContainerStopViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleIsAtContainerStopViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return whether the vehicle is stopped at a container stop&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Return whether the vehicle is stopped at a container stop&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleIsAtContainerStopViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleIsAtContainerStopViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">isAtContainerStop</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleIsStoppedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleIsStoppedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleIsStoppedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get whether the vehicle is stopped</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleIsStoppedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleIsStoppedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return whether the vehicle is stopped&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Return whether the vehicle is stopped &quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleIsStoppedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleIsStoppedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">isStopped</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleIsStoppedParkingViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleIsStoppedParkingViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleIsStoppedParkingViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get whether the vehicle is parking (implies stopped)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleIsStoppedParkingViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleIsStoppedParkingViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return whether the vehicle is parking (implies stopped)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Return whether the vehicle is parking (implies stopped) &quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleIsStoppedParkingViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleIsStoppedParkingViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">isStoppedParking</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleIsStoppedTriggeredViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleIsStoppedTriggeredViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleIsStoppedTriggeredViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get whether the vehicle is stopped and waiting for a person or container</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleIsStoppedTriggeredViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleIsStoppedTriggeredViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return whether the vehicle is stopped and waiting for a person or container&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Return whether the vehicle is stopped and waiting for a person or container &quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleIsStoppedTriggeredViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleIsStoppedTriggeredViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">isStoppedTriggered</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetLengthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLengthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetLengthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the length of the vehicles [m]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetLengthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLengthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the length in m of the given vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the length in m of the given vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetLengthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLengthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getLength</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetMaxSpeedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetMaxSpeedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetMaxSpeedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the maximum speed of the vehicle [m/s]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetMaxSpeedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetMaxSpeedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the maximum speed in m/s of this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the maximum speed in m/s of this vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetMaxSpeedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetMaxSpeedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getMaxSpeed</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetAccelViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetAccelViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetAccelViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get  the maximum acceleration possibility of this vehicle [m/s^2]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetAccelViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetAccelViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the maximum acceleration possibility in m/s^2 of this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the maximum acceleration possibility in m/s^2 of this vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetAccelViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetAccelViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getAccel</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetDecelViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetDecelViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetDecelViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the maximum deceleration possibility of this vehicle [m/s^2]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetDecelViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetDecelViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the preferred maximal deceleration possibility in m/s^2 of this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the preferred maximal deceleration possibility in m/s^2 of this vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetDecelViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetDecelViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getDecel</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetTauViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetTauViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetTauViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the driver&#39;s desired time headway for this vehicle [s]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetTauViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetTauViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the driver&#39;s desired (minimum) headway time in s for this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the driver&#39;s desired (minimum) headway time in s for this vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetTauViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetTauViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getTau</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetImperfectionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetImperfectionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetImperfectionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the driver&#39;s imperfection (dawdling) [0,1]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetImperfectionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetImperfectionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the sigma value denoting the driver imperfection in the Krauss model (0 denotes perfect driving).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the sigma value denoting the driver imperfection in the Krauss model (0 denotes perfect driving).&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetImperfectionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetImperfectionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getImperfection</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetSpeedFactorViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSpeedFactorViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetSpeedFactorViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the road speed multiplier for this vehicle [double]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetSpeedFactorViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSpeedFactorViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the chosen speed factor for this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the chosen speed factor for this vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetSpeedFactorViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSpeedFactorViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getSpeedFactor</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>



<div class="viewcode-block" id="TransportationVehicleGetSpeedDeviationViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSpeedDeviationViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetSpeedDeviationViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the deviation of speedFactor for this vehicle [double]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetSpeedDeviationViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSpeedDeviationViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the chosen speed factor for this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the chosen speed factor for this vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetSpeedDeviationViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSpeedDeviationViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getSpeedDeviation</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetVehicleClassViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetVehicleClassViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetVehicleClassViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the permission class of this vehicle</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetVehicleClassViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetVehicleClassViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the vehicle class of this vehicle&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the vehicle class of this vehicle,</span>
<span class="s2">see https://sumo.dlr.de/docs/Definition_of_Vehicles,_Vehicle_Types,_and_Routes.html#abstract_vehicle_class.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetVehicleClassViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetVehicleClassViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getVehicleClass</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetEmissionClassViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetEmissionClassViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetEmissionClassViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the emission class of this vehicle</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetEmissionClassViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetEmissionClassViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the emission class of this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the emission class of this vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetEmissionClassViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetEmissionClassViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getEmissionClass</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetShapeClassViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetShapeClassViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetShapeClassViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the shape class of this vehicle</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetShapeClassViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetShapeClassViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the shape class of this vehicle&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the shape class of this vehicle,</span>
<span class="s2">see https://sumo.dlr.de/docs/Definition_of_Vehicles,_Vehicle_Types,_and_Routes.html#visualization.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetShapeClassViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetShapeClassViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getShapeClass</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetMinGapViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetMinGapViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetMinGapViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the offset (gap to front vehicle if halting) of this vehicle [m]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetMinGapViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetMinGapViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the offset (gap to front vehicle if halting) of this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the offset (gap to front vehicle if halting) of this vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetMinGapViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetMinGapViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getMinGap</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetWidthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetWidthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetWidthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the width of this vehicle [m]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetWidthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetWidthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the width in m of this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the width in m of this vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetWidthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetWidthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getWidth</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetHeightViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetHeightViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetHeightViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the height of this vehicle [m]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetHeightViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetHeightViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the height in m of this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the height in m of this vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetHeightViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetHeightViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getHeight</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetPersonCapacityViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetPersonCapacityViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetPersonCapacityViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the total number of persons that can ride in this vehicle</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetPersonCapacityViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetPersonCapacityViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the person capacity of the vehicle&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the person capacity of the vehicle&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetPersonCapacityViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetPersonCapacityViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getPersonCapacity</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetWaitingTimeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetWaitingTimeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetWaitingTimeViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the consecutive time in where this vehicle was standing [s] (voluntary stopping is excluded)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetWaitingTimeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetWaitingTimeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the waiting time of a vehicle&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;The waiting time of a vehicle is defined as the time (in seconds) spent with a</span>
<span class="s2">speed below 0.1m/s since the last time it was faster than 0.1m/s.</span>
<span class="s2">(basically, the waiting time of a vehicle is reset to 0 every time it moves).</span>
<span class="s2">A vehicle that is stopping intentionally with a &lt;stop&gt; does not accumulate waiting time.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetWaitingTimeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetWaitingTimeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getWaitingTime</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetAccumulatedWaitingTimeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetAccumulatedWaitingTimeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetAccumulatedWaitingTimeViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the accumulated waiting time [s] within the previous time interval of default length 100 s. (length is configurable per option --waiting-time-memory given to the main application)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetAccumulatedWaitingTimeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetAccumulatedWaitingTimeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the accumulated waiting time of a vehicle&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;The accumulated waiting time of a vehicle collects the vehicle&#39;s waiting time</span>
<span class="s2">over a certain time interval (interval length is set per option &#39;--waiting-time-memory&#39;)&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetAccumulatedWaitingTimeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetAccumulatedWaitingTimeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getAccumulatedWaitingTime</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetNextTLSViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetNextTLSViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetNextTLSViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get upcoming traffic lights, along with distance and state</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetNextTLSViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetNextTLSViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return list of upcoming traffic lights [(tlsID, tlsIndex, distance, state), ...]&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Return list of upcoming traffic lights [(tlsID, tlsIndex, distance, state), ...]&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetNextTLSViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetNextTLSViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getNextTLS</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>



<div class="viewcode-block" id="TransportationVehicleGetNextStopsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetNextStopsViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetNextStopsViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the list of upcoming stops, each as compound (laneID, endPos, ID, flags, duration, until). If flag 1 is set (stop reached), duration encodes the remaining duration. Negative values indicate being blocked from re-entering traffic after a parking stop.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetNextStopsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetNextStopsViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return list of upcoming stops&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Return list of upcoming stops [(lane, endPos, stoppingPlaceID, stopFlags, duration, until), ...]</span>
<span class="s2">where integer stopFlag is defined as:</span>
<span class="s2">       1 * stopped +</span>
<span class="s2">       2 * parking +</span>
<span class="s2">       4 * personTriggered +</span>
<span class="s2">       8 * containerTriggered +</span>
<span class="s2">      16 * isBusStop +</span>
<span class="s2">      32 * isContainerStop +</span>
<span class="s2">      64 * chargingStation +</span>
<span class="s2">     128 * parkingarea</span>
<span class="s2">with each of these flags defined as 0 or 1.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetNextStopsViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetNextStopsViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getNextStops</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>



<div class="viewcode-block" id="TransportationVehicleGetPersonIDListViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetPersonIDListViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetPersonIDListViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the list of persons which includes those defined using attribute &#39;personNumber&#39; as well as -objects which are riding in this vehicle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetPersonIDListViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetPersonIDListViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the list of persons who are riding in this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the list of persons who are riding in this vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetPersonIDListViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetPersonIDListViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getPersonIDList</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetSpeedModeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSpeedModeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetSpeedModeViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get how the values set by speed (0x40) and slowdown (0x14) shall be treated. See the set speedmode command for details.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetSpeedModeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSpeedModeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the speed mode of a vehicle&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;The speed mode of a vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetSpeedModeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSpeedModeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getSpeedMode</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetLaneChangeModeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLaneChangeModeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetLaneChangeModeViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get information on how lane changing in general and lane changing requests by TraCI are performed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetLaneChangeModeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLaneChangeModeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the vehicle&#39;s lane change mode as a bitset.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Gets the vehicle&#39;s lane change mode as a bitset.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetLaneChangeModeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLaneChangeModeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getLaneChangeMode</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetSlopeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSlopeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetSlopeViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the slope at the current vehicle position in degrees</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetSlopeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSlopeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The slope at the current position of the vehicle in degrees&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;The slope at the current position of the vehicle in degrees&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetSlopeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSlopeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getSlope</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetAllowedSpeedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetAllowedSpeedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetAllowedSpeedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the maximum allowed speed on the current lane regarding speed factor in m/s for this vehicle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetAllowedSpeedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetAllowedSpeedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the maximum allowed speed on the current lane regarding speed factor in m/s for this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the maximum allowed speed on the current lane regarding speed factor in m/s for this vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetAllowedSpeedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetAllowedSpeedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getAllowedSpeed</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetLineViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLineViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetLineViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the line information of this vehicle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetLineViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLineViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the line information of this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the line information of this vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetLineViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLineViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getLine</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetPersonNumberViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetPersonNumberViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetPersonNumberViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the total number of persons which includes those defined using attribute &#39;personNumber&#39; as well as &lt;person&gt;-objects which are riding in this vehicle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetPersonNumberViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetPersonNumberViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the total number of persons&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the total number of persons which includes those defined using attribute &#39;personNumber&#39; as well as &lt;person&gt;-objects who are riding in this vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetPersonNumberViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetPersonNumberViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getPersonNumber</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetViaViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetViaViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetViaViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the ids of via edges for this vehicle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetViaViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetViaViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the ids of via edges for this vehicle&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the ids of via edges for this vehicle&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetViaViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetViaViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getVia</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetSpeedWithoutTraCIViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSpeedWithoutTraCIViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetSpeedWithoutTraCIViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the speed that the vehicle would drive if not speed-influencing command such as setSpeed or slowDown was given.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetSpeedWithoutTraCIViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSpeedWithoutTraCIViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the speed that the vehicle would drive if no speed-influencing command such as setSpeed or slowDown was given.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the speed that the vehicle would drive if no speed-influencing</span>
<span class="s2">command such as setSpeed or slowDown was given.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetSpeedWithoutTraCIViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetSpeedWithoutTraCIViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getSpeedWithoutTraCI</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleIsRouteValidViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleIsRouteValidViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleIsRouteValidViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get whether the current vehicle route is connected for the vehicle class of the given vehicle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleIsRouteValidViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleIsRouteValidViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns whether the current vehicle route is connected for the vehicle class of the given vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns whether the current vehicle route is connected for the vehicle class of the given vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleIsRouteValidViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleIsRouteValidViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">isRouteValid</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetLateralLanePositionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLateralLanePositionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetLateralLanePositionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the lateral position of the vehicle on its current lane measured in m.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetLateralLanePositionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLateralLanePositionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the lateral position of the vehicle on its current lane measured in m.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the lateral position of the vehicle on its current lane measured in m.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetLateralLanePositionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLateralLanePositionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getLateralLanePosition</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetMaxSpeedLatViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetMaxSpeedLatViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetMaxSpeedLatViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the maximum lateral speed in m/s of this vehicle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetMaxSpeedLatViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetMaxSpeedLatViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the maximum lateral speed in m/s of this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the maximum lateral speed in m/s of this vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetMaxSpeedLatViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetMaxSpeedLatViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getMaxSpeedLat</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetMinGapLatViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetMinGapLatViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetMinGapLatViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the desired lateral gap of this vehicle at 50km/h in m.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetMinGapLatViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetMinGapLatViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns The desired lateral gap of this vehicle at 50km/h in m&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns The desired lateral gap of this vehicle at 50km/h in m&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetMinGapLatViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetMinGapLatViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getMinGapLat</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetLateralAlignmentViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLateralAlignmentViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetLateralAlignmentViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the preferred lateral alignment of the vehicle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetLateralAlignmentViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLateralAlignmentViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns The preferred lateral alignment of the vehicle&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns The preferred lateral alignment of the vehicle,</span>
<span class="s2">see https://sumo.dlr.de/docs/Simulation/SublaneModel.html#lane-changing&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetLateralAlignmentViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLateralAlignmentViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getLateralAlignment</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetActionStepLengthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetActionStepLengthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetActionStepLengthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the current action step length for the vehicle in s.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetActionStepLengthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetActionStepLengthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the action step length in s for this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the action step length in s for this vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetActionStepLengthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetActionStepLengthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getActionStepLength</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetLastActionTimeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLastActionTimeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetLastActionTimeViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the time of the last action step in s.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetLastActionTimeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLastActionTimeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the time in s of last action point for this vehicle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the time in s of last action point for this vehicle.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetLastActionTimeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetLastActionTimeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getLastActionTime</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetStopsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetStopsViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetStopsViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the list of the next or last n stops as StopData objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetStopsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetStopsViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a StopData object. The flags are the same as for setStop and replaceStop&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Return a StopData object. The flags are the same as for setStop and</span>
<span class="s2">replaceStop (and different from getNextStops!):</span>
<span class="s2">       1 * parking +</span>
<span class="s2">       2 * personTriggered +</span>
<span class="s2">       4 * containerTriggered +</span>
<span class="s2">       8 * isBusStop +</span>
<span class="s2">      16 * isContainerStop +</span>
<span class="s2">      32 * chargingStation +</span>
<span class="s2">      64 * parkingarea</span>
<span class="s2">with each of these flags defined as 0 or 1.</span>
<span class="s2"> </span>
<span class="s2">The optional argument limit can be used to limit the returned stops to</span>
<span class="s2">the next INT number (i.e. limit=1 if only the next stop is required).</span>
<span class="s2">Setting a negative limit returns up to &#39;limit&#39; previous stops (or fewer</span>
<span class="s2">if the vehicle stopped fewer times previously)&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;vehID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetStopsViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetStopsViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">vehID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;vehID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getStops</span><span class="p">(</span><span class="n">vehID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleGetParameterViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetParameterViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleGetParameterViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the value for the given string parameter</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleGetParameterViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetParameterViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the value of the given parameter for the given objID&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the value of the given parameter for the given objID&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;objID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an object id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;param&#39;</span><span class="p">:</span> <span class="s1">&#39;https://sumo.dlr.de/docs/TraCI/Vehicle_Value_Retrieval.html#device_and_lanechangemodel_parameter_retrieval_0x7e&#39;</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleGetParameterViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleGetParameterViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">objID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;objID&#39;</span><span class="p">)</span>
            <span class="n">param</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;param&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getParameter</span><span class="p">(</span><span class="n">objID</span><span class="p">,</span><span class="n">param</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1"># VehicleType Value Retrieval</span>
<div class="viewcode-block" id="TransportationVehicleTypeGetIDListViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetIDListViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetIDListViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get a list of ids of currently loaded vehicle types (the given vehicle type ID is ignored)</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="TransportationVehicleTypeGetIDListViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetIDListViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all objects in the network.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getIDList</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns a list of all objects in the network..&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;data&#39;</span><span class="p">:</span><span class="n">traciout</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div></div>



<div class="viewcode-block" id="TransportationVehicleTypeGetIDCountViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetIDCountViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetIDCountViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the number of currently loaded vehicle types (the given vehicle type ID is ignored)</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="TransportationVehicleTypeGetIDCountViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetIDCountViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of currently loaded objects.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getIDCount</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the number of currently loaded objects.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;data&#39;</span><span class="p">:</span><span class="n">traciout</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetLengthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetLengthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetLengthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get  the length of the vehicles of this type [m]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetLengthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetLengthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the length in m of the vehicles of this type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the length in m of the vehicles of this type.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetLengthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetLengthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getLength</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetMaxSpeedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetMaxSpeedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetMaxSpeedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the maximum speed of vehicles of this type [m/s]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetMaxSpeedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetMaxSpeedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the maximum speed in m/s of vehicles of this type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the maximum speed in m/s of vehicles of this type.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetMaxSpeedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetMaxSpeedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getMaxSpeed</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetAccelViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetAccelViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetAccelViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the maximum acceleration possibility of vehicles of this type [m/s^2]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetAccelViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetAccelViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the maximum acceleration in m/s^2 of vehicles of this type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the maximum acceleration in m/s^2 of vehicles of this type.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetAccelViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetAccelViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getAccel</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetDecelViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetDecelViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetDecelViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the maximum deceleration possibility of vehicles of this type [m/s^2]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetDecelViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetDecelViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the maximal comfortable deceleration in m/s^2 of vehicles of this type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the maximal comfortable deceleration in m/s^2 of vehicles of this type.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetDecelViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetDecelViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getDecel</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetTauViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetTauViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetTauViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the driver&#39;s desired time headway for vehicles of this type [s]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetTauViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetTauViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the driver&#39;s desired headway in s for vehicles of this type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the driver&#39;s desired headway in s for vehicles of this type.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetTauViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetTauViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getTau</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetImperfectionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetImperfectionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetImperfectionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the driver&#39;s imperfection (dawdling) [0,1]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetImperfectionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetImperfectionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the driver&#39;s imperfection for vehicles of this type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the driver&#39;s imperfection for vehicles of this type.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetImperfectionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetImperfectionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getImperfection</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetSpeedFactorViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetSpeedFactorViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetSpeedFactorViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get  the road speed multiplier for drivers of this type [double]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetSpeedFactorViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetSpeedFactorViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the speed factor of vehicles of this type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the speed factor of vehicles of this type.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetSpeedFactorViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetSpeedFactorViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getSpeedFactor</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetSpeedDeviationViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetSpeedDeviationViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetSpeedDeviationViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the deviation of speedFactor for drivers of this type [double]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetSpeedDeviationViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetSpeedDeviationViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the maximum speed deviation of vehicles of this type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the maximum speed deviation of vehicles of this type.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetSpeedDeviationViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetSpeedDeviationViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getSpeedDeviation</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetVehicleClassViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetVehicleClassViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetVehicleClassViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the class of vehicles of this type</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetVehicleClassViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetVehicleClassViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the class of vehicles of this type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the class of vehicles of this type.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetVehicleClassViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetVehicleClassViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getVehicleClass</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetEmissionClassViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetEmissionClassViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetEmissionClassViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the emission class of vehicles of this type</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetEmissionClassViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetEmissionClassViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the emission class of vehicles of this type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the emission class of vehicles of this type.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetEmissionClassViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetEmissionClassViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getEmissionClass</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetShapeClassViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetShapeClassViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetShapeClassViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the shape of vehicles of this type</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetShapeClassViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetShapeClassViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the shape class of vehicles of this type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the shape class of vehicles of this type.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetShapeClassViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetShapeClassViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getShapeClass</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetMinGapViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetMinGapViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetMinGapViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the offset (gap to front vehicle if halting) of vehicles of this type [m]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetMinGapViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetMinGapViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the offset (gap to front vehicle if halting) of vehicles of this type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the offset (gap to front vehicle if halting) of vehicles of this type.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetMinGapViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetMinGapViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getMinGap</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetWidthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetWidthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetWidthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the width of vehicles of this type [m]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetWidthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetWidthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the width in m of vehicles of this type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the width in m of vehicles of this type.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetWidthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetWidthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getWidth</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetHeightViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetHeightViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetHeightViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the height of vehicles of this type [m]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetHeightViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetHeightViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the height in m of vehicles of this type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the height in m of vehicles of this type.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetHeightViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetHeightViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getHeight</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetColorViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetColorViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetColorViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the color of this type</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetColorViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetColorViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the color of this type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the color of this type.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetColorViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetColorViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getColor</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetMaxSpeedLatViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetMaxSpeedLatViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetMaxSpeedLatViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the maximum lateral speed in m/s of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetMaxSpeedLatViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetMaxSpeedLatViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the maximum lateral speed in m/s of this type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the maximum lateral speed in m/s of this type.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetMaxSpeedLatViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetMaxSpeedLatViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getMaxSpeedLat</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetMinGapLatViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetMinGapLatViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetMinGapLatViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the desired lateral gap of this type at 50km/h in m.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetMinGapLatViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetMinGapLatViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns The desired lateral gap of this type at 50km/h in m&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns The desired lateral gap of this type at 50km/h in m&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetMinGapLatViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetMinGapLatViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getMinGapLat</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetLateralAlignmentViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetLateralAlignmentViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetLateralAlignmentViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the preferred lateral alignment of the type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetLateralAlignmentViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetLateralAlignmentViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns The preferred lateral alignment of the type&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns The preferred lateral alignment of the type&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetLateralAlignmentViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetLateralAlignmentViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getLateralAlignment</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetActionStepLengthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetActionStepLengthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetActionStepLengthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the action step length for the vehicle type in s.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetActionStepLengthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetActionStepLengthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the action step length for vehicles of this type.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the action step length for vehicles of this type.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetActionStepLengthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetActionStepLengthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getActionStepLength</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationVehicleTypeGetPersonCapacityViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetPersonCapacityViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationVehicleTypeGetPersonCapacityViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the total number of persons that can ride in a vehicle of this type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span>

<div class="viewcode-block" id="TransportationVehicleTypeGetPersonCapacityViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetPersonCapacityViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the person capacity of this type&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the person capacity of this type&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;typeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a vehicle type id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationVehicleTypeGetPersonCapacityViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationVehicleTypeGetPersonCapacityViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationVehicleTypeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">typeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;typeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicletype</span><span class="o">.</span><span class="n">getPersonCapacity</span><span class="p">(</span><span class="n">typeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1"># BusStop Value Retrieval</span>
<div class="viewcode-block" id="TransportationBusStopGetEndPosViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetEndPosViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationBusStopGetEndPosViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the end position of the stop along the lane measured in m.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationBusStopGetSerializer</span>

<div class="viewcode-block" id="TransportationBusStopGetEndPosViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetEndPosViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the end position of the stop along the lane measured in m.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the end position of the stop along the lane measured in m.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;stopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a stop id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationBusStopGetEndPosViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetEndPosViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationBusStopGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">stopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;stopID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">busstop</span><span class="o">.</span><span class="n">getEndPos</span><span class="p">(</span><span class="n">stopID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationBusStopGetLaneIDViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetLaneIDViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationBusStopGetLaneIDViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the lane of this calibrator (if it applies to a single lane)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationBusStopGetSerializer</span>

<div class="viewcode-block" id="TransportationBusStopGetLaneIDViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetLaneIDViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the lane of this calibrator (if it applies to a single lane)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the lane of this calibrator (if it applies to a single lane)&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;stopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a stop id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationBusStopGetLaneIDViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetLaneIDViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationBusStopGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">stopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;stopID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">busstop</span><span class="o">.</span><span class="n">getLaneID</span><span class="p">(</span><span class="n">stopID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationBusStopGetNameViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetNameViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationBusStopGetNameViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the name of this stop</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationBusStopGetSerializer</span>

<div class="viewcode-block" id="TransportationBusStopGetNameViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetNameViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the name of this stop&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the name of this stop&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;stopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a stop id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationBusStopGetNameViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetNameViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationBusStopGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">stopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;stopID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">busstop</span><span class="o">.</span><span class="n">getName</span><span class="p">(</span><span class="n">stopID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationBusStopGetPersonCountViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetPersonCountViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationBusStopGetPersonCountViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the total number of waiting persons at the named bus stop.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationBusStopGetSerializer</span>

<div class="viewcode-block" id="TransportationBusStopGetPersonCountViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetPersonCountViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the total number of waiting persons at the named bus stop.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Get the total number of waiting persons at the named bus stop.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;stopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a stop id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationBusStopGetPersonCountViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetPersonCountViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationBusStopGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">stopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;stopID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">busstop</span><span class="o">.</span><span class="n">getPersonCount</span><span class="p">(</span><span class="n">stopID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationBusStopGetPersonIDsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetPersonIDsViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationBusStopGetPersonIDsViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the IDs of waiting persons at the named bus stop.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationBusStopGetSerializer</span>

<div class="viewcode-block" id="TransportationBusStopGetPersonIDsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetPersonIDsViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the IDs of waiting persons at the named bus stop.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Get the IDs of waiting persons at the named bus stop.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;stopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a stop id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationBusStopGetPersonIDsViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetPersonIDsViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationBusStopGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">stopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;stopID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">busstop</span><span class="o">.</span><span class="n">getPersonIDs</span><span class="p">(</span><span class="n">stopID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationBusStopGetStartPosViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetStartPosViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationBusStopGetStartPosViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the starting position of the stop along the lane measured in m.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationBusStopGetSerializer</span>

<div class="viewcode-block" id="TransportationBusStopGetStartPosViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetStartPosViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the starting position of the stop along the lane measured in m.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Get the starting position of the stop along the lane measured in m.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;stopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a stop id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationBusStopGetStartPosViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetStartPosViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationBusStopGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">stopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;stopID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">busstop</span><span class="o">.</span><span class="n">getStartPos</span><span class="p">(</span><span class="n">stopID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationBusStopGetVehicleCountViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetVehicleCountViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationBusStopGetVehicleCountViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the total number of vehicles stopped at the named bus stop.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationBusStopGetSerializer</span>

<div class="viewcode-block" id="TransportationBusStopGetVehicleCountViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetVehicleCountViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the total number of vehicles stopped at the named bus stop.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Get the total number of vehicles stopped at the named bus stop.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;stopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a stop id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationBusStopGetVehicleCountViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetVehicleCountViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationBusStopGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">stopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;stopID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">busstop</span><span class="o">.</span><span class="n">getVehicleCount</span><span class="p">(</span><span class="n">stopID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationBusStopGetVehicleIDsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetVehicleIDsViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationBusStopGetVehicleIDsViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the IDs of vehicles stopped at the named bus stop.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationBusStopGetSerializer</span>

<div class="viewcode-block" id="TransportationBusStopGetVehicleIDsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetVehicleIDsViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the IDs of vehicles stopped at the named bus stop.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Get the IDs of vehicles stopped at the named bus stop.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;stopID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide a stop id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationBusStopGetVehicleIDsViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationBusStopGetVehicleIDsViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationBusStopGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">stopID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;stopID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">busstop</span><span class="o">.</span><span class="n">getVehicleIDs</span><span class="p">(</span><span class="n">stopID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<span class="c1"># Edge Value Retrieval</span>
<div class="viewcode-block" id="TransportationEdgeGetIDListViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetIDListViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetIDListViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get a list of ids of all edges within the scenario (the given Edge ID is ignored)</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="TransportationEdgeGetIDListViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetIDListViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all objects in the network.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getIDList</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns a list of all objects in the network.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;data&#39;</span><span class="p">:</span><span class="n">traciout</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div></div>



<div class="viewcode-block" id="TransportationEdgeGetIDCountViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetIDCountViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetIDCountViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the number of edges within the scenario (the given Edge ID is ignored)</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="TransportationEdgeGetIDCountViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetIDCountViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of currently loaded objects.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">traciout</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getIDCount</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span> <span class="p">(</span><span class="n">e</span><span class="p">)})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;Returns the number of currently loaded objects.&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;data&#39;</span><span class="p">:</span><span class="n">traciout</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgeGetLaneNumberViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLaneNumberViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetLaneNumberViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the number of lanes for the given edge ID</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span>

<div class="viewcode-block" id="TransportationEdgeGetLaneNumberViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLaneNumberViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of lanes of this edge&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the number of lanes of this edge&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationEdgeGetLaneNumberViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLaneNumberViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getLaneNumber</span><span class="p">(</span><span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgeGetStreetNameViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetStreetNameViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetStreetNameViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the street name for the given edge ID</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span>

<div class="viewcode-block" id="TransportationEdgeGetStreetNameViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetStreetNameViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the street name of this edge&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the street name of this edge&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationEdgeGetStreetNameViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetStreetNameViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getStreetName</span><span class="p">(</span><span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgeGetTraveltimeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetTraveltimeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetTraveltimeViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the current travel time (length/mean speed).</span>
<span class="sd">Note: This definition of travel time has to be reverified.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span>

<div class="viewcode-block" id="TransportationEdgeGetTraveltimeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetTraveltimeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the estimated travel time in s for the last time step on the given edge.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the estimated travel time in s for the last time step on the given edge.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationEdgeGetTraveltimeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetTraveltimeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getTraveltime</span><span class="p">(</span><span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgeGetCO2EmissionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetCO2EmissionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetCO2EmissionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the sum of CO2 emissions on this edge in mg during this time step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span>

<div class="viewcode-block" id="TransportationEdgeGetCO2EmissionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetCO2EmissionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the CO2 emission in mg for the last time step on the given edge.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the CO2 emission in mg for the last time step on the given edge.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationEdgeGetCO2EmissionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetCO2EmissionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getCO2Emission</span><span class="p">(</span><span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgeGetCOEmissionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetCOEmissionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetCOEmissionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the sum of CO emissions on this edge in mg during this time step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span>

<div class="viewcode-block" id="TransportationEdgeGetCOEmissionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetCOEmissionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the CO emission in mg for the last time step on the given edge.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the CO emission in mg for the last time step on the given edge.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationEdgeGetCOEmissionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetCOEmissionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getCOEmission</span><span class="p">(</span><span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgeGetHCEmissionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetHCEmissionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetHCEmissionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the sum of HC emissions on this edge in mg during this time step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span>

<div class="viewcode-block" id="TransportationEdgeGetHCEmissionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetHCEmissionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the HC emission in mg for the last time step on the given edge.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the HC emission in mg for the last time step on the given edge.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationEdgeGetHCEmissionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetHCEmissionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getHCEmission</span><span class="p">(</span><span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgeGetPMxEmissionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetPMxEmissionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetPMxEmissionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the sum of PMx emissions on this edge in mg during this time step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span>

<div class="viewcode-block" id="TransportationEdgeGetPMxEmissionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetPMxEmissionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the particular matter emission in mg for the last time step on the given edge.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the particular matter emission in mg for the last time step on the given edge.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationEdgeGetPMxEmissionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetPMxEmissionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getPMxEmission</span><span class="p">(</span><span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgeGetNOxEmissionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetNOxEmissionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetNOxEmissionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the sum of NOx emissions on this edge in mg during this time step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span>

<div class="viewcode-block" id="TransportationEdgeGetNOxEmissionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetNOxEmissionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the NOx emission in mg for the last time step on the given edge.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the NOx emission in mg for the last time step on the given edge.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationEdgeGetNOxEmissionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetNOxEmissionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getNOxEmission</span><span class="p">(</span><span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgeGetFuelConsumptionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetFuelConsumptionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetFuelConsumptionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the sum of fuel consumption on this edge in ml during this time step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span>

<div class="viewcode-block" id="TransportationEdgeGetFuelConsumptionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetFuelConsumptionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the fuel consumption in ml for the last time step on the given edge.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the fuel consumption in ml for the last time step on the given edge.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationEdgeGetFuelConsumptionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetFuelConsumptionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getFuelConsumption</span><span class="p">(</span><span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgeGetNoiseEmissionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetNoiseEmissionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetNoiseEmissionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the sum of noise generated on this edge in dBA.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span>

<div class="viewcode-block" id="TransportationEdgeGetNoiseEmissionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetNoiseEmissionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the noise emission in db for the last time step on the given edge.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the noise emission in db for the last time step on the given edge.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationEdgeGetNoiseEmissionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetNoiseEmissionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getNoiseEmission</span><span class="p">(</span><span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgeGetElectricityConsumptionViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetElectricityConsumptionViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetElectricityConsumptionViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the sum of electricity consumption on this edge in kWh during this time step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span>

<div class="viewcode-block" id="TransportationEdgeGetElectricityConsumptionViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetElectricityConsumptionViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the electricity consumption in ml for the last time step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the electricity consumption in kWh for the last time step.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationEdgeGetElectricityConsumptionViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetElectricityConsumptionViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getElectricityConsumption</span><span class="p">(</span><span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgeGetLastStepVehicleNumberViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepVehicleNumberViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetLastStepVehicleNumberViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the number of vehicles on this edge within the last time step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span>

<div class="viewcode-block" id="TransportationEdgeGetLastStepVehicleNumberViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepVehicleNumberViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the total number of vehicles for the last time step on the given edge.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the total number of vehicles for the last time step on the given edge.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationEdgeGetLastStepVehicleNumberViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepVehicleNumberViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getLastStepVehicleNumber</span><span class="p">(</span><span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgeGetLastStepMeanSpeedViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepMeanSpeedViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetLastStepMeanSpeedViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the mean speed of vehicles that were on the named edge within the last simulation step [m/s]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span>

<div class="viewcode-block" id="TransportationEdgeGetLastStepMeanSpeedViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepMeanSpeedViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the average speed in m/s for the last time step on the given edge.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the average speed in m/s for the last time step on the given edge.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationEdgeGetLastStepMeanSpeedViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepMeanSpeedViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getLastStepMeanSpeed</span><span class="p">(</span><span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgeGetLastStepVehicleIDsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepVehicleIDsViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetLastStepVehicleIDsViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the list of ids of vehicles that were on the named edge in the last simulation step. The order is from rightmost to leftmost lane and downstream for each lane.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span>

<div class="viewcode-block" id="TransportationEdgeGetLastStepVehicleIDsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepVehicleIDsViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the ids of the vehicles for the last time step on the given edge.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the ids of the vehicles for the last time step on the given edge.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationEdgeGetLastStepVehicleIDsViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepVehicleIDsViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getLastStepVehicleIDs</span><span class="p">(</span><span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgeGetLastStepOccupancyViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepOccupancyViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetLastStepOccupancyViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the percentage of time the edge was occupied by a vehicle [%]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span>

<div class="viewcode-block" id="TransportationEdgeGetLastStepOccupancyViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepOccupancyViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the net occupancy (excluding inter-vehicle gaps) in % for the last time step on the given edge.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the net occupancy (excluding inter-vehicle gaps) in </span><span class="si">% f</span><span class="s2">or the last time step on the given edge.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationEdgeGetLastStepOccupancyViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepOccupancyViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getLastStepOccupancy</span><span class="p">(</span><span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgeGetLastStepLengthViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepLengthViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetLastStepLengthViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the mean length of vehicles which were on the edge in the last step [m]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span>

<div class="viewcode-block" id="TransportationEdgeGetLastStepLengthViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepLengthViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the mean vehicle length in m for the last time step on the given edge.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the mean vehicle length in m for the last time step on the given edge.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationEdgeGetLastStepLengthViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepLengthViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getLastStepLength</span><span class="p">(</span><span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgeGetWaitingTimeViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetWaitingTimeViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetWaitingTimeViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the sum of the waiting times for all vehicles on the edge [s]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span>

<div class="viewcode-block" id="TransportationEdgeGetWaitingTimeViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetWaitingTimeViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the sum of the waiting time of all vehicles currently on that edge (see traci.vehicle.getWaitingTime).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the sum of the waiting time of all vehicles currently on that edge (see traci.vehicle.getWaitingTime).&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationEdgeGetWaitingTimeViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetWaitingTimeViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getWaitingTime</span><span class="p">(</span><span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgeGetLastStepPersonIDsViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepPersonIDsViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetLastStepPersonIDsViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the list of ids of persons that were on the named edge in the last simulation step</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span>

<div class="viewcode-block" id="TransportationEdgeGetLastStepPersonIDsViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepPersonIDsViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the ids of the persons on the given edge during the last time step.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the ids of the persons on the given edge during the last time step.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationEdgeGetLastStepPersonIDsViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepPersonIDsViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getLastStepPersonIDs</span><span class="p">(</span><span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TransportationEdgeGetLastStepHaltingNumberViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepHaltingNumberViewSet">[docs]</a><span class="k">class</span> <span class="nc">TransportationEdgeGetLastStepHaltingNumberViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint to get the total number of halting vehicles for the last time step on the given edge. A speed of less than 0.1 m/s is considered a halt.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span>

<div class="viewcode-block" id="TransportationEdgeGetLastStepHaltingNumberViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepHaltingNumberViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the total number of halting vehicles for the last time step on the given edge. A speed of less than 0.1 m/s is considered a halt.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Transportation Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;Returns the total number of halting vehicles for the last time step on the given edge. A speed of less than 0.1 m/s is considered a halt.&quot;&quot;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;edgeID&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an edge id&#39;</span><span class="p">,</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>

<div class="viewcode-block" id="TransportationEdgeGetLastStepHaltingNumberViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.TransportationEdgeGetLastStepHaltingNumberViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">TransportationEdgeGetSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">edgeID</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edgeID&#39;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">tracioutput</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">edge</span><span class="o">.</span><span class="n">getLastStepHaltingNumber</span><span class="p">(</span><span class="n">edgeID</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">tracioutput</span><span class="p">})</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>



<span class="c1"># Power</span>
<div class="viewcode-block" id="PowerViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.PowerViewSet">[docs]</a><span class="k">class</span> <span class="nc">PowerViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint for power.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">PowerSerializer</span>
<div class="viewcode-block" id="PowerViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.PowerViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Power Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;Experiment Name&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an experiment name&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;Timestep&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide the time step&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;Itterations&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide the number of iterations&#39;</span>
                         <span class="p">}</span>
                        <span class="p">)</span></div>
<div class="viewcode-block" id="PowerViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.PowerViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">PowerSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">timestep</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;timestep&#39;</span><span class="p">)</span>
            <span class="n">itterations</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;itterations&#39;</span><span class="p">)</span>
            <span class="n">experiment_name</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;experiment_name&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">timestep</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">itterations</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">experiment_name</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">rcommand</span> <span class="o">=</span> <span class="s2">&quot;cd /mcr-install; bash run.sh &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">timestep</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot; &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">itterations</span><span class="p">)</span>
                <span class="n">host</span> <span class="o">=</span> <span class="s1">&#39;matlab&#39;</span>
                <span class="n">username</span> <span class="o">=</span> <span class="s1">&#39;root&#39;</span>
                <span class="n">password</span> <span class="o">=</span> <span class="s1">&#39;matlab&#39;</span>
                <span class="n">con</span> <span class="o">=</span> <span class="n">paramiko</span><span class="o">.</span><span class="n">SSHClient</span><span class="p">()</span>
                <span class="n">con</span><span class="o">.</span><span class="n">set_missing_host_key_policy</span><span class="p">(</span><span class="n">paramiko</span><span class="o">.</span><span class="n">MissingHostKeyPolicy</span><span class="p">())</span>
                <span class="n">con</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
                <span class="n">stdin</span><span class="p">,</span> <span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">exec_command</span><span class="p">(</span><span class="n">rcommand</span><span class="p">)</span>
                <span class="n">finalfilename</span> <span class="o">=</span> <span class="s2">&quot;results-&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">timestep</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;-&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">itterations</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;.mat&quot;</span>
                <span class="n">dlocation</span> <span class="o">=</span> <span class="s1">&#39;/usr/src/app/basp/uploads/&#39;</span><span class="o">+</span><span class="n">experiment_name</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">dlocation</span><span class="p">):</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">dlocation</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">stderr</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">stdout</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">stderr</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
                <span class="n">givenfile</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">scp</span> <span class="o">=</span> <span class="n">SCPClient</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">get_transport</span><span class="p">())</span>
                    <span class="n">scp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/mcr-install/results.mat&#39;</span><span class="p">)</span>
                    <span class="n">givenfile</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">givenfile</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">givenfile</span><span class="p">:</span>
                    <span class="n">filelocation</span> <span class="o">=</span> <span class="s1">&#39;/usr/src/app/results.mat&#39;</span>
                    <span class="n">newlocation</span> <span class="o">=</span> <span class="s1">&#39;/usr/src/app/basp/uploads/&#39;</span><span class="o">+</span><span class="n">experiment_name</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">finalfilename</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">filelocation</span><span class="p">,</span> <span class="n">newlocation</span><span class="p">)</span>
                <span class="n">newlocationurl</span> <span class="o">=</span> <span class="s2">&quot;http://localhost:8000/basp/uploads/&quot;</span><span class="o">+</span><span class="n">experiment_name</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">finalfilename</span>
                <span class="n">finalmessage</span> <span class="o">=</span> <span class="s2">&quot;Download simulator data at: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">newlocationurl</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;ok&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">finalmessage</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span> <span class="p">({</span><span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;timestep and itterations must be positive integer&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<span class="c1"># CIS</span>
<div class="viewcode-block" id="CISStartViewSet"><a class="viewcode-back" href="../../basp.html#basp.views.CISStartViewSet">[docs]</a><span class="k">class</span> <span class="nc">CISStartViewSet</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>

<span class="sd">        Use this API endpoint for power.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">CISStartSerializer</span>
<div class="viewcode-block" id="CISStartViewSet.list"><a class="viewcode-back" href="../../basp.html#basp.views.CISStartViewSet.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to run CIS simulations using Water, Transportation and Power simulators.</span>
<span class="sd">    &quot;&quot;&quot;</span>
        <span class="n">existing_ex_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
        <span class="n">allthenames</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">existing_ex_names</span><span class="p">:</span>
            <span class="n">allthenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">ex_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Simultaneous Water/Transoportation/Power Simulations&#39;</span><span class="p">,</span>
                                                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s1">&#39;Here you can start a multi-simulator simulation&#39;</span><span class="p">,</span>
                                                         <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="s1">&#39;the values in the reserved list are not allowed as experiment names&#39;</span><span class="p">,</span>
                                                         <span class="s1">&#39;reserved_list&#39;</span><span class="p">:</span> <span class="n">allthenames</span><span class="p">,</span>
                                                         <span class="s1">&#39;Experiment Name*&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide an experiment name&#39;</span><span class="p">,</span>
                                                         <span class="s1">&#39;Start Date&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide the start date&#39;</span><span class="p">,</span>
                                                         <span class="s1">&#39;Timestep Size Water&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide the time step size for Water Simulations (seconds)&#39;</span><span class="p">,</span>
                                                         <span class="s1">&#39;Timestep Size Transportation&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide the time step size for Transportation Simulations (seconds)&#39;</span><span class="p">,</span>
                                                         <span class="s1">&#39;Timestep Size Power&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide the time step size for Power Simulations (seconds)&#39;</span><span class="p">,</span>
                                                         <span class="s1">&#39;Itterations&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide the number of iterations&#39;</span><span class="p">,</span>
                                                         <span class="s1">&#39;Events&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide the events yml file&#39;</span><span class="p">,</span>
                                                         <span class="s1">&#39;Sensors&#39;</span><span class="p">:</span> <span class="s1">&#39;Provide the sensors yml file&#39;</span>
                                                         <span class="p">})</span></div>
<div class="viewcode-block" id="CISStartViewSet.post"><a class="viewcode-back" href="../../basp.html#basp.views.CISStartViewSet.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">CISStartSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">experiment_name</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;experiment_name&#39;</span><span class="p">)</span>
            <span class="n">start_date</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;start_date&#39;</span><span class="p">)</span>
            <span class="n">timestep_size_water</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;timestep_size_water&#39;</span><span class="p">)</span>
            <span class="n">timestep_size_transportation</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;timestep_size_transportation&#39;</span><span class="p">)</span>
            <span class="n">timestep_size_power</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;timestep_size_power&#39;</span><span class="p">)</span>
            <span class="n">itterations</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;itterations&#39;</span><span class="p">)</span>
            <span class="n">events</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;events&#39;</span><span class="p">)</span>
            <span class="n">water_sensors</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;water_sensors&#39;</span><span class="p">)</span>
            <span class="n">existing_ex_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
            <span class="n">allthenames</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">existing_ex_names</span><span class="p">:</span>
                <span class="n">allthenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">ex_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">experiment_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allthenames</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">timestep_size_water</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">timestep_size_transportation</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">timestep_size_power</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">itterations</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">experiment_name</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                    <span class="n">sensors</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[\n\t]*&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">water_sensors</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">events</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;adding events&#39;</span><span class="p">)</span>
                    <span class="n">final_sensors_json_file_contents</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                    <span class="n">fs</span> <span class="o">=</span> <span class="n">FileSystemStorage</span><span class="p">()</span>
                    <span class="n">sensors</span> <span class="o">=</span> <span class="n">ContentFile</span><span class="p">(</span><span class="n">sensors</span><span class="p">)</span>
                    <span class="n">filename</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">experiment_name</span> <span class="o">+</span> <span class="s1">&#39;/test.json&#39;</span><span class="p">,</span> <span class="n">sensors</span><span class="p">)</span>
                    <span class="n">f</span> <span class="o">=</span> <span class="n">default_storage</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">filename</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
                    <span class="k">with</span> <span class="n">f</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
                        <span class="n">final_sensors_json_file_contents</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>
                    <span class="n">startdate_object</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">timedurationinseconds</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">timestep_size_water</span><span class="p">)</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">itterations</span><span class="p">)</span>
                    <span class="n">enddate_object</span> <span class="o">=</span> <span class="n">startdate_object</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">timedurationinseconds</span><span class="p">)</span>
                    <span class="n">datediff</span> <span class="o">=</span> <span class="n">enddate_object</span> <span class="o">-</span> <span class="n">startdate_object</span>
                    <span class="n">days</span><span class="p">,</span> <span class="n">seconds</span> <span class="o">=</span> <span class="n">datediff</span><span class="o">.</span><span class="n">days</span><span class="p">,</span> <span class="n">datediff</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
                    <span class="n">hours</span> <span class="o">=</span> <span class="n">days</span> <span class="o">*</span> <span class="mi">24</span>
                    <span class="n">epoch1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">startdate_epoch</span> <span class="o">=</span> <span class="p">(</span><span class="n">startdate_object</span> <span class="o">-</span> <span class="n">epoch1</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1000.0</span>
                    <span class="n">enddate_epoch</span> <span class="o">=</span> <span class="p">(</span><span class="n">enddate_object</span> <span class="o">-</span> <span class="n">epoch1</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1000.0</span>
                    <span class="k">if</span> <span class="n">enddate_epoch</span> <span class="o">&lt;</span> <span class="n">startdate_epoch</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span>
                                        <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;start_date&#39;</span><span class="p">:</span> <span class="n">startdate_epoch</span><span class="p">,</span> <span class="s1">&#39;end_date&#39;</span><span class="p">:</span> <span class="n">enddate_epoch</span><span class="p">,</span>
                                              <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;startdate&gt;enddate&#39;</span><span class="p">})</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1">#try:</span>
                        <span class="c1"># Water Simulation</span>
                        <span class="c1"># Get Report Timestep</span>
                        <span class="n">opts</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span>
                        <span class="c1">#wn.options.time.report_timestep = str(timestep_size_water)</span>

                        <span class="c1"># print(timestepinseconds)</span>
                        <span class="c1"># Put New Duration</span>
                        <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span>
                        <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="s1">&#39;basp/Water/Water.inp&#39;</span><span class="p">)</span>
                        <span class="c1"># Run EPANET &amp; Convert Bin to JSON wntr</span>
                        <span class="n">watersim</span><span class="o">.</span><span class="n">wntr2jsonwntr</span><span class="p">(</span><span class="n">wn</span><span class="p">,</span> <span class="s1">&#39;basp/Water/jsonoutput.json&#39;</span><span class="p">)</span>
                        <span class="c1"># Write EPANET JSON to PostgreSQL</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;000000000000000000000000&#39;</span><span class="p">)</span>
                        <span class="n">watersim</span><span class="o">.</span><span class="n">readjsonwithfiles</span><span class="p">(</span><span class="s1">&#39;basp/Water/jsonoutput.json&#39;</span><span class="p">,</span> <span class="n">startdate_object</span><span class="p">,</span>
                                                   <span class="n">timestep_size_water</span><span class="p">,</span> <span class="n">final_sensors_json_file_contents</span><span class="p">,</span> <span class="n">experiment_name</span><span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;111111111111111111111111111111111&#39;</span><span class="p">)</span>
                        <span class="c1"># Save Experiment Name in the database</span>
                        <span class="n">newname</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="p">(</span><span class="n">ex_name</span><span class="o">=</span><span class="n">experiment_name</span><span class="p">,</span>
                                                         <span class="n">ex_sensor_filename</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
                        <span class="n">newname</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
                        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;startdate&#39;</span><span class="p">:</span> <span class="n">start_date</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;simulation completed&#39;</span><span class="p">})</span>
                        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">                        except:</span>
<span class="sd">                            return Response(status=status.HTTP_400_BAD_REQUEST,</span>
<span class="sd">                                            data={&#39;startdate&#39;: startdate_epoch, &#39;enddate&#39;: enddate_epoch,</span>
<span class="sd">                                                  &#39;message&#39;: &#39;simulation not completed&#39;})</span>
<span class="sd">                        &#39;&#39;&#39;</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;all good&#39;</span><span class="p">}</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Timestep size and itterations must be a positive integer&#39;</span><span class="p">}</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;experimentname is reserved&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="WaterStartWntrView"><a class="viewcode-back" href="../../basp.html#basp.views.WaterStartWntrView">[docs]</a><span class="k">class</span> <span class="nc">WaterStartWntrView</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Information</span>
<span class="sd">        Use this API endpoint to run an EPANET simulation.</span>
<span class="sd">        Values in the database will be used to create the EPANET inp file.</span>
<span class="sd">        You can provide details such as start/end date.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterStartSerializerWNTR</span>
<div class="viewcode-block" id="WaterStartWntrView.list"><a class="viewcode-back" href="../../basp.html#basp.views.WaterStartWntrView.list">[docs]</a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of Water Start Features&quot;&quot;&quot;</span>
        <span class="n">existing_ex_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
        <span class="n">allthenames</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">existing_ex_names</span><span class="p">:</span>
            <span class="n">allthenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">ex_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Title&#39;</span><span class="p">:</span> <span class="s1">&#39;KIOS BaSP REST API for Water Simulations&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;information&#39;</span><span class="p">:</span> <span class="s1">&#39;Here you can start a WNTR simulation&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="s1">&#39;the values in the reserved list are not allowed as experiment names&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;reserved_list&#39;</span><span class="p">:</span> <span class="n">allthenames</span><span class="p">})</span></div>

<div class="viewcode-block" id="WaterStartWntrView.post"><a class="viewcode-back" href="../../basp.html#basp.views.WaterStartWntrView.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="c1">#start_time = time.time()</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">WaterStartSerializerWNTR</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;basp/Water/Water.inp&#39;</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span><span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>
            <span class="n">startdate</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;startdate&#39;</span><span class="p">)</span>
            <span class="n">enddate</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;enddate&#39;</span><span class="p">)</span>
            <span class="n">existing_ex_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
            <span class="n">allthenames</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">existing_ex_names</span><span class="p">:</span>
                <span class="n">allthenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">ex_name</span><span class="p">)</span>
            <span class="n">experimentname</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;experimentname&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">experimentname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allthenames</span><span class="p">:</span>
                <span class="n">sensors</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sensors&#39;</span><span class="p">)</span>
                <span class="n">sensors</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[\n\t]*&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">sensors</span><span class="p">)</span>
                <span class="n">fileleak</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;leakages&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">fileleak</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fileleak</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="c1">#inp_file = &#39;basp/Water/Water.inp&#39;</span>
                            <span class="c1">#wn = wntr.network.WaterNetworkModel(inp_file)</span>
                            <span class="n">wn</span> <span class="o">=</span> <span class="n">addleakages</span><span class="o">.</span><span class="n">addwaterleak</span><span class="p">(</span><span class="n">fileleak</span><span class="p">,</span> <span class="n">wn</span><span class="p">)</span>
                            <span class="c1">#wn.write_inpfile(&#39;basp/Water/Water.inp&#39;)</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="s1">&#39;leakages file issue&#39;</span><span class="p">})</span>
                <span class="n">final_sensors_json_file_contents</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="n">fs</span> <span class="o">=</span> <span class="n">FileSystemStorage</span><span class="p">()</span>
                <span class="n">sensors</span> <span class="o">=</span> <span class="n">ContentFile</span><span class="p">(</span><span class="n">sensors</span><span class="p">)</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">experimentname</span><span class="o">+</span><span class="s1">&#39;/test.json&#39;</span><span class="p">,</span> <span class="n">sensors</span><span class="p">)</span>
                <span class="n">f</span> <span class="o">=</span> <span class="n">default_storage</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">filename</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
                <span class="k">with</span> <span class="n">f</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
                    <span class="n">final_sensors_json_file_contents</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>
                <span class="n">startdate_object</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">startdate</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">enddate_object</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">enddate</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">datediff</span> <span class="o">=</span> <span class="n">enddate_object</span> <span class="o">-</span> <span class="n">startdate_object</span>
                <span class="n">days</span><span class="p">,</span> <span class="n">seconds</span> <span class="o">=</span> <span class="n">datediff</span><span class="o">.</span><span class="n">days</span><span class="p">,</span> <span class="n">datediff</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
                <span class="n">hours</span> <span class="o">=</span> <span class="n">days</span> <span class="o">*</span> <span class="mi">24</span>
                <span class="n">epoch1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">startdate_epoch</span> <span class="o">=</span> <span class="p">(</span><span class="n">startdate_object</span> <span class="o">-</span> <span class="n">epoch1</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1000.0</span>
                <span class="n">enddate_epoch</span> <span class="o">=</span> <span class="p">(</span><span class="n">enddate_object</span> <span class="o">-</span> <span class="n">epoch1</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1000.0</span>
                <span class="n">grafanaurl</span> <span class="o">=</span> <span class="s2">&quot;http://localhost:3001/d/GIfxrnEGz/water-sensors-basp?orgId=1&amp;from=&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">startdate_epoch</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;&amp;to=&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">enddate_epoch</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">hours</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;startdate&#39;</span><span class="p">:</span> <span class="n">startdate</span><span class="p">,</span> <span class="s1">&#39;enddate&#39;</span><span class="p">:</span> <span class="n">enddate</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;startdate&gt;enddate&#39;</span><span class="p">})</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">ex_name</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;experimentname&#39;</span><span class="p">)</span>
                        <span class="c1">#Get Report Timestep</span>

                        <span class="n">opts</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">options</span>
                        <span class="n">timestepinseconds</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">report_timestep</span>
                        <span class="c1">#print(timestepinseconds)</span>
                        <span class="c1">#Put New Duration</span>
                        <span class="n">wn</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span>
                        <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span><span class="p">(</span><span class="s1">&#39;basp/Water/Water.inp&#39;</span><span class="p">)</span>
                        <span class="c1"># Run EPANET &amp; Convert Bin to JSON wntr</span>
                        <span class="n">watersim</span><span class="o">.</span><span class="n">wntr2jsonwntr</span><span class="p">(</span><span class="n">wn</span><span class="p">,</span><span class="s1">&#39;basp/Water/jsonoutput.json&#39;</span><span class="p">)</span>
                        <span class="c1">#time1 = time.time() - start_time</span>
                        <span class="c1"># Write EPANET JSON to PostgreSQL</span>
                        <span class="n">watersim</span><span class="o">.</span><span class="n">readjsonwithfiles</span><span class="p">(</span><span class="s1">&#39;basp/Water/jsonoutput.json&#39;</span><span class="p">,</span> <span class="n">startdate_object</span><span class="p">,</span> <span class="n">timestepinseconds</span><span class="p">,</span> <span class="n">final_sensors_json_file_contents</span><span class="p">,</span> <span class="n">ex_name</span><span class="p">)</span>
                        <span class="c1"># Save Experiment Name in the database</span>
                        <span class="n">newname</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ExperimentNames</span><span class="p">(</span><span class="n">ex_name</span><span class="o">=</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;experimentname&#39;</span><span class="p">),</span> <span class="n">ex_sensor_filename</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
                        <span class="n">newname</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
                        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;startdate&#39;</span><span class="p">:</span> <span class="n">startdate</span><span class="p">,</span> <span class="s1">&#39;enddate&#39;</span><span class="p">:</span> <span class="n">enddate</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;simulation completed&#39;</span><span class="p">,</span> <span class="s1">&#39;water interface&#39;</span><span class="p">:</span> <span class="n">grafanaurl</span><span class="p">})</span><span class="c1"># &#39;transportation interface&#39;:&#39;http://localhost:3001/d/4YdONpXGk/transportation?orgId=1&amp;from=1617570000000&amp;to=1617656399000&#39;})</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;startdate&#39;</span><span class="p">:</span> <span class="n">startdate</span><span class="p">,</span> <span class="s1">&#39;enddate&#39;</span><span class="p">:</span> <span class="n">enddate</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;simulation not completed&#39;</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;experimentname is reserved&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_400_BAD_REQUEST</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="testfunction"><a class="viewcode-back" href="../../basp.html#basp.views.testfunction">[docs]</a><span class="k">def</span> <span class="nf">testfunction</span><span class="p">():</span>
    <span class="c1"># try:</span>
    <span class="c1">#     client = InfluxDBClient(host=&#39;influxdb&#39;, port=8086, username=&#39;kios&#39;, password=&#39;kios1234!&#39;,</span>
    <span class="c1">#                             database=&#39;virtual_city&#39;)</span>
    <span class="c1"># except:</span>
    <span class="c1">#     client.close()</span>
    <span class="c1"># query = &quot;SELECT sensor_value FROM water_output_test010_scada_sensors&quot;</span>
    <span class="c1"># result = client.query(query)</span>
    <span class="c1"># client.close()</span>
    <span class="c1"># print(result)</span>
    <span class="c1"># wn = wntr.epanet.io.InpFile.read(wn,inp_file)</span>

    <span class="n">inp_file</span> <span class="o">=</span> <span class="s1">&#39;/usr/src/app/basp/Water/Water.inp&#39;</span>
    <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">WaterNetworkModel</span> <span class="p">(</span><span class="n">inp_file</span><span class="p">)</span>

    <span class="c1">#Pipe breaks or leaks</span>
    <span class="n">wn</span> <span class="o">=</span> <span class="n">wntr</span><span class="o">.</span><span class="n">morph</span><span class="o">.</span><span class="n">split_pipe</span> <span class="p">(</span><span class="n">wn</span><span class="p">,</span> <span class="s1">&#39;p123&#39;</span><span class="p">,</span> <span class="s1">&#39;123_B&#39;</span><span class="p">,</span> <span class="s1">&#39;123_leak_node&#39;</span><span class="p">)</span>
    <span class="n">leak_node</span> <span class="o">=</span> <span class="n">wn</span><span class="o">.</span><span class="n">get_node</span> <span class="p">(</span><span class="s1">&#39;123_leak_node&#39;</span><span class="p">)</span>
    <span class="n">leak_node</span><span class="o">.</span><span class="n">add_leak</span> <span class="p">(</span><span class="n">wn</span><span class="p">,</span> <span class="n">area</span> <span class="o">=</span> <span class="mf">0.05</span><span class="p">,</span> <span class="n">start_time</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">3600</span><span class="p">,</span> <span class="n">end_time</span> <span class="o">=</span> <span class="mi">12</span> <span class="o">*</span> <span class="mi">3600</span><span class="p">)</span>

    <span class="n">wn</span><span class="o">.</span><span class="n">write_inpfile</span> <span class="p">(</span><span class="s1">&#39;filename.inp&#39;</span><span class="p">)</span></div>
    <span class="c1"># t = wntr.graphics.plot_network (wn, title = wn.name)</span>

    <span class="c1"># wntr.epanet.io.InpFile.write(wn,&#39;/usr/src/app/basp/Water/Water.inp&#39;,wn,&#39;AFD&#39;)</span>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, KIOS CoE.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>